(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{110:function(e,t,r){"use strict";var n=r(89),a=r(0),i=r.n(a),c=r(2);r(454);t.a=function(e){var t=e.className,r=e.onClick,a=e.disabled,s=e.children,o=e.size,u=Object(n.a)(e,["className","onClick","disabled","children","size"]);return i.a.createElement(c.b,Object.assign({className:"button button--primary ".concat(t),onClick:r,disabled:a,color:"primary",size:o},u),s)}},143:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(1),a=r(392),i=r.n(a),c=function e(t){var r=t.season,a=t.raceName;Object(n.a)(this,e),this.season=r,this.raceName=a,this.roundId=i()("".concat(this.raceName," ").concat(this.season))}},144:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(1),a=r(8),i=r(7),c=r(9),s=function(e){function t(e){var r,c=e.season,s=e.raceName,o=e.raceUrl,u=e.circuit,l=e.roundSchedule;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(i.a)(t).call(this,{season:c,raceName:s}))).raceUrl=o,r.circuit=u,r.roundSchedule=l,r}return Object(c.a)(t,e),t}(r(143).a)},15:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={HOME:"/",CALENDAR:"/calendar",BETS:"/bet",ADMIN:"/admin",RESULTS:"/results",RACERS:"/racers",TEAMS:"/teams",LOGIN:"/login",LOGOUT:"/logout",BETS_HISTORY:"/bets-history"}},194:function(e,t,r){"use strict";var n=r(1),a=r(5),i=r(8),c=r(7),s=r(9),o=function(){function e(){Object(n.a)(this,e),this._score=[]}return Object(a.a)(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._score.push(e)}},{key:"getPointsAt",value:function(e){return this._score[e]}},{key:"value",get:function(){return this._score.reduce(function(e,t){return e+t},0)}},{key:"tooltip",get:function(){return this._score.join("-")}}]),e}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new o;return t?function(e,t){var r=new o,n=t.slice(0,10);return e.forEach(function(e,a){if(e){var i=t.findIndex(function(t){return t===e}),c=Math.abs(i-a),s=n.some(function(t){return t===e}),o=c<5?10-2*c:s?2:0;r.add(o)}else r.add(0)}),r}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Array(t).fill(null).map(function(t,r){return e[r+1]?e[r+1]:""})}(e),Object.values(t)):r}var l=r(72);r.d(t,"a",function(){return p});var p="official-results",f=function(e){function t(e){var r,a=e.userName,s=e.userId,o=e.userBetsMap,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(n.a)(this,t),(r=Object(i.a)(this,Object(c.a)(t).call(this,{name:a,id:s}))).userPoll=o,r.userScore=u(o,l),r}return Object(s.a)(t,e),Object(a.a)(t,null,[{key:"createOfficialResults",value:function(e){return new t({userName:"Formula 1 (Official)",userId:p,userBetsMap:e})}}]),t}(l.a);t.b=f},198:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(1),a=function e(t){var r=t.raceName,a=t.raceTime,i=t.qualTime,c=t.practice1Time,s=t.practice2Time,o=t.practice3Time,u=t.id;Object(n.a)(this,e),this.raceName=r,this.raceTime=a,this.qualTime=i,this.practice1Time=c,this.practice2Time=s,this.practice3Time=o,this.raceId=u}},199:function(e,t,r){"use strict";var n=r(1);t.a=function e(t){var r=t.racerId,a=t.racerFullName,i=t.racerPoints,c=t.racerUrl,s=t.racerNumber,o=t.racerNationality,u=t.constructorName,l=t.constructorUrl;Object(n.a)(this,e),this.racerId=r,this.racerFullName=a,this.racerUrl=c,this.racerPoints=i,this.racerNumber=s,this.racerNationality=o,this.constructorUrl=l,this.constructorName=u}},2:function(e,t,r){"use strict";r(404),r(405);var n=r(26),a=r.n(n),i=r(147),c=r.n(i),s=r(205),o=r.n(s),u=r(206),l=r.n(u),p=r(207),f=r.n(p),d=r(209),h=r.n(d),m=r(210),b=r.n(m),v=r(211),y=r.n(v),O=r(212),g=r.n(O),j=r(213),_=r.n(j),w=r(214),k=r.n(w),S=r(222),T=r.n(S),E=r(223),N=r.n(E),M=r(227),x=r.n(M),R=r(226),Z=r.n(R),U=r(224),A=r.n(U),I=r(225),P=r.n(I),B=r(219),D=r.n(B),C=r(220),W=r.n(C),q=r(204),L=r.n(q),H=r(228),F=r.n(H),z=r(229),V=r.n(z),Y=r(221),G=r.n(Y),J=r(230),K=r.n(J),$=r(231),Q=r.n($),X=r(232),ee=r.n(X),te=r(233),re=r.n(te),ne=r(234),ae=r.n(ne),ie=r(3),ce=r.n(ie),se=r(10),oe=r(107),ue=r.n(oe),le={get:function(){var e=Object(se.a)(ce.a.mark(function e(t){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.get(t);case 3:return e.abrupt("return",e.sent.data);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),put:function(){var e=Object(se.a)(ce.a.mark(function e(t,r){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",ue.a.put(t,r));case 4:e.prev=4,e.t0=e.catch(0),console.error(e.t0.message);case 7:case"end":return e.stop()}},e,this,[[0,4]])}));return function(t,r){return e.apply(this,arguments)}}()};r.d(t,"a",function(){return L.a}),r.d(t,"b",function(){return c.a}),r.d(t,"e",function(){return o.a}),r.d(t,"w",function(){return l.a}),r.d(t,"c",function(){return f.a}),r.d(t,"i",function(){return h.a}),r.d(t,"k",function(){return b.a}),r.d(t,"m",function(){return y.a}),r.d(t,"n",function(){return g.a}),r.d(t,"z",function(){return _.a}),r.d(t,"d",function(){return k.a}),r.d(t,"r",function(){return D.a}),r.d(t,"s",function(){return W.a}),r.d(t,"t",function(){return G.a}),r.d(t,"u",function(){return T.a}),r.d(t,"v",function(){return N.a}),r.d(t,"g",function(){return A.a}),r.d(t,"f",function(){return P.a}),r.d(t,"h",function(){return Z.a}),r.d(t,"A",function(){return x.a}),r.d(t,"x",function(){return F.a}),r.d(t,"y",function(){return V.a}),r.d(t,"l",function(){return K.a}),r.d(t,"j",function(){return Q.a}),r.d(t,"o",function(){return ee.a}),r.d(t,"q",function(){return re.a}),r.d(t,"p",function(){return ae.a}),r.d(t,"B",function(){return le}),a.a.locale("ru")},200:function(e,t,r){"use strict";var n=r(1);t.a=function e(t){var r=t.pos,a=t.name,i=t.id,c=t.points,s=t.url,o=t.nationality;Object(n.a)(this,e),this.pos=r,this.name=a,this.id=i,this.points=c,this.url=s,this.nationality=o}},201:function(e,t,r){"use strict";var n=r(1),a=r(5),i=r(8),c=r(7),s=r(9),o=r(202),u=r(72),l=r(393),p=r.n(l),f=r(394),d=r.n(f),h=function(e){function t(e){var r,a=e.season,s=e.raceName,l=e.raceUrl,p=e.circuit,f=e.roundSchedule,d=e.bets,h=void 0===d?[]:d,m=e.raceResults,b=void 0===m?{}:m;return Object(n.a)(this,t),(r=Object(i.a)(this,Object(c.a)(t).call(this,{season:a,raceName:s,raceUrl:l,circuit:p,roundSchedule:f}))).bets=h.map(function(e){var t=e.userInfo,r=t.name,n=t.id,a=e.betsMap;return new o.a({userInfo:new u.a({name:r,id:n}),betsMap:a})}),r.raceResults=b,r}return Object(s.a)(t,e),Object(a.a)(t,[{key:"raceStartTime",get:function(){return this.roundSchedule.race}},{key:"qualifyingStartTime",get:function(){return this.roundSchedule.qualification}},{key:"prettyTitle",get:function(){return p()(this.raceName).map(d.a).join(" ")}}]),t}(r(144).a);t.a=h},202:function(e,t,r){"use strict";var n=r(1),a=r(45);t.a=function e(t){var r=t.userInfo,i=t.betsMap;Object(n.a)(this,e),this.userInfo=r,this.betsMap=function(e){if(e instanceof Map){var t={},r=!0,n=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var o=c.value,u=Object(a.a)(o,2),l=u[0],p=u[1];p&&(t[l]=p)}}catch(f){n=!0,i=f}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return t}return e}(i)}},31:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"e",function(){return c}),r.d(t,"g",function(){return s}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return l}),r.d(t,"f",function(){return p});var n=r(26),a=r.n(n);function i(e){return a()(e).format("D MMMM YYYY, HH:mm")}function c(e){return a()(e).format("D MMMM YYYY, HH:mm:ss")}function s(e){return a()(e).utc().format()}function o(e){return a()(e).format("DD MMMM")}function u(e){return a()(e).format("ddd")}function l(e){return a()(e).format("HH:mm")}function p(e){return a()(e).format("D MMM YYYY")}},350:function(e,t,r){"use strict";var n=r(73),a=r(63),i=r(33),c=r(1),s=r(5),o=r(88),u=r.n(o),l=r(194),p=function(){function e(t){var r=this,n=t.race,a=t.finishedRacers,i=void 0===a?[]:a;Object(c.a)(this,e),this._officialResults=null,this._officialResultsBetMap=null,this.raceId=n.roundId,this.raceTitle=n.prettyTitle+" "+n.season,i.length>0&&(this._officialResultsBetMap=this._convertToBetMap(i),this._officialResults=l.b.createOfficialResults(this._officialResultsBetMap)),this._userVotes=n.bets.map(function(e){return new l.b({userName:e.userInfo.name,userId:e.userInfo.id,userBetsMap:e.betsMap},r._officialResultsBetMap)})}return Object(s.a)(e,[{key:"_convertToBetMap",value:function(e){return e.reduce(function(e,t,r){return Object(i.a)({},e,Object(a.a)({},r+1,t.code))},{})}},{key:"hasOfficialResults",get:function(){return null!==this._officialResults}},{key:"userBetsResults",get:function(){if(this.hasOfficialResults){var e=u()(this._userVotes,function(e){return-e.userScore.value});return[this._officialResults].concat(Object(n.a)(e))}return Object(n.a)(this._userVotes)}},{key:"userVotes",get:function(){return this._userVotes}}]),e}();t.a=p},351:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(1),a=function e(t){var r=t.userId,a=t.userName,i=t.totalPoints,c=void 0===i?0:i;Object(n.a)(this,e),this.userId=r,this.userName=a,this.totalPoints=c}},39:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(146),a=r.n(n),i="-26bf-11e8-";function c(){return a()()+a()(i)}},399:function(e,t,r){e.exports=r(720)},439:function(e,t,r){},440:function(e,t,r){},441:function(e,t,r){},444:function(e,t,r){},445:function(e,t,r){},446:function(e,t,r){},447:function(e,t,r){},450:function(e,t,r){},451:function(e,t,r){},452:function(e,t,r){},453:function(e,t,r){},454:function(e,t,r){},458:function(e,t,r){},459:function(e,t,r){},460:function(e,t,r){},461:function(e,t,r){},462:function(e,t,r){},47:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(1),a=r(5),i=r(8),c=r(7),s=r(9),o=r(72),u=r(39),l=function(e){function t(e){var r,a=e.login,s=e.name,o=e.password,l=e.id,p=e.isAdmin,f=void 0!==p&&p,d=e.isTesting,h=void 0!==d&&d;return Object(n.a)(this,t),(r=Object(i.a)(this,Object(c.a)(t).call(this,{name:s,id:l}))).login=a,r.password=o,r.id=l||Object(u.a)(),r.isAdmin=f,r.isTesting=h,r}return Object(s.a)(t,e),Object(a.a)(t,[{key:"toUserInfo",value:function(){return new o.a(this)}}],[{key:"fromJs",value:function(e){var r=e.login,n=e.name,a=e.password,i=e.id,c=e.isAdmin;return new t({login:r,name:n,password:a,id:i,isAdmin:void 0!==c&&c})}}]),t}(o.a)},631:function(e,t,r){var n={"./ar":304,"./ar.js":304,"./az":305,"./az.js":305,"./be":306,"./be.js":306,"./bg":307,"./bg.js":307,"./bs":308,"./bs.js":308,"./ca":309,"./ca.js":309,"./cs":310,"./cs.js":310,"./cy":311,"./cy.js":311,"./da":312,"./da.js":312,"./de":313,"./de.js":313,"./el":314,"./el.js":314,"./en":179,"./en.js":179,"./es":315,"./es.js":315,"./et":316,"./et.js":316,"./eu":317,"./eu.js":317,"./fa":318,"./fa.js":318,"./fi":319,"./fi.js":319,"./fr":320,"./fr.js":320,"./hr":321,"./hr.js":321,"./hu":322,"./hu.js":322,"./id":323,"./id.js":323,"./it":324,"./it.js":324,"./ja":325,"./ja.js":325,"./ka":326,"./ka.js":326,"./ko":327,"./ko.js":327,"./lt":328,"./lt.js":328,"./lv":329,"./lv.js":329,"./mk":330,"./mk.js":330,"./mn":331,"./mn.js":331,"./ms":332,"./ms.js":332,"./nb_NO":333,"./nb_NO.js":333,"./nl":334,"./nl.js":334,"./pl":335,"./pl.js":335,"./pt":336,"./pt.js":336,"./pt_BR":337,"./pt_BR.js":337,"./ro":338,"./ro.js":338,"./ru":339,"./ru.js":339,"./sl":340,"./sl.js":340,"./sq":341,"./sq.js":341,"./sr":342,"./sr.js":342,"./sv":343,"./sv.js":343,"./tr":344,"./tr.js":344,"./ua":345,"./ua.js":345,"./uk":346,"./uk.js":346,"./vi":347,"./vi.js":347,"./zh":348,"./zh.js":348,"./zh_TW":349,"./zh_TW.js":349};function a(e){var t=i(e);return r(t)}function i(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id=631},639:function(e,t){},641:function(e,t){},673:function(e,t){},674:function(e,t){},72:function(e,t,r){"use strict";var n=r(1);t.a=function e(t){var r=t.name,a=t.id;Object(n.a)(this,e),this.name=r,this.id=a}},720:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(50),c=r.n(i),s=r(723),o=r(4),u=r(17),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var f,d,h,m,b={isProductionMode:function(){return!1},getUserStoreApiUrl:function(){return"https://api.myjson.com/bins/mlxol"},getRaceStoreApiUrl:function(){return"https://api.myjson.com/bins/1assrh"},getLocalStorageUserKey:function(){return"f1betsappuserid"},getTickInterval:function(){return"1"},getCurrentSeason:function(){return"2019"},getVoteClosingTime:function(){return parseInt("15#minutes",10)}},v=r(2),y=r(1),O=r(5),g=r(8),j=r(7),_=r(9),w=r(725),k=(r(439),r(440),r(22)),S=r(54),T=r(6),E=(r(40),r(441),r(15)),N=r(47),M=r(721),x=function(e){var t=e.path,r=void 0===t?"/":t,n=e.className,i=void 0===n?"":n,c=e.disabled,s=void 0!==c&&c,o=e.children;return s?o:a.a.createElement(M.a,{to:r,className:i},o)},R=function(e){var t=e.user,r=t.isAdmin,n=t.name;return a.a.createElement(v.A,{nav:!0,inNavbar:!0},a.a.createElement(v.h,{nav:!0,caret:!0},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),a.a.createElement(v.g,{className:"nav-bar-drop-down-menu",right:!0},a.a.createElement(v.f,{header:!0},n),r&&a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.ADMIN,className:"nav-bar-drop-down-menu__link"},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430")),a.a.createElement(v.f,{disabled:!0},a.a.createElement(x,{path:E.a.BETS,disabled:!0,className:"nav-bar-drop-down-menu__link"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c")),a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.BETS_HISTORY,className:"nav-bar-drop-down-menu__link"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0439")),a.a.createElement(v.f,{divider:!0}),a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.LOGOUT,className:"nav-bar-drop-down-menu__link"},"\u0412\u044b\u0445\u043e\u0434"))))},Z="\u0421\u0435\u0439\u0447\u0430\u0441 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 \u044d\u0442\u043e\u0442 \u044d\u0442\u0430\u043f \u0443\u0436\u0435 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f. \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0412\u0430\u0448\u0435 \u0443\u0447\u0430\u0441\u0442\u0438\u0435.",U=Object(u.inject)(function(e){return{isAuthenticated:e.appStore.isUserAuthenticated,authenticatedUser:e.appStore.authenticatedUser,isBetsAllowed:e.appStore.isBetsAllowed,isUserAlreadyBet:e.appStore.isUserAlreadyBet}})(f=Object(u.observer)((d=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a))),Object(k.a)(r,"isOpen",h,Object(S.a)(Object(S.a)(r))),Object(k.a)(r,"handleToggle",m,Object(S.a)(Object(S.a)(r))),r}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,r=e.authenticatedUser,n=e.isBetsAllowed,i=e.isUserAlreadyBet;return a.a.createElement(v.u,{className:"navigation-bar",color:"dark",dark:!0,expand:"md",fixed:"top"},a.a.createElement(v.e,null,a.a.createElement(x,{path:E.a.HOME,className:"navbar-brand"},"Formula 1 Bets App"),a.a.createElement(v.v,{onClick:this.handleToggle}),a.a.createElement(v.d,{isOpen:this.isOpen,navbar:!0},a.a.createElement(v.r,{className:"ml-auto",navbar:!0},a.a.createElement(v.A,{nav:!0,inNavbar:!0},a.a.createElement(v.h,{nav:!0,caret:!0},"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0435"),a.a.createElement(v.g,{className:"nav-bar-drop-down-menu",right:!0},t&&a.a.createElement(v.f,{disabled:!n},a.a.createElement(x,{path:E.a.BETS,className:"nav-bar-drop-down-menu__link",disabled:!n},i?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437")),a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.RESULTS,className:"nav-bar-drop-down-menu__link"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f")),t&&a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.BETS_HISTORY,className:"nav-bar-drop-down-menu__link"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0412\u0430\u0448\u0438\u0445 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0439")))),a.a.createElement(v.A,{nav:!0,inNavbar:!0},a.a.createElement(v.h,{nav:!0,caret:!0},"\u0427\u0435\u043c\u043f\u0438\u043e\u043d\u0430\u0442"),a.a.createElement(v.g,{className:"nav-bar-drop-down-menu",right:!0},a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.CALENDAR,className:"nav-bar-drop-down-menu__link"},"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c")),a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.RACERS,className:"nav-bar-drop-down-menu__link"},"\u0413\u043e\u043d\u0449\u0438\u043a\u0438")),a.a.createElement(v.f,null,a.a.createElement(x,{path:E.a.TEAMS,className:"nav-bar-drop-down-menu__link"},"\u041a\u043e\u043c\u0430\u043d\u0434\u044b")))),t?r&&a.a.createElement(R,{user:r,isBetsAllowed:n}):a.a.createElement(v.s,null,a.a.createElement(x,{path:E.a.LOGIN,className:"nav-link"},"\u0412\u0445\u043e\u0434"))))))}}]),t}(a.a.Component),h=Object(T.a)(d.prototype,"isOpen",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(T.a)(d.prototype,"handleToggle",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isOpen=!e.isOpen}}}),f=d))||f)||f,A=r(26),I=r.n(A),P=function(e){var t=e.value,r=e.label;return a.a.createElement("div",{className:"awesome-countdown-timer__section awesome-countdown-timer-section"},a.a.createElement("div",{className:"awesome-countdown-timer-section__time"},t),a.a.createElement("div",{className:"awesome-countdown-timer-section__label"},r))},B=function(e){var t=e.splitter,r=void 0===t?":":t;return a.a.createElement("div",{className:"awesome-countdown-timer__splitter"},r)};var D=function(e){var t=e.className,r=e.withSplitter,n=function(e){var t={months:"",days:"",hours:"",minutes:"",seconds:""};return e?(Math.floor(e.asMonths())>0&&(Math.floor(e.months())<10?t.months="0"+Math.floor(e.months()):t.months=Math.floor(e.months())),Math.floor(e.asDays())>0&&(Math.floor(e.days())<10?t.days="0"+Math.floor(e.days()):t.days=Math.floor(e.days())),Math.floor(e.asHours())>0&&(Math.floor(e.hours())<10?t.hours="0"+Math.floor(e.hours()):t.hours=Math.floor(e.hours())),Math.floor(e.asMinutes())>0&&(Math.floor(e.minutes())<10?t.minutes="0"+Math.floor(e.minutes()):t.minutes=Math.floor(e.minutes())),Math.floor(e.asSeconds())>0&&(Math.floor(e.seconds())<10?t.seconds="0"+Math.floor(e.seconds()):t.seconds=Math.floor(e.seconds())),t):t}(e.duration),i=n.months,c=n.days,s=n.hours,o=n.minutes,u=n.seconds;return a.a.createElement("div",{className:"awesome-countdown-timer ".concat(t)},i&&a.a.createElement(P,{value:i,label:"Months"}),r&&i&&a.a.createElement(B,null),c&&a.a.createElement(P,{value:c,label:"Days"}),r&&c&&a.a.createElement(B,null),s&&a.a.createElement(P,{value:s,label:"Hours"}),r&&s&&a.a.createElement(B,null),o&&a.a.createElement(P,{value:o,label:"Minutes"}),r&&o&&a.a.createElement(B,null),u&&a.a.createElement(P,{value:u,label:"Seconds"}))};D.defaultProps={className:"",withSplitter:!1};var C=D;r(444);var W=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.withSplitter,n=function(e,t){var r=e?I()(e):I()(),n=I()(t),a=I.a.duration(n.diff(r));return a.asSeconds()>=0?a:null}(e.startDate,e.endDate);return a.a.createElement(C,{className:t,duration:n,withSplitter:r})}}]),t}(n.Component);W.defaultProps={className:"",withSplitter:!1};var q,L,H,F=W,z=(r(445),function(e){var t=e.startTime,r=e.endTime,n=e.className,i=void 0===n?"":n;return a.a.createElement(F,{className:"countdown-timer "+i,startDate:t,endDate:r,withSplitter:!0})}),V=(r(446),function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nextRaceStartTime,r=e.nextRaceTitle,n=e.currentTimeUtcString;return a.a.createElement(v.e,{className:"next-race-notifier alert-info"},a.a.createElement(v.w,null,a.a.createElement(v.c,{xs:12,sm:8,md:8,className:"next-race-notifier__race-info"},"\u0414\u043e \u0441\u0442\u0430\u0440\u0442\u0430 \u0433\u043e\u043d\u043a\u0438",a.a.createElement("strong",{className:"next-race-notifier__race-title"},r)),a.a.createElement(v.c,{xs:12,sm:4,md:4},a.a.createElement(z,{className:"next-race-notifier__countdown-timer",startTime:n,endTime:t}))))}}]),t}(a.a.Component)),Y=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"nextRace",get:function(){return this._appModel.nextRace}},{key:"currentTimeUtcString",get:function(){return this._appModel.timeWatcher.currentTimeUtcString}}]),e}(),G=Object(u.inject)("headerStore")(q=Object(u.observer)((H=L=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.headerStore,r=e.className,n=t.nextRace,i=t.currentTimeUtcString;return a.a.createElement("header",{className:r},a.a.createElement(U,null),a.a.createElement("section",{className:"alert-info"},n&&a.a.createElement(V,{nextRaceTitle:n.prettyTitle,nextRaceStartTime:n.raceStartTime,currentTimeUtcString:i})))}}]),t}(a.a.Component),L.defaultProps={className:""},q=H))||q)||q;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var $=a.a.createElement("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"}),Q=function(e){var t=e.svgRef,r=K(e,["svgRef"]);return a.a.createElement("svg",J({viewBox:"0 0 496 512",ref:t},r),$)},X=a.a.forwardRef(function(e,t){return a.a.createElement(Q,J({svgRef:t},e))}),ee=(r.p,r(447),(new Date).getFullYear()),te=function(e){var t=e.className,r=void 0===t?"":t;return a.a.createElement("footer",{className:"".concat(r," footer")},a.a.createElement(v.e,null,a.a.createElement(v.w,{className:"footer__social-media-links"},a.a.createElement(v.c,{className:"footer__copyright"},"\xa9 2018 - ",ee," F1 fun's team"),a.a.createElement(v.c,{xs:"2"},a.a.createElement(v.w,{className:"social-media-links"},a.a.createElement(v.c,{className:"social-media-links__telegram-box"},a.a.createElement("a",{href:"https://t.me/f1funteam",className:"footer__link social-media-links__link"},a.a.createElement(X,{className:"social-media-links__icon"}))))))))},re=r(39),ne=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a))))._handleLoadSeason=function(){r.props.onLoadSeason(r.props.season)},r}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSeasonLoaded,r=e.seasonTitle,n=e.loadSeasonButtonCaption;return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"section text-center"},t?r:a.a.createElement(v.b,{className:"button",color:"secondary",onClick:this._handleLoadSeason},n)),this.props.children)}}]),t}(a.a.Component),ae=r(112),ie=r(31);function ce(e){return e instanceof I.a?e:I()(e)}function se(e,t){return ce(e).isAfter(ce(t))}function oe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minute";return(e=ce(e)).add(t,r)}var ue=function(){function e(t){Object(y.a)(this,e),this._date=t}return Object(O.a)(e,[{key:"title",get:function(){return"\u0413\u043e\u043d\u043a\u0430"}},{key:"day",get:function(){return Object(ie.b)(this._date)}},{key:"timeInterval",get:function(){return this._date?"".concat(Object(ie.c)(this._date)):""}}]),e}(),le=function(e){function t(e,r){var n;return Object(y.a)(this,t),(n=Object(g.a)(this,Object(j.a)(t).call(this,r)))._practiceNumber=e,n}return Object(_.a)(t,e),Object(O.a)(t,[{key:"title",get:function(){return"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 ".concat(this._practiceNumber)}},{key:"timeInterval",get:function(){return this._date?"".concat(Object(ie.c)(this._date)," - ").concat(Object(ie.c)(oe(this._date,3===this._practiceNumber?1:1.5,"hour"))):""}}]),t}(ue),pe=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"title",get:function(){return"\u041a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}},{key:"timeInterval",get:function(){return this._date?"".concat(Object(ie.c)(this._date)," - ").concat(Object(ie.c)(oe(this._date,1,"hour"))):""}}]),t}(ue),fe=function(){function e(t){Object(y.a)(this,e),this._roundInfo=t,this.racerStandings=[]}return Object(O.a)(e,[{key:"addRacerStandings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.racerStandings=e,this}},{key:"roundId",get:function(){return this._roundInfo.roundId}},{key:"_firstPracticeStartTime",get:function(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[0]||""}},{key:"_secondPracticeStartTime",get:function(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[1]||""}},{key:"_thirdPracticeStartTime",get:function(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[2]||""}},{key:"_qualificationStartTime",get:function(){return this._roundInfo.roundSchedule?this._roundInfo.roundSchedule.qualification:""}},{key:"raceStartTime",get:function(){return this._roundInfo.roundSchedule?this._roundInfo.roundSchedule.race:""}},{key:"countryName",get:function(){return this._roundInfo.circuit.countryName}},{key:"circuitUrl",get:function(){return this._roundInfo.circuit.url}},{key:"raceUrl",get:function(){return this._roundInfo.raceUrl}},{key:"flagUrl",get:function(){return Object(ae.findFlagUrlByCountryName)(this.countryName)}},{key:"raceTitle",get:function(){return"Formula 1 ".concat(this._roundInfo.raceName," ").concat(this._roundInfo.season)}},{key:"practices",get:function(){return[new le(1,this._firstPracticeStartTime),new le(2,this._secondPracticeStartTime),new le(3,this._thirdPracticeStartTime)]}},{key:"qualification",get:function(){return new pe(this._qualificationStartTime)}},{key:"race",get:function(){return new ue(this.raceStartTime)}},{key:"weekendInterval",get:function(){return"".concat(Object(ie.f)(this._firstPracticeStartTime)," - ").concat(Object(ie.f)(this.raceStartTime))}}]),e}(),de=r(89),he=r(197),me=r.n(he),be=(r(450),function(e){var t=e.className,r=e.children,n=Object(de.a)(e,["className","children"]);return a.a.createElement("a",Object.assign({className:me()("text-link",t)},n),r)}),ve=(r(451),function(e){var t=e.className,r=void 0===t?"":t,n=e.countryName,i=e.flagUrl,c=e.countryUrl;return a.a.createElement("div",{className:"country-info ".concat(r)},a.a.createElement("div",{className:"country-info__flag"},a.a.createElement("img",{className:"country-info__flag-image",src:i,alt:n})),a.a.createElement(be,{href:c,target:"_blank",className:"country-info__country-name"},n))}),ye=(r(452),r(74)),Oe=function(e){function t(e){var r=e.firstName,n=e.lastName,a=e.number,i=e.abbreviation,c=e.points,s=e.nationality;return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).call(this,r,n,a,i,c,s))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"flagUrl",get:function(){return Object(ae.findFlagUrlByNationality)(this.nationality)}}]),t}(ye.a),ge=(r(453),function(e){var t=e.className,r=void 0===t?"":t,n=e.flagUrl,i=void 0===n?"":n,c=e.name,s=void 0===c?"":c,o=e.code;return a.a.createElement("div",{className:"racer-view ".concat(r),title:s},i&&a.a.createElement("img",{className:"racer-view__image",src:i,alt:s}),a.a.createElement("span",null,o))}),je=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.racers,r=e.rowSize;return Array(t.length/r).fill(0).map(function(e,n){return t.slice(n*r,n*r+r)}).map(function(e,t){return a.a.createElement("div",{key:t,className:"racer-standings-widget__row"},e.map(function(e,n){return a.a.createElement("div",{className:"racer-standings-widget__racer",key:e.code},a.a.createElement("div",{className:"racer-standings-widget__racer-pos-number"},n+(t*r+1)),a.a.createElement(ge,{className:"racer-standings-widget__racer-name",code:e.code,name:e.name}))}))})}}]),t}(a.a.Component);je.defaultProps={rowSize:20};var _e,we,ke,Se=r(110),Te=(_e=Object(u.inject)(function(e){return{isBetsAllowed:e.homePageStore.isBetsAllowed,isUserAlreadyBet:e.homePageStore.isUserAlreadyBet,isAuthenticated:e.homePageStore.isAuthenticated,nextRaceRoundId:e.homePageStore.nextWeekend.roundId}}),Object(w.a)(we=_e(we=Object(u.observer)((ke=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a))))._handleBetButtonClick=function(){r.props.history.push(r._canBet?E.a.BETS:E.a.RESULTS)},r}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isBetsAllowed,r=e.isUserAlreadyBet,n=e.isAuthenticated,i="\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u043e\u0432";return e.roundId===e.nextRaceRoundId&&(i=t?n?r?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0412\u043e\u0439\u0442\u0438 \u0434\u043b\u044f \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f":"\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u043e\u0432"),a.a.createElement(Se.a,{onClick:this._handleBetButtonClick},i)}},{key:"_canBet",get:function(){var e=this.props,t=e.isBetsAllowed,r=e.roundId,n=e.nextRaceRoundId;return t&&n===r}}]),t}(a.a.Component),Object(T.a)(ke.prototype,"_canBet",[o.computed],Object.getOwnPropertyDescriptor(ke.prototype,"_canBet"),ke.prototype),we=ke))||we)||we)||we),Ee=(r(458),function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.raceInfo,r=e.infoText,n=t.roundId,i=t.flagUrl,c=t.countryName,s=t.raceTitle,o=t.weekendInterval,u=t.practices,l=t.qualification,p=t.race,f=t.circuitUrl,d=t.raceUrl,h=t.racerStandings;return a.a.createElement(v.e,{className:"race-info-panel"},a.a.createElement(v.w,null,a.a.createElement(v.c,{xs:12},a.a.createElement(ve,{className:"race-info-panel__country-info",countryName:c,flagUrl:i,countryUrl:f}),a.a.createElement(be,{target:"_blank",href:d,className:"race-info-panel__grand-prix-title"},s))),a.a.createElement(v.w,null,a.a.createElement(v.c,{className:"race-info-panel__weekend-interval"},o)),a.a.createElement(v.w,{className:"justify-content-around section race-info-panel__weekend-schedule"},a.a.createElement(v.c,{className:"race-info-panel__practice-list",md:5},u.map(function(e){var t=e.title,r=e.day,n=e.timeInterval;return a.a.createElement(v.w,{className:"race-info-panel__stage-info",key:t.split(" ").join("_")},a.a.createElement(v.c,{xs:5},t),a.a.createElement(v.c,{xs:2},r.toUpperCase()),a.a.createElement(v.c,null,n))})),a.a.createElement(v.c,{className:"race-info-panel__race-description",md:5},a.a.createElement(v.w,{className:"race-info-panel__stage-info"},a.a.createElement(v.c,{xs:5},l.title),a.a.createElement(v.c,{xs:2},l.day.toUpperCase()),a.a.createElement(v.c,null,l.timeInterval)),a.a.createElement(v.w,{className:"race-info-panel__stage-info"},a.a.createElement(v.c,{xs:5},p.title),a.a.createElement(v.c,{xs:2},p.day.toUpperCase()),a.a.createElement(v.c,null,p.timeInterval)))),h.length>0&&a.a.createElement(je,{racers:h}),a.a.createElement(v.w,null,a.a.createElement(v.c,null,a.a.createElement(Te,{roundId:n}))),a.a.createElement("hr",{className:"race-info-panel__underscore"}),r&&a.a.createElement(v.w,null,a.a.createElement(v.c,null,a.a.createElement(v.l,{color:"muted"},r))))}}]),t}(a.a.Component));Ee.defaultProps={infoText:""};var Ne=Ee;function Me(e){return e.races.map(function(e){return a.a.createElement("section",{key:e.roundId,className:"section race-info-wrapper"},a.a.createElement(Ne,{raceInfo:e,infoText:Z}))})}var xe=function e(t){var r=t.season,n=void 0===r?"":r,a=t.isLoaded,i=void 0!==a&&a,c=t.weekends,s=void 0===c?[]:c;Object(y.a)(this,e),this.season=n,this.isLoaded=i,this.weekends=s};var Re=function(e){var t=e.season,r=e.onLoadSeasonData,n=t.season,i=t.isLoaded,c=t.weekends,s="\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u0435\u0437\u043e\u043d\u0430 ".concat(n);return a.a.createElement(ne,{key:n,season:n,isSeasonLoaded:i,seasonTitle:s,loadSeasonButtonCaption:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0441\u0435\u0437\u043e\u043d\u0430 ".concat(n),onLoadSeason:function(){r(n)}},a.a.createElement(Me,{races:c}))};function Ze(e){var t=e.weekend,r=e.isBetsAllowed;return a.a.createElement("section",{className:"section colors--very-light-red"},a.a.createElement(Ne,{raceInfo:t,commandButton:Te,infoText:r?"\u0421\u043f\u0435\u0448\u0438\u0442\u0435 \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043a\u0430 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 \u044d\u0442\u043e\u0442 \u044d\u0442\u0430\u043f \u0435\u0449\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f.":Z}))}var Ue,Ae,Ie,Pe,Be,De,Ce,We,qe,Le,He,Fe,ze,Ve,Ye,Ge,Je,Ke,$e=function(e){var t=e.seasonModel,r=e.nextWeekend,n=e.isBetsAllowed,i=e.currentSeasonRacesCount,c=t.season,s=t.weekends;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(Ze,{weekend:r,isBetsAllowed:n}),s.length>0&&s.length!==i&&a.a.createElement("section",{className:"section text-center"},"\u0420\u0430\u043d\u0435\u0435 \u0432 \u0441\u0435\u0437\u043e\u043d\u0435 ",c),s.length>0&&a.a.createElement(Me,{races:s}))},Qe=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isBetsAllowed,r=e.nextWeekend,n=e.seasons,i=void 0===n?[]:n,c=e.currentSeason,s=e.currentSeasonRacesCount,o=e.onLoadHistory;return a.a.createElement("div",{className:"home-page"},i.map(function(e){return c===e.season?a.a.createElement($e,{key:e.season,isBetsAllowed:t,nextWeekend:r,seasonModel:e,currentSeasonRacesCount:s}):a.a.createElement(Re,{key:e.season,season:e,onLoadSeasonData:o})}))}}]),t}(a.a.Component),Xe=(r(459),Object(u.inject)(function(e){var t=e.homePageStore,r=t.nextWeekend,n=t.isBetsAllowed,a=t.currentSeason,i=t.currentSeasonRacesCount;return{nextWeekend:r,isBetsAllowed:n,currentSeason:a,seasons:t.seasons,currentSeasonRacesCount:i,onLoadHistory:function(e){return t.loadSeasonHistory(e)}}})(Qe)),et=r(724),tt=r(63),rt=r(33),nt={LOGIN:"login",PASSWORD:"password"},at=Object(rt.a)({},nt,{NAME:"name"}),it=(Ue={},Object(tt.a)(Ue,nt.LOGIN,{name:nt.LOGIN,label:"\u041b\u043e\u0433\u0438\u043d",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, superman",rules:"required|string|alpha_num|between:2,15"}),Object(tt.a)(Ue,nt.PASSWORD,{name:nt.PASSWORD,label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, ******",rules:"required|string|alpha_num|between:5,15"}),Ue),ct=Object(rt.a)({},it,Object(tt.a)({},at.NAME,{name:at.NAME,label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, John Doe",rules:"required|string|between:3,25"})),st=Object(u.observer)(function(e){var t=e.form,r=t.$(nt.LOGIN),n=r.error,i=Boolean(n),c=t.$(nt.PASSWORD),s=c.error,o=Boolean(s);return a.a.createElement(v.i,null,a.a.createElement(v.k,null,a.a.createElement(v.n,{htmlFor:r.id},r.label),a.a.createElement(v.m,Object.assign({},r.bind(),{invalid:i,valid:r.isDirty&&!i})),a.a.createElement(v.j,{valid:!i},r.error)),a.a.createElement(v.k,null,a.a.createElement(v.n,{htmlFor:c.id},c.label),a.a.createElement(v.m,Object.assign({},c.bind({type:"password"}),{invalid:o,valid:c.isDirty&&!o})),a.a.createElement(v.j,{valid:!o},s)),a.a.createElement(v.b,{color:"primary",type:"submit",onClick:t.onSubmit,disabled:t.isEmpty||!t.isValid,style:{width:"100%"}},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))}),ot=Object(u.observer)(function(e){var t=e.form,r=t.$(at.NAME),n=r.error,i=Boolean(n),c=t.$(at.LOGIN),s=c.error,o=Boolean(s),u=t.$(at.PASSWORD),l=u.error,p=Boolean(l);return a.a.createElement(v.i,null,a.a.createElement(v.k,null,a.a.createElement(v.n,{htmlFor:r.id},r.label),a.a.createElement(v.m,Object.assign({},r.bind(),{invalid:i,valid:r.isDirty&&!i})),a.a.createElement(v.j,{valid:!i},n)),a.a.createElement(v.k,null,a.a.createElement(v.n,{htmlFor:c.id},c.label),a.a.createElement(v.m,Object.assign({},c.bind(),{invalid:o,valid:c.isDirty&&!o})),a.a.createElement(v.j,{valid:!o},s)),a.a.createElement(v.k,null,a.a.createElement(v.n,{htmlFor:u.id},u.label),a.a.createElement(v.m,Object.assign({},u.bind({type:"password"}),{invalid:p,valid:u.isDirty&&!p})),a.a.createElement(v.j,{valid:!p},l),a.a.createElement(v.l,{color:"muted"},"\u0412\u0410\u0416\u041d\u041e! \u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0412\u0430\u0448\u0438 \u043f\u0430\u0440\u043e\u043b\u0438 \u043e\u0442 \u0431\u0430\u043d\u043a\u043e\u0432\u043a\u0438\u0445 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u0430\u043a\u0430\u0443\u043d\u0442\u043e\u0432. ",a.a.createElement("br",null),"\u042d\u0442\u043e\u0442 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043a\u0430\u043a-\u0442\u043e \u043e\u0441\u043e\u0431\u043e \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u0435\u0433\u043e \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043b\u043e\u0443\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u0438\u043a\u0438. ",a.a.createElement("br",null),"\u041d\u0443, \u044f \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0434\u0438\u043b \u0435\u0441\u043b\u0438 \u0447\u0442\u043e :)")),a.a.createElement(Se.a,{type:"submit",disabled:t.isEmpty||!t.isValid,onClick:t.onSubmit,style:{width:"100%"}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))}),ut=(r(460),Object(u.inject)("loginPageStore")(Ae=Object(w.a)(Ae=Object(u.observer)(Ae=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).handleRegisterNew=function(){r.props.loginPageStore.toggleRegisterNewForm()},r}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.loginPageStore,t=e.isRegisterNew,r=e.isUserAuthenticated,n=e.form;return r?a.a.createElement(et.a,{to:this._redirectPath}):a.a.createElement(v.e,{tag:"section",className:"page"},a.a.createElement(v.w,null,a.a.createElement(v.c,{lg:{size:6,offset:3},md:{size:8,offset:2}},a.a.createElement(v.w,null,a.a.createElement(v.c,null,a.a.createElement("h1",{className:"page-title"},t?"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442":"\u0412\u0445\u043e\u0434 \u0432 F1 Bets App"),a.a.createElement("div",{className:"text-muted"},"\u0438\u043b\u0438",a.a.createElement(v.b,{color:"link",onClick:this.handleRegisterNew},t?" \u0432\u043e\u0439\u0442\u0438 \u0432 \u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442":" \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))),a.a.createElement(v.w,{className:"login-form-container"},a.a.createElement(v.c,null,t?a.a.createElement(ot,{form:n}):a.a.createElement(st,{form:n}))))))}},{key:"_redirectPath",get:function(){return(this.props.location.state||{from:{pathname:"/"}}).from}}]),t}(a.a.Component))||Ae)||Ae)||Ae),lt=Object(u.inject)("logoutPageStore")(Ie=Object(u.observer)(Ie=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.logoutPageStore.logout()}},{key:"render",value:function(){var e=this.props.logoutPageStore.isUserAuthenticated;return a.a.createElement(v.e,{className:"page"},a.a.createElement(v.w,null,e?a.a.createElement(v.c,null,"\u0418\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430..."):a.a.createElement(v.c,{lg:{size:6,offset:3},md:{size:8,offset:2}},a.a.createElement("div",null,"\u041c\u044b \u0431\u0443\u0434\u0435\u043c \u0441\u043a\u0443\u0447\u0430\u0442\u044c \u043f\u043e \u0442\u0435\u0431\u0435 :)"),a.a.createElement("div",null,a.a.createElement(M.a,{to:E.a.HOME},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")))))}}]),t}(a.a.Component))||Ie)||Ie,pt=r(722),ft=function(e){var t=e.component,r=e.isAuthenticated,n=void 0!==r&&r,i=e.isCurrentUserAdmin,c=void 0!==i&&i,s=e.isPrivate,o=void 0!==s&&s,u=e.onlyForAdmins,l=void 0!==u&&u,p=Object(de.a)(e,["component","isAuthenticated","isCurrentUserAdmin","isPrivate","onlyForAdmins"]);return a.a.createElement(pt.a,Object.assign({},p,{render:function(e){return l&&!c?a.a.createElement(et.a,{to:{pathname:E.a.HOME}}):o&&!n?a.a.createElement(et.a,{to:{pathname:E.a.LOGIN,state:{from:e.location}}}):a.a.createElement(t,p)}}))},dt=a.a.lazy(function(){return Promise.all([r.e(0),r.e(9)]).then(r.bind(null,769))}),ht=a.a.lazy(function(){return r.e(4).then(r.bind(null,766))}),mt=a.a.lazy(function(){return r.e(6).then(r.bind(null,770))}),bt=a.a.lazy(function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,765))}),vt=a.a.lazy(function(){return r.e(8).then(r.bind(null,768))}),yt=a.a.lazy(function(){return r.e(5).then(r.bind(null,767))}),Ot=a.a.lazy(function(){return r.e(10).then(r.bind(null,764))}),gt=[{exact:!0,path:E.a.HOME,component:Xe,id:Object(re.a)()},{path:E.a.LOGIN,component:ut,id:Object(re.a)()},{path:E.a.LOGOUT,component:lt,id:Object(re.a)()},{isPrivate:!0,path:E.a.BETS,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(dt,null))},id:Object(re.a)()},{isPrivate:!0,path:E.a.BETS_HISTORY,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(Ot,null))},id:Object(re.a)()},{path:E.a.RESULTS,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(ht,null))},id:Object(re.a)()},{path:E.a.RACERS,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(vt,null))},id:Object(re.a)()},{path:E.a.TEAMS,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(mt,null))},id:Object(re.a)()},{path:E.a.CALENDAR,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(yt,null))},id:Object(re.a)()},{isPrivate:!0,onlyForAdmins:!0,path:E.a.ADMIN,component:function(){return a.a.createElement(n.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(bt,null))},id:Object(re.a)()}],jt=(r(461),function(){return a.a.createElement("div",{className:"loader__overlay"},a.a.createElement("div",{className:"loader"},a.a.createElement("div",{className:"loader__plate loader__plate--first"}),a.a.createElement("div",{className:"loader__plate loader__plate--second"}),a.a.createElement("div",{className:"loader__plate loader__plate--third"})))}),_t=r(389),wt=r.n(_t),kt=Object(u.inject)(function(e){return{pendingTasksCount:e.appStore._appModel._operationManager.pendingTasksCount,qualificationStartTime:e.appStore.nextRace&&e.appStore.nextRace.qualifyingStartTime,isBetsAllowed:e.appStore.isBetsAllowed,currentTime:e.appStore.currentTime}})(function(e){var t=e.pendingTasksCount,r=e.qualificationStartTime,n=e.isBetsAllowed,i=e.currentTime;return a.a.createElement(v.e,{className:"text-center bg-secondary"},a.a.createElement(v.w,null,a.a.createElement(v.c,null,"DEVELOPMENT MODE ON!!!"),a.a.createElement(v.c,{className:n?"bg-success":"bg-warning"},"Is Bets Allowed: ",n.toString()),a.a.createElement(v.c,null,t),a.a.createElement(v.c,null,"Qualification start Time: ",Object(ie.d)(r)),a.a.createElement(v.c,null,"Current Time: ",Object(ie.e)(i))))}),St=(r(462),Object(u.observer)((Be=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Object(g.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a))),Object(k.a)(r,"isVisible",De,Object(S.a)(Object(S.a)(r))),r.toggle=Object(o.action)(function(){r.isVisible=!r.isVisible}),r}return Object(_.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.isVisible?a.a.createElement("div",{className:"dev-tools"},a.a.createElement("div",{className:"dev-tools__tools"},a.a.createElement(kt,null)),a.a.createElement(v.b,{color:"danger",size:"sm",className:"dev-tools__close-button",onClick:this.toggle},"x")):a.a.createElement("div",{title:"Open dev tools",className:"dev-tools--collapsed-mode",onClick:this.toggle},"open"),a.a.createElement(wt.a,null))}}]),t}(n.Component),De=Object(T.a)(Be.prototype,"isVisible",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=Be))||Pe),Tt=Object(u.inject)("appStore")(Ce=Object(w.a)(Ce=Object(u.observer)(Ce=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.appStore.startTimeWatcher()}},{key:"componentWillUnmount",value:function(){this.props.appStore.stopTimeWatcher()}},{key:"render",value:function(){var e=this.props.appStore,t=e.hasPendingTasks,r=e.isUserAuthenticated,n=e.isUserAdmin,i=e.isProduction;return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(jt,null),a.a.createElement("div",{className:"layout"},!i&&a.a.createElement(St,null),a.a.createElement(G,{className:"layout__header"}),a.a.createElement("main",{className:"layout__main colors--very-light-grey"},gt.map(function(e){return a.a.createElement(ft,Object.assign({key:e.id,isAuthenticated:r,isCurrentUserAdmin:n},e))})),a.a.createElement(te,{className:"layout__footer"})))}}]),t}(n.Component))||Ce)||Ce)||Ce,Et=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"startTimeWatcher",value:function(){this._appModel.timeWatcher.start()}},{key:"stopTimeWatcher",value:function(){this._appModel.timeWatcher.stop()}},{key:"isProduction",get:function(){return this._appModel.isProduction}},{key:"currentTime",get:function(){return this._appModel.timeWatcher.currentTime}},{key:"isBetsAllowed",get:function(){return this._appModel.isBetsAllowed}},{key:"hasPendingTasks",get:function(){return this._appModel.operationManager.hasPendingTasks}},{key:"authenticatedUser",get:function(){return this._appModel.session.authenticatedUser}},{key:"isUserAuthenticated",get:function(){return this._appModel.isUserAuthenticated}},{key:"isUserAlreadyBet",get:function(){return this._appModel.isUserAlreadyBet}},{key:"isUserAdmin",get:function(){return this._appModel.isUserAdmin}}]),e}(),Nt=(We=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"loadSeasonHistory",value:function(e){this._appModel.loadSeasonData(e)}},{key:"_mapRacesToWeekendsModel",value:function(e,t){if(e.length>0){var r=this._appModel.formulaOneHistory.getRacesResults(t);return e.map(function(e,t){var n=new fe(e);if(r.length>0&&t<r.length){var a=r[t].racersStandings.map(function(e){return new Oe(e)});return n.addRacerStandings(a)}return n})}return[]}},{key:"isAuthenticated",get:function(){return this._appModel.isUserAuthenticated}},{key:"isUserAlreadyBet",get:function(){return this._appModel.isUserAlreadyBet}},{key:"isBetsAllowed",get:function(){return this._appModel.isBetsAllowed}},{key:"currentSeason",get:function(){return this._appModel.currentSeason}},{key:"currentSeasonRacesCount",get:function(){return this._appModel.currentSeasonHistory.races.length}},{key:"nextWeekend",get:function(){var e=this._appModel.nextRace;return e?new fe(e):null}},{key:"seasons",get:function(){var e=this;return this._appModel.formulaOneHistory.historiesBySeason.map(function(t){var r=t.season,n=t.isLoaded,a=t.races,i=e._mapRacesToWeekendsModel(r===e.currentSeason?a.filter(function(t){return e.nextWeekend&&e.nextWeekend.raceStartTime!==t.raceStartTime&&!se(t.raceStartTime,e.nextWeekend.raceStartTime)}):a,r);return new xe({season:r,isLoaded:n,weekends:i})})}}]),e}(),Object(T.a)(We.prototype,"currentSeasonRacesCount",[o.computed],Object.getOwnPropertyDescriptor(We.prototype,"currentSeasonRacesCount"),We.prototype),Object(T.a)(We.prototype,"nextWeekend",[o.computed],Object.getOwnPropertyDescriptor(We.prototype,"nextWeekend"),We.prototype),Object(T.a)(We.prototype,"seasons",[o.computed],Object.getOwnPropertyDescriptor(We.prototype,"seasons"),We.prototype),We),Mt=r(3),xt=r.n(Mt),Rt=r(10),Zt=(qe=function(){function e(t,r,n){var a=this;Object(y.a)(this,e),Object(k.a)(this,"isRaceResultsPanelVisible",Le,this),Object(k.a)(this,"selectedRace",He,this),this.addNewBet=function(e){return a._appModel.addNewBet(e)},this._appModel=t,this._storeApiUrl=r,this._racesInfoService=n}return Object(O.a)(e,[{key:"showRaceResultsPanel",value:function(){this.isRaceResultsPanelVisible=!0}},{key:"addOrUpdateRaceResults",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedRace){e.next=3;break}return window.alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u043d\u043a\u0443!"),e.abrupt("return");case 3:if(!(Object.values(t).filter(function(e){return Boolean(e)}).length<10)){e.next=6;break}return window.alert("\u041d\u0435 \u0432\u0441\u0435 \u0433\u043e\u043d\u0448\u0438\u043a\u0438 \u0432\u044b\u0431\u0440\u0430\u043d\u044b!"),e.abrupt("return");case 6:return e.next=8,this._appModel.operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._racesInfoService.updateRaceResult(r.selectedRace.roundId,t);case 2:r.isRaceResultsPanelVisible=!1;case 3:case"end":return e.stop()}},e,this)})));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"users",get:function(){return this._appModel.usersModel.users}},{key:"races",get:function(){return this._appModel.currentSeasonHistory.races}},{key:"racers",get:function(){return this._appModel.currentSeasonHistory.racers}},{key:"storeApiUrl",get:function(){return this._storeApiUrl}}]),e}(),Le=Object(T.a)(qe.prototype,"isRaceResultsPanelVisible",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),He=Object(T.a)(qe.prototype,"selectedRace",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(T.a)(qe.prototype,"users",[o.computed],Object.getOwnPropertyDescriptor(qe.prototype,"users"),qe.prototype),Object(T.a)(qe.prototype,"races",[o.computed],Object.getOwnPropertyDescriptor(qe.prototype,"races"),qe.prototype),Object(T.a)(qe.prototype,"racers",[o.computed],Object.getOwnPropertyDescriptor(qe.prototype,"racers"),qe.prototype),Object(T.a)(qe.prototype,"showRaceResultsPanel",[o.action],Object.getOwnPropertyDescriptor(qe.prototype,"showRaceResultsPanel"),qe.prototype),Object(T.a)(qe.prototype,"addOrUpdateRaceResults",[o.action],Object.getOwnPropertyDescriptor(qe.prototype,"addOrUpdateRaceResults"),qe.prototype),qe),Ut=(Fe=function(){function e(t,r){var n=this;Object(y.a)(this,e),Object(k.a)(this,"isUserFormVisible",ze,this),Object(k.a)(this,"userForEdit",Ve,this),this.deleteUser=function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?")){e.next=3;break}return e.next=3,n._appModel.usersModel.deleteUser(t);case 3:return e.next=5,n._appModel.usersModel.fetchUsers();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this._appModel=t,this._storeApiUrl=r,this._appModel.usersModel.fetchUsers()}return Object(O.a)(e,[{key:"toggleUserForm",value:function(e){this.isUserFormVisible=e}},{key:"setUserForEdit",value:function(e){this.userForEdit=e,this.toggleUserForm(!0)}},{key:"addOrUpdate",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",this._appModel.operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._appModel.usersModel.addOrUpdate(t);case 2:return r.userForEdit=null,r.toggleUserForm(!1),e.next=6,r._appModel.usersModel.fetchUsers();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"users",get:function(){return this._appModel.usersModel.users}},{key:"storeApiUrl",get:function(){return this._storeApiUrl}}]),e}(),ze=Object(T.a)(Fe.prototype,"isUserFormVisible",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ve=Object(T.a)(Fe.prototype,"userForEdit",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(T.a)(Fe.prototype,"users",[o.computed],Object.getOwnPropertyDescriptor(Fe.prototype,"users"),Fe.prototype),Object(T.a)(Fe.prototype,"toggleUserForm",[o.action],Object.getOwnPropertyDescriptor(Fe.prototype,"toggleUserForm"),Fe.prototype),Object(T.a)(Fe.prototype,"setUserForEdit",[o.action],Object.getOwnPropertyDescriptor(Fe.prototype,"setUserForEdit"),Fe.prototype),Object(T.a)(Fe.prototype,"addOrUpdate",[o.action],Object.getOwnPropertyDescriptor(Fe.prototype,"addOrUpdate"),Fe.prototype),Fe),At=function(){function e(t,r){Object(y.a)(this,e);var n=b.getRaceStoreApiUrl(),a=b.getUserStoreApiUrl();this._racesSectionStore=new Zt(t,n,r),this._usersSectionStore=new Ut(t,a)}return Object(O.a)(e,[{key:"racesSectionStore",get:function(){return this._racesSectionStore}},{key:"usersSectionStore",get:function(){return this._usersSectionStore}}]),e}(),It=(Ye=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"submitBet",value:function(e){return this._appModel.addNewBet(e)}},{key:"racers",get:function(){return this._appModel.currentSeasonHistory.racers}},{key:"currentUser",get:function(){return this._appModel.session.authenticatedUser}},{key:"nextRaceTitle",get:function(){return this._appModel.nextRace?this._appModel.nextRace.prettyTitle:""}},{key:"usersBet",get:function(){var e=this;if(!this._appModel.isUserAlreadyBet)return{};var t=this._appModel.nextRace.bets.find(function(t){return t.userInfo.id===e.currentUser.id});return t?t.betsMap:{}}},{key:"isBetsAllowed",get:function(){return this._appModel.isBetsAllowed}}]),e}(),Object(T.a)(Ye.prototype,"currentUser",[o.computed],Object.getOwnPropertyDescriptor(Ye.prototype,"currentUser"),Ye.prototype),Object(T.a)(Ye.prototype,"nextRaceTitle",[o.computed],Object.getOwnPropertyDescriptor(Ye.prototype,"nextRaceTitle"),Ye.prototype),Object(T.a)(Ye.prototype,"usersBet",[o.computed],Object.getOwnPropertyDescriptor(Ye.prototype,"usersBet"),Ye.prototype),Ye),Pt=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"userBets",get:function(){return this._appModel.authUserBets}}]),e}(),Bt=r(198),Dt=(Ge=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"races",get:function(){return this._appModel.currentSeasonHistory.rounds.map(function(e){var t=e.raceName,r=e.roundSchedule,n=e.roundId;return new Bt.a({raceName:t,raceTime:r.race,qualTime:r.qualification,practice1Time:r.practices[0],practice2Time:r.practices[1],practice3Time:r.practices[2],id:n})})}},{key:"nextRace",get:function(){if(!this._appModel.nextRace)return null;var e=this._appModel.nextRace;return this.races.find(function(t){return t.raceId===e.roundId})}},{key:"isRaceWeekend",get:function(){return!this._appModel.isBetsAllowed}},{key:"currentSeason",get:function(){return this._appModel.currentSeason}}]),e}(),Object(T.a)(Ge.prototype,"races",[o.computed],Object.getOwnPropertyDescriptor(Ge.prototype,"races"),Ge.prototype),Object(T.a)(Ge.prototype,"nextRace",[o.computed],Object.getOwnPropertyDescriptor(Ge.prototype,"nextRace"),Ge.prototype),Object(T.a)(Ge.prototype,"isRaceWeekend",[o.computed],Object.getOwnPropertyDescriptor(Ge.prototype,"isRaceWeekend"),Ge.prototype),Ge),Ct=r(390),Wt=r.n(Ct),qt=r(391),Lt=r.n(qt),Ht=function(e){e.invalidate("This is a generic error message!")},Ft=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ht;return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).call(this,{fields:e},{options:{showErrorsOnChange:!0,validateOnChange:!0},plugins:{dvr:Lt.a},hooks:{onSuccess:r,onError:n}}))}return Object(_.a)(t,e),t}(Wt.a),zt=(Je=function(){function e(t){var r=this;Object(y.a)(this,e),Object(k.a)(this,"isRegisterNew",Ke,this),this._appModel=t,this._loginForm=new Ft(it,function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._appModel.session.login(t.values());case 2:if(!0===(n=e.sent)){e.next=6;break}return alert(n),e.abrupt("return");case 6:t.clear();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this._registerNewAccountForm=new Ft(ct,function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._appModel.session.signIn(t.values());case 2:if(!0===(n=e.sent)){e.next=6;break}return alert(n),e.abrupt("return");case 6:t.clear();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}return Object(O.a)(e,[{key:"toggleRegisterNewForm",value:function(){this.isRegisterNew=!this.isRegisterNew}},{key:"login",value:function(e){var t=e.login,r=e.password;return this._appModel.session.login({login:t,password:r})}},{key:"signIn",value:function(e){var t=e.name,r=e.login,n=e.password;return this._appModel.session.signIn({name:t,login:r,password:n})}},{key:"isUserAuthenticated",get:function(){return this._appModel.session.isAuthenticated}},{key:"form",get:function(){return this.isRegisterNew?this._registerNewAccountForm:this._loginForm}}]),e}(),Ke=Object(T.a)(Je.prototype,"isRegisterNew",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(T.a)(Je.prototype,"form",[o.computed],Object.getOwnPropertyDescriptor(Je.prototype,"form"),Je.prototype),Object(T.a)(Je.prototype,"toggleRegisterNewForm",[o.action],Object.getOwnPropertyDescriptor(Je.prototype,"toggleRegisterNewForm"),Je.prototype),Je),Vt=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"logout",value:function(){return this._appModel.session.logout()}},{key:"isUserAuthenticated",get:function(){return this._appModel.session.isAuthenticated}}]),e}(),Yt=r(45),Gt=r(107),Jt=r.n(Gt);function Kt(e){return $t.apply(this,arguments)}function $t(){return($t=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt.a.get(t);case 3:return e.abrupt("return",e.sent.data.MRData);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function Qt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(Rt.a)(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kt("".concat(t,"?limit=0"));case 3:return r=e.sent.total,e.abrupt("return",Kt("".concat(t,"?limit=").concat(r)));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}var er,tr,rr,nr,ar,ir=function e(t){Object(y.a)(this,e);var r=t.locality,n=t.country,a=t.lat,i=t.long,c=t.alt;this.locality=r,this.country=n,this.lat=a,this.long=i,this.alt=c},cr=function e(t){Object(y.a)(this,e);var r=t.circuitId,n=t.url,a=t.circuitName;this.circuitId=r,this.url=n,this.circuitName=a,this.location=new ir(t.Location)},sr=function e(t){var r=t.season;Object(y.a)(this,e),this.season=r},or=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).round=e.round,r.url=e.url,r.raceName=e.raceName,r.date=e.date,r.time=e.time,r.circuit=new cr(e.Circuit),r}return Object(_.a)(t,e),t}(sr),ur=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).races=e.Races.map(function(e){return new or(e)}),r}return Object(_.a)(t,e),t}(sr),lr=function e(t){var r=t.constructorId,n=t.url,a=t.name,i=t.nationality;Object(y.a)(this,e),this.constructorId=r,this.url=n,this.name=a,this.nationality=i},pr=function e(t){var r=t.driverId,n=t.url,a=t.permanentNumber,i=t.givenName,c=t.familyName,s=t.dateOfBirth,o=t.code,u=t.nationality;Object(y.a)(this,e),this.driverId=r,this.url=n,this.permanentNumber=a,this.givenName=i,this.familyName=c,this.dateOfBirth=s,this.code=o,this.nationality=u},fr=function e(t){Object(y.a)(this,e),this.rank=t.rank,this.lap=t.lap,this.time=t.Time,this.averageSpeed=t.AverageSpeed},dr=function e(t){Object(y.a)(this,e);var r=t.number,n=t.position,a=t.points,i=t.grid,c=t.laps,s=t.status,o=t.Time;this.number=r,this.position=n,this.points=a,this.driver=new pr(t.Driver),this.constructor=new lr(t.Constructor),this.grid=i,this.laps=c,this.status=s,this.time=Object(rt.a)({},o),this.fastestLap=t.FastestLap?new fr(t.FastestLap):void 0},hr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).results=e.Results.map(function(e){return new dr(e)}),r}return Object(_.a)(t,e),t}(or),mr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).races=e.Races.map(function(e){return new hr(e)}),r}return Object(_.a)(t,e),t}(ur),br=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).standingsLists=e.StandingsLists.map(function(e){return e}),r}return Object(_.a)(t,e),t}(sr),vr=function(e){function t(e){var r,n=e.season,a=e.round;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,{season:n}))).round=a,r}return Object(_.a)(t,e),t}(sr),yr=function e(t){var r=t.position,n=t.positionText,a=t.points,i=t.wins;Object(y.a)(this,e),this.position=r,this.positionText=n,this.points=a,this.wins=i},Or=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).driver=new pr(e.Driver),r.constructors=e.Constructors.map(function(e){return new lr(e)}),r}return Object(_.a)(t,e),t}(yr),gr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).driverStandings=e.DriverStandings.map(function(e){return new Or(e)}),r}return Object(_.a)(t,e),t}(vr),jr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).standingsLists=e.StandingsLists.map(function(e){return new gr(e)}),r}return Object(_.a)(t,e),t}(br),_r=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).constructor=new lr(e.Constructor),r}return Object(_.a)(t,e),t}(yr),wr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).constructorStandings=e.ConstructorStandings.map(function(e){return new _r(e)}),r}return Object(_.a)(t,e),t}(vr),kr=function(e){function t(e){var r,n=e.season,a=e.StandingsLists;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,{season:n,StandingsLists:a}))).standingsLists=a.map(function(e){return new wr(e)}),r}return Object(_.a)(t,e),t}(br),Sr=function(e){function t(e){var r;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,e))).drivers=e.Drivers.map(function(e){return new pr(e)}),r}return Object(_.a)(t,e),t}(sr),Tr=function(){function e(){Object(y.a)(this,e)}return Object(O.a)(e,null,[{key:"_createJsonUrl",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"".concat("https://ergast.com/api/f1","/").concat(t.filter(function(e){return Boolean(e)}).join("/"),".json")}},{key:"getDriverStandings",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(r){var n;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kt(e._createJsonUrl(r,"driverStandings"));case 2:return n=t.sent,t.abrupt("return",new jr(n.StandingsTable));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getConstructorStandings",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(r){var n;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kt(e._createJsonUrl(r,"constructorStandings"));case 2:return n=t.sent,t.abrupt("return",new kr(n.StandingsTable));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getRaceSchedule",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(){var r,n,a,i=arguments;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:"2018",n=i.length>1&&void 0!==i[1]?i[1]:"all",t.next=4,Kt(e._createJsonUrl(r,"all"!==n?n:void 0));case 4:return a=t.sent,t.abrupt("return",new ur(a.RaceTable));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getRaceResults",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(r){var n,a,i=arguments;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"2018",t.next=3,Kt(e._createJsonUrl(n,r,"results"));case 3:return a=t.sent,t.abrupt("return",new mr(a.RaceTable));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getAllRacesResults",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(){var r,n,a=arguments;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:"2018",t.next=3,Qt(e._createJsonUrl(r,"results"));case 3:return n=t.sent,t.abrupt("return",new mr(n.RaceTable));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getDrivers",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(){var r,n,a=arguments;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:"2018",t.next=3,Kt(e._createJsonUrl(r,"drivers"));case 3:return n=t.sent,t.abrupt("return",new Sr(n.DriverTable));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(),Er=r(199),Nr=(er=function(){function e(t){var r=this;Object(y.a)(this,e),Object(k.a)(this,"racerStandingList",tr,this),this.loadRacerStandings=function(){return r._appModel.operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){var t,n,a,i;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.getDriverStandings(r.currentSeason);case 2:t=e.sent,n=Object(Yt.a)(t.standingsLists,1),(a=n[0])&&(i=a.driverStandings.map(function(e){var t=e.driver,r=Object(Yt.a)(e.constructors,1)[0];return new Er.a({pos:e.position,racerFullName:"".concat(t.givenName," ").concat(t.familyName),racerPoints:e.points,racerId:t.code,racerNumber:t.permanentNumber,racerUrl:t.url,constructorName:r?r.name:"",constructorUrl:r?r.url:"",racerNationality:t.nationality})}),Object(o.runInAction)(function(){r.racerStandingList=i}));case 5:case"end":return e.stop()}},e,this)})))},this._appModel=t}return Object(O.a)(e,[{key:"currentSeason",get:function(){return this._appModel.currentSeason}}]),e}(),tr=Object(T.a)(er.prototype,"racerStandingList",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),er),Mr=r(73),xr=r(88),Rr=r.n(xr),Zr=r(350),Ur=r(351),Ar=(rr=function(){function e(t){Object(y.a)(this,e),this._appModel=t}return Object(O.a)(e,[{key:"authenticatedUser",get:function(){return this._appModel.session.authenticatedUser}},{key:"raceResultsWithBets",get:function(){var e=this._appModel.currentSeasonHistory,t=e.racesResults;return e.races.map(function(e,r){return new Zr.a({race:e,finishedRacers:r<t.length?t[r].racersStandings:void 0})})}},{key:"userStandingsByRound",get:function(){return this.raceResultsWithBets.filter(function(e){return e.hasOfficialResults}).map(function(e){return e.userVotes}).map(function(e,t){return{title:"gp"+(t+1),userStandings:e.map(function(e){return new Ur.a({userId:e.id,userName:e.name,totalPoints:e.userScore.value})})}})}},{key:"userStandings",get:function(){var e=Array.from(this.userStandingsByRound.reduce(function(e,t){return t.userStandings.forEach(function(t){e.set(t.userId,[].concat(Object(Mr.a)(e.get(t.userId)||[]),[t]))}),e},new Map([])).values()).map(function(e){var t=Rr()(e,function(e){return e.totalPoints});return t.slice(Math.max(t.length-7,0))}),t=new Map([]);return e.forEach(function(e){e.forEach(function(e){if(t.has(e.userId)){var r=e;r.totalPoints+=t.get(e.userId).totalPoints,t.set(e.userId,r)}else t.set(e.userId,e)})}),Array.from(t.values())}}]),e}(),Object(T.a)(rr.prototype,"authenticatedUser",[o.computed],Object.getOwnPropertyDescriptor(rr.prototype,"authenticatedUser"),rr.prototype),Object(T.a)(rr.prototype,"raceResultsWithBets",[o.computed],Object.getOwnPropertyDescriptor(rr.prototype,"raceResultsWithBets"),rr.prototype),Object(T.a)(rr.prototype,"userStandingsByRound",[o.computed],Object.getOwnPropertyDescriptor(rr.prototype,"userStandingsByRound"),rr.prototype),Object(T.a)(rr.prototype,"userStandings",[o.computed],Object.getOwnPropertyDescriptor(rr.prototype,"userStandings"),rr.prototype),rr),Ir=r(200),Pr=(nr=function(){function e(t){var r=this;Object(y.a)(this,e),Object(k.a)(this,"teamsStandingList",ar,this),this.fetchStandings=function(){return r._appModel.operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){var t,n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.getConstructorStandings(r.currentSeason);case 2:t=e.sent,(n=t.standingsLists[0])&&Object(o.runInAction)(function(){r.teamsStandingList=n.constructorStandings.map(function(e){var t=e.constructor;return new Ir.a({pos:e.position,name:t.name,id:t.constructorId,points:e.points,url:t.url,nationality:t.nationality})})});case 5:case"end":return e.stop()}},e,this)})))},this._appModel=t}return Object(O.a)(e,[{key:"currentSeason",get:function(){return this._appModel.currentSeason}}]),e}(),ar=Object(T.a)(nr.prototype,"teamsStandingList",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nr);function Br(e){var t=new Et(e),r=new Y(e),n=function(e){return{homePageStore:new Nt(e),resultsPageStore:new Ar(e),racerStandingsPageStore:new Nr(e),teamsStandingsPageStore:new Pr(e),adminPageStore:new At(e,e.services.racesInfoService),loginPageStore:new zt(e),logoutPageStore:new Vt(e),calendarPageStore:new Dt(e),userBetsHistoryPageStore:new Pt(e),betPageStore:new It(e)}}(e);return Object(rt.a)({},n,{appStore:t,headerStore:r})}var Dr=function(){function e(t){var r=t.userStoreApiUrl;Object(y.a)(this,e),this._apiUrl=r}return Object(O.a)(e,[{key:"fetchAll",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.B.get(this._apiUrl);case 2:return e.t0=N.a.fromJs,e.abrupt("return",e.sent.map(e.t0));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAll();case 2:if(e.t0=function(e){return e.id===t},r=e.sent.find(e.t0)){e.next=6;break}throw new Error("User can't be found!");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"findById",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findBy(function(e){return e.id===t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"findBy",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAll();case 2:if(e.t0=t,r=e.sent.find(e.t0)){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdate",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof N.a){e.next=2;break}throw new Error("variable user must be instanceof class User");case 2:return e.next=4,this.fetchAll();case 4:return r=e.sent,(n=r.findIndex(function(e){return e.id===t.id}))>-1?r[n]=t:r.push(t),e.abrupt("return",v.B.put(this._apiUrl,r));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fetchAll();case 4:return r=e.sent,e.abrupt("return",v.B.put(this._apiUrl,r.filter(function(e){return e.id!==t})));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Cr=function(e){function t(e){var r,n=e.season,a=e.raceName,i=e.bets,c=void 0===i?[]:i,s=e.raceResults,o=void 0===s?{}:s;return Object(y.a)(this,t),(r=Object(g.a)(this,Object(j.a)(t).call(this,{season:n,raceName:a}))).bets=c,r.raceResults=o,r}return Object(_.a)(t,e),t}(r(143).a),Wr=function(){function e(t){var r=t.raceInfoStoreApiUrl;Object(y.a)(this,e),this._apiUrl=r}return Object(O.a)(e,[{key:"fetchAll",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.B.get(this._apiUrl);case 2:return e.t0=function(e){return new Cr(e)},e.abrupt("return",e.sent.map(e.t0));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveAll",value:function(e){return v.B.put(this._apiUrl,e)}},{key:"addOrUpdateBet",value:function(){var t=Object(Rt.a)(xt.a.mark(function t(r,n){var a,i;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchAll();case 2:return a=t.sent,i=[],i=a.some(function(e){return e.roundId===n.roundId})?a.map(function(t){if(t.roundId===n.roundId){var a=t.bets.findIndex(function(e){return e.userInfo.id===r.userInfo.id});return a>-1?e._updateBet(t,r,a):e._addBet(t,r)}return t}):[].concat(Object(Mr.a)(a),[new Cr(Object(rt.a)({},n,{bets:[r]}))]),t.abrupt("return",this.saveAll(i));case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"updateRaceResult",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t,r){var n,a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAll();case 2:return n=e.sent,(a=n.findIndex(function(e){return e.roundId===t}))>-1&&(n[a].raceResults=Object(rt.a)({},n[a].raceResults,r)),e.abrupt("return",this.saveAll(n));case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"_addBet",value:function(e,t){return e.bets.push(t),e}},{key:"_updateBet",value:function(e,t,r){return e.bets[r]=t,e}}]),e}(),qr=function(){function e(t){var r=t.localStorageUserKey,n=t.userService,a=t.cryptoService;Object(y.a)(this,e),this._localStorageUserKey=r,this._userService=n,this._cryptoService=a}return Object(O.a)(e,[{key:"authenticate",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(){var t,r,n,a=arguments;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,r=null,t){e.next=8;break}if(r=window.localStorage.getItem(this._localStorageUserKey)){e.next=6;break}return e.abrupt("return",null);case 6:e.next=9;break;case 8:r=t.id;case 9:return e.next=11,this._userService.findById(r);case 11:if(!(n=e.sent)){e.next=15;break}return this._authenticate(n),e.abrupt("return",n);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.login,n=t.password,e.next=3,this._userService.findBy(function(e){return e.login===r});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0435\u043c \u043d\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.");case 6:if(!this._cryptoService.isPasswordValid(n,a.password)){e.next=10;break}if(!this._authenticate(a)){e.next=9;break}return e.abrupt("return",a);case 9:return e.abrupt("return",!1);case 10:return e.abrupt("return","\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c.");case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){window.localStorage.removeItem(this._localStorageUserKey)}},{key:"signIn",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a,i;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.login,n=t.name,a=t.password,i=new N.a({login:r,name:n,password:this._cryptoService.encodePassword(a)}),e.next=4,this._userService.findBy(function(e){return e.login===i.login});case 4:if(!e.sent){e.next=7;break}return e.abrupt("return","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d.");case 7:return e.prev=7,e.next=10,this._userService.addOrUpdate(i);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(7),e.abrupt("return","Server Error. Cannot add or update user");case 15:if(!this._authenticate(i)){e.next=17;break}return e.abrupt("return",i);case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_authenticate",value:function(e){var t=e.id;return!!t&&(window.localStorage.setItem(this._localStorageUserKey,t),!0)}}]),e}(),Lr=r(196),Hr=r.n(Lr);var Fr={encodePassword:function(e){return Hr.a.hashSync(e,8)},isPasswordValid:function(e,t){return Hr.a.compareSync(e,t)}},zr=r(144);function Vr(e,t){var r={season:e.season,raceName:e.raceName,raceUrl:e.url,circuit:{url:e.circuit.url,countryName:e.circuit.location.country,circuitName:e.circuit.circuitName,circuitId:e.circuit.circuitId}},n=t.find(function(t){return t.round===Number(e.round)});return n&&(r.roundSchedule={practices:[n.practice_1,n.practice_2,n.practice_3],qualification:n.qualification,race:n.race}),new zr.a(r)}var Yr=function e(t){var r=t.season,n=t.round,a=t.racersStandings;Object(y.a)(this,e),this.season=r,this.round=Number(n),this.racersStandings=a};function Gr(e){var t=e.season,r=e.round,n=e.results;return new Yr({season:t,round:r,racersStandings:n.map(function(e){return t=e.driver,r=e.points,new ye.a(t.givenName,t.familyName,t.permanentNumber,t.code,r,t.nationality,t.dateOfBirth);var t,r})})}var Jr,Kr,$r,Qr=function(){function e(t){var r=t.formulaOneOfficialDataRepository;Object(y.a)(this,e),this._repository=r}return Object(O.a)(e,[{key:"fetchSeasonRounds",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.getF1Calendar(t);case 2:return r=e.sent,e.next=5,this._repository.getRaceSchedule(t);case 5:return n=e.sent,e.abrupt("return",n.races.map(function(e){return Vr(e,r)}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRacesResults",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.getRacesResults(t);case 2:return r=e.sent,e.abrupt("return",r.races.map(function(e){return Gr(e)}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRacers",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.getDrivers(t);case 2:return r=e.sent,n=Object(Yt.a)(r,1),a=n[0],e.abrupt("return",a.driverStandings.map(function(e){var t=e.driver;return ye.a.create(Object(rt.a)({},t,{firstName:t.givenName,lastName:t.familyName,abbreviation:t.code,number:t.permanentNumber}))}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xr=function e(t){var r=t.round,n=t.practice_1,a=t.practice_2,i=t.practice_3,c=t.qualification,s=t.race;Object(y.a)(this,e),this.round=r,this.practice_1=n,this.practice_2=a,this.practice_3=i,this.qualification=c,this.race=s},en=new Map([["2018",[new Xr({round:1,practice_1:"20180323T010000Z",practice_2:"20180323T050000Z",practice_3:"20180324T030000Z",qualification:"20180324T060000Z",race:"20180325T051000Z"}),new Xr({round:2,practice_1:"20180406T110000Z",practice_2:"20180406T150000Z",practice_3:"20180407T120000Z",qualification:"20180407T150000Z",race:"20180408T151000Z"}),new Xr({round:3,practice_1:"20180413T020000Z",practice_2:"20180413T060000Z",practice_3:"20180414T030000Z",qualification:"20180414T060000Z",race:"20180415T061000Z"}),new Xr({round:4,practice_1:"20180427T090000Z",practice_2:"20180427T130000Z",practice_3:"20180428T100000Z",qualification:"20180428T130000Z",race:"20180429T121000Z"}),new Xr({round:5,practice_1:"20180511T090000Z",practice_2:"20180511T130000Z",practice_3:"20180512T100000Z",qualification:"20180512T130000Z",race:"20180513T131000Z"}),new Xr({round:6,practice_1:"20180524T090000Z",practice_2:"20180524T130000Z",practice_3:"20180526T100000Z",qualification:"20180526T130000Z",race:"20180527T131000Z"}),new Xr({round:7,practice_1:"20180608T140000Z",practice_2:"20180608T180000Z",practice_3:"20180609T150000Z",qualification:"20180609T180000Z",race:"20180610T181000Z"}),new Xr({round:8,practice_1:"20180622T100000Z",practice_2:"20180622T140000Z",practice_3:"20180623T110000Z",qualification:"20180623T140000Z",race:"20180624T141000Z"}),new Xr({round:9,practice_1:"20180629T090000Z",practice_2:"20180629T130000Z",practice_3:"20180630T100000Z",qualification:"20180630T130000Z",race:"20180701T131000Z"}),new Xr({round:10,practice_1:"20180706T090000Z",practice_2:"20180706T130000Z",practice_3:"20180707T100000Z",qualification:"20180707T130000Z",race:"20180708T131000Z"}),new Xr({round:11,practice_1:"20180720T090000Z",practice_2:"20180720T130000Z",practice_3:"20180721T100000Z",qualification:"20180721T130000Z",race:"20180722T131000Z"}),new Xr({round:12,practice_1:"20180727T090000Z",practice_2:"20180727T130000Z",practice_3:"20180728T100000Z",qualification:"20180728T130000Z",race:"20180729T131000Z"}),new Xr({round:13,practice_1:"20180824T090000Z",practice_2:"20180824T130000Z",practice_3:"20180825T100000Z",qualification:"20180825T130000Z",race:"20180826T131000Z"}),new Xr({round:14,practice_1:"20180831T090000Z",practice_2:"20180831T130000Z",practice_3:"20180901T100000Z",qualification:"20180901T130000Z",race:"20180902T131000Z"}),new Xr({round:15,practice_1:"20180914T083000Z",practice_2:"20180914T123000Z",practice_3:"20180915T100000Z",qualification:"20180915T130000Z",race:"20180916T121000Z"}),new Xr({round:16,practice_1:"20180928T080000Z",practice_2:"20180928T120000Z",practice_3:"20180929T090000Z",qualification:"20180929T120000Z",race:"20180930T111000Z"}),new Xr({round:17,practice_1:"20181005T010000Z",practice_2:"20181005T050000Z",practice_3:"20181006T030000Z",qualification:"20181006T060000Z",race:"20181007T051000Z"}),new Xr({round:18,practice_1:"20181019T150000Z",practice_2:"20181019T190000Z",practice_3:"20181020T180000Z",qualification:"20181020T210000Z",race:"20181021T181000Z"}),new Xr({round:19,practice_1:"20181026T150000Z",practice_2:"20181026T190000Z",practice_3:"20181027T150000Z",qualification:"20181027T180000Z",race:"20181028T191000Z"}),new Xr({round:20,practice_1:"20181109T140000Z",practice_2:"20181109T180000Z",practice_3:"20181110T150000Z",qualification:"20181110T180000Z",race:"20181111T181000Z"}),new Xr({round:21,practice_1:"20181123T090000Z",practice_2:"20181123T130000Z",practice_3:"20181124T100000Z",qualification:"20181124T130000Z",race:"20181125T131000Z"})]],["2019",[new Xr({round:1,practice_1:"20190315T010000Z",practice_2:"20190315T050000Z",practice_3:"20190316T030000Z",qualification:"20190316T060000Z",race:"20190317T051000Z"}),new Xr({round:2,practice_1:"20190329T110000Z",practice_2:"20190329T150000Z",practice_3:"20190330T120000Z",qualification:"20190330T150000Z",race:"20190331T151000Z"}),new Xr({round:3,practice_1:"20190412T020000Z",practice_2:"20190412T060000Z",practice_3:"20190413T030000Z",qualification:"20190413T060000Z",race:"20190414T061000Z"}),new Xr({round:4,practice_1:"20190426T090000Z",practice_2:"20190426T130000Z",practice_3:"20190427T100000Z",qualification:"20190427T130000Z",race:"20190428T121000Z"}),new Xr({round:5,practice_1:"20190510T090000Z",practice_2:"20190510T130000Z",practice_3:"20190511T100000Z",qualification:"20190511T130000Z",race:"20190512T131000Z"}),new Xr({round:6,practice_1:"20190523T090000Z",practice_2:"20190523T130000Z",practice_3:"20190525T100000Z",qualification:"20190525T130000Z",race:"20190526T131000Z"}),new Xr({round:7,practice_1:"20190607T150000Z",practice_2:"20190607T190000Z",practice_3:"20190608T160000Z",qualification:"20190608T190000Z",race:"20190609T191000Z"}),new Xr({round:8,practice_1:"20190621T090000Z",practice_2:"20190621T130000Z",practice_3:"20190622T100000Z",qualification:"20190622T130000Z",race:"20190623T131000Z"}),new Xr({round:9,practice_1:"20190628T090000Z",practice_2:"20190628T130000Z",practice_3:"20190629T100000Z",qualification:"20190629T130000Z",race:"20190630T131000Z"}),new Xr({round:10,practice_1:"20190712T090000Z",practice_2:"20190712T130000Z",practice_3:"20190713T100000Z",qualification:"20190713T130000Z",race:"20190714T131000Z"}),new Xr({round:11,practice_1:"20190726T090000Z",practice_2:"20190726T130000Z",practice_3:"20190727T100000Z",qualification:"20190727T130000Z",race:"20190728T131000Z"}),new Xr({round:12,practice_1:"20190802T090000Z",practice_2:"20190802T130000Z",practice_3:"20190803T100000Z",qualification:"20190803T130000Z",race:"20190804T131000Z"}),new Xr({round:13,practice_1:"20190830T090000Z",practice_2:"20190830T130000Z",practice_3:"20190831T100000Z",qualification:"20190831T130000Z",race:"20190901T131000Z"}),new Xr({round:14,practice_1:"20190906T090000Z",practice_2:"20190906T130000Z",practice_3:"20190907T100000Z",qualification:"20190907T130000Z",race:"20190908T131000Z"}),new Xr({round:15,practice_1:"20190920T083000Z",practice_2:"20190920T123000Z",practice_3:"20190921T100000Z",qualification:"20190921T130000Z",race:"20190922T121000Z"}),new Xr({round:16,practice_1:"20190927T080000Z",practice_2:"20190927T120000Z",practice_3:"20190928T090000Z",qualification:"20190928T120000Z",race:"20190929T111000Z"}),new Xr({round:17,practice_1:"20191011T010000Z",practice_2:"20191011T050000Z",practice_3:"20191012T030000Z",qualification:"20191012T060000Z",race:"20191013T051000Z"}),new Xr({round:18,practice_1:"20191025T150000Z",practice_2:"20191025T190000Z",practice_3:"20191026T150000Z",qualification:"20191026T180000Z",race:"20191027T191000Z"}),new Xr({round:19,practice_1:"20191101T160000Z",practice_2:"20191101T200000Z",practice_3:"20191102T180000Z",qualification:"20191102T210000Z",race:"20191103T191000Z"}),new Xr({round:20,practice_1:"20191115T140000Z",practice_2:"20191115T180000Z",practice_3:"20191116T150000Z",qualification:"20191116T180000Z",race:"20191117T181000Z"}),new Xr({round:21,practice_1:"20191129T090000Z",practice_2:"20191129T130000Z",practice_3:"20191130T100000Z",qualification:"20191130T130000Z",race:"20191201T131000Z"})]]]),tn=function(){function e(){Object(y.a)(this,e)}return Object(O.a)(e,[{key:"getF1Calendar",value:function(e){var t=en.get(e);return Promise.resolve(t)}},{key:"getRaceSchedule",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.getRaceSchedule(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRacesResults",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.getAllRacesResults(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getDrivers",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr.getDriverStandings(t);case 2:return e.abrupt("return",e.sent.standingsLists);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();var rn,nn,an,cn,sn,on,un,ln,pn,fn,dn=(Jr=function(){function e(t){Object(y.a)(this,e),Object(k.a)(this,"_currentTime",Kr,this),Object(k.a)(this,"_tick",$r,this),this._tickInterval=t}return Object(O.a)(e,[{key:"start",value:function(){this._interval=setInterval(this._tick,1e3*this._tickInterval),this._tick()}},{key:"stop",value:function(){this._interval&&clearInterval(this._interval)}},{key:"currentTime",get:function(){return this._currentTime}},{key:"currentTimeUtcString",get:function(){return Object(ie.g)(this._currentTime)}},{key:"currentYear",get:function(){return(new Date).getUTCFullYear()}}]),e}(),Kr=Object(T.a)(Jr.prototype,"_currentTime",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I()()}}),$r=Object(T.a)(Jr.prototype,"_tick",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._currentTime=I()()}}}),Object(T.a)(Jr.prototype,"currentTime",[o.computed],Object.getOwnPropertyDescriptor(Jr.prototype,"currentTime"),Jr.prototype),Object(T.a)(Jr.prototype,"currentTimeUtcString",[o.computed],Object.getOwnPropertyDescriptor(Jr.prototype,"currentTimeUtcString"),Jr.prototype),Jr),hn=(rn=function(){function e(){Object(y.a)(this,e),Object(k.a)(this,"pendingTasksCount",nn,this)}return Object(O.a)(e,[{key:"runWithProgress",value:function(e){this.pendingTasksCount++,e(),this.pendingTasksCount--}},{key:"runWithProgressAsync",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingTasksCount++,e.prev=1,e.next=4,t();case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,Object(o.runInAction)(function(){r.pendingTasksCount--}),e.finish(5);case 8:case"end":return e.stop()}},e,this,[[1,,5,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"hasPendingTasks",get:function(){return this.pendingTasksCount>0}}]),e}(),nn=Object(T.a)(rn.prototype,"pendingTasksCount",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(T.a)(rn.prototype,"hasPendingTasks",[o.computed],Object.getOwnPropertyDescriptor(rn.prototype,"hasPendingTasks"),rn.prototype),Object(T.a)(rn.prototype,"runWithProgress",[o.action],Object.getOwnPropertyDescriptor(rn.prototype,"runWithProgress"),rn.prototype),Object(T.a)(rn.prototype,"runWithProgressAsync",[o.action],Object.getOwnPropertyDescriptor(rn.prototype,"runWithProgressAsync"),rn.prototype),rn),mn=(an=function(){function e(t){var r=this,n=t.authenticationService,a=t.operationManager;Object(y.a)(this,e),Object(k.a)(this,"authenticatedUser",cn,this),this._authService=n,this._operationManager=a,this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.authenticate();case 2:return(t=e.sent)instanceof N.a&&Object(o.runInAction)(function(){r.authenticatedUser=t}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})))}return Object(O.a)(e,[{key:"login",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.login,n=t.password,e.abrupt("return",this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._authService.login({login:r,password:n});case 2:if(!((t=e.sent)instanceof N.a)){e.next=6;break}return Object(o.runInAction)(function(){a.authenticatedUser=t}),e.abrupt("return",!0);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.isAuthenticated&&(this._authService.logout(),this.authenticatedUser=null)}},{key:"signIn",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a,i=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.login,n=t.name,a=t.password,e.abrupt("return",this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){var t;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._authService.signIn({login:r,name:n,password:a});case 2:if(!((t=e.sent)instanceof N.a)){e.next=6;break}return Object(o.runInAction)(function(){i.authenticatedUser=t}),e.abrupt("return",!0);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isAuthenticated",get:function(){return null!==this.authenticatedUser}},{key:"isCurrentUserAdmin",get:function(){return this.isAuthenticated&&this.authenticatedUser.isAdmin}}]),e}(),cn=Object(T.a)(an.prototype,"authenticatedUser",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(T.a)(an.prototype,"isAuthenticated",[o.computed],Object.getOwnPropertyDescriptor(an.prototype,"isAuthenticated"),an.prototype),Object(T.a)(an.prototype,"isCurrentUserAdmin",[o.computed],Object.getOwnPropertyDescriptor(an.prototype,"isCurrentUserAdmin"),an.prototype),Object(T.a)(an.prototype,"login",[o.action],Object.getOwnPropertyDescriptor(an.prototype,"login"),an.prototype),Object(T.a)(an.prototype,"logout",[o.action],Object.getOwnPropertyDescriptor(an.prototype,"logout"),an.prototype),Object(T.a)(an.prototype,"signIn",[o.action],Object.getOwnPropertyDescriptor(an.prototype,"signIn"),an.prototype),an),bn=(sn=function(){function e(t){var r=this,n=t.userService,a=t.sessionModel,i=t.operationManager;Object(y.a)(this,e),Object(k.a)(this,"users",on,this),this._userService=n,this._operationManager=i,this._session=a,this._operationManager.runWithProgressAsync(function(){return r.fetchUsers()})}return Object(O.a)(e,[{key:"fetchUsers",value:function(){var e=this;try{return this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function t(){var r;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._userService.fetchAll();case 2:r=t.sent,Object(o.runInAction)(Object(Rt.a)(xt.a.mark(function t(){return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.users=r;case 1:case"end":return t.stop()}},t,this)})));case 4:case"end":return t.stop()}},t,this)})))}catch(t){console.log("Can't load 'users' in UserModel!!\n",t)}}},{key:"deleteUser",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._userService.delete(t);case 2:return e.next=4,this.fetchUsers();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdate",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._userService.addOrUpdate(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"currentUser",get:function(){return this._session.authenticatedUser}}]),e}(),on=Object(T.a)(sn.prototype,"users",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(sn.prototype,"currentUser",[o.computed],Object.getOwnPropertyDescriptor(sn.prototype,"currentUser"),sn.prototype),Object(T.a)(sn.prototype,"fetchUsers",[o.action],Object.getOwnPropertyDescriptor(sn.prototype,"fetchUsers"),sn.prototype),Object(T.a)(sn.prototype,"addOrUpdate",[o.action],Object.getOwnPropertyDescriptor(sn.prototype,"addOrUpdate"),sn.prototype),sn),vn=function(){function e(t){var r=t.operationManager,n=t.formulaOneOfficialDataService;Object(y.a)(this,e),this._service=n,this._operationManager=r}return Object(O.a)(e,[{key:"fetchRounds",value:function(e){var t=this;return this._operationManager.runWithProgressAsync(function(){return t._service.fetchSeasonRounds(e)})}},{key:"fetchRacesResults",value:function(e){var t=this;return this._operationManager.runWithProgressAsync(function(){return t._service.fetchRacesResults(e)})}},{key:"fetchRacers",value:function(e){var t=this;return this._operationManager.runWithProgressAsync(function(){return t._service.fetchRacers(e)})}}]),e}(),yn=function(){function e(t){var r=t.operationManager,n=t.racesInfoService;Object(y.a)(this,e),this._racesInfoService=n,this._operationManager=r}return Object(O.a)(e,[{key:"fetchSeasonRaces",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r._operationManager.runWithProgressAsync(function(){return r._racesInfoService.fetchAll()}));case 1:case"end":return e.stop()}},e,this)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),On=r(201),gn=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.season,n=void 0===r?"":r,a=t.isLoaded,i=void 0!==a&&a,c=t.rounds,s=void 0===c?[]:c,o=t.racesResults,u=void 0===o?[]:o,l=t.racers,p=void 0===l?[]:l,f=t.races,d=void 0===f?[]:f;Object(y.a)(this,e),this.season=n,this.isLoaded=i,this.rounds=s,this.racesResults=u,this.racers=p,this.races=d},jn=(un=function(){function e(t,r,n){var a=r.racesInfoService,i=r.formulaOneOfficialDataService;Object(y.a)(this,e),Object(k.a)(this,"seasonsHistory",ln,this),this._currentSeason=t,this._racesModel=new yn({operationManager:n,racesInfoService:a}),this._formulaOneOfficialModel=new vn({operationManager:n,formulaOneOfficialDataService:i}),this.availableSeasons=["2019","2018"],this._initSeasonsHistory()}return Object(O.a)(e,[{key:"_initSeasonsHistory",value:function(){this.seasonsHistory=new Map(this.availableSeasons.map(function(e){return[e,new gn({season:e})]}))}},{key:"getRounds",value:function(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).rounds)}},{key:"getRacesResults",value:function(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).racesResults)}},{key:"getRacers",value:function(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).racers)}},{key:"getRaces",value:function(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).races)}},{key:"loadSeasonHistory",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r,n,a,i,c,s,u,l=this,p=arguments;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]&&p[1],!this.seasonsHistory.has(t)||!this.seasonsHistory.get(t).isLoaded||r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all([this._formulaOneOfficialModel.fetchRounds(t),this._formulaOneOfficialModel.fetchRacesResults(t),this._formulaOneOfficialModel.fetchRacers(t),this._racesModel.fetchSeasonRaces(t)]);case 5:n=e.sent,a=Object(Yt.a)(n,4),i=a[0],c=a[1],s=a[2],u=a[3],Object(o.runInAction)(function(){l.seasonsHistory.set(t,new gn({season:t,isLoaded:!0,rounds:i,racesResults:c,racers:s,races:i.map(function(e){var t=u.find(function(t){return t.roundId===e.roundId});return new On.a(Object(rt.a)({},e,{bets:t?t.bets:[],raceResults:t?t.raceResults:{}}))})}))});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_withSeasonExistCheck",value:function(e,t){return this.seasonsHistory.has(e)?t:[]}},{key:"currentSeasonHistory",get:function(){return this.seasonsHistory.has(this._currentSeason)?this.seasonsHistory.get(this._currentSeason):new gn}},{key:"historiesBySeason",get:function(){var e=Array.from(this.seasonsHistory.entries()).map(function(e){var t=Object(Yt.a)(e,2);t[0];return t[1]});return Rr()(e,["season"]).reverse()}}]),e}(),ln=Object(T.a)(un.prototype,"seasonsHistory",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(T.a)(un.prototype,"_initSeasonsHistory",[o.action],Object.getOwnPropertyDescriptor(un.prototype,"_initSeasonsHistory"),un.prototype),Object(T.a)(un.prototype,"historiesBySeason",[o.computed],Object.getOwnPropertyDescriptor(un.prototype,"historiesBySeason"),un.prototype),un),_n=b.getVoteClosingTime(),wn=(pn=function(){function e(t){var r=this;Object(y.a)(this,e);var n=new hn,a=b.getTickInterval(),i=t.userService,c=t.authenticationService;this.services=t,this._timeWatcher=new dn(a),this.currentSeason=this._timeWatcher.currentYear.toString(),this._operationManager=n,this._sessionModel=new mn({authenticationService:c,operationManager:n}),this._usersModel=new bn({sessionModel:this._sessionModel,operationManager:n,userService:i}),this._formulaOneHistoryModel=new jn(this.currentSeason,t,n),this.loadSeasonData(this.currentSeason),Object(o.when)(function(){return r.nextRace&&se(r._timeWatcher.currentTime,r.nextRace.raceStartTime)},function(){r._reloadSeasonData(r.currentSeason)})}return Object(O.a)(e,[{key:"addNewBet",value:function(){var e=Object(Rt.a)(xt.a.mark(function e(t){var r=this;return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._operationManager.runWithProgressAsync(Object(Rt.a)(xt.a.mark(function e(){return xt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.services.racesInfoService.addOrUpdateBet(t,r.nextRace);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Can't update Bet",e.t0);case 8:return e.next=10,r._reloadSeasonData(r.currentSeason);case 10:case"end":return e.stop()}},e,this,[[0,5]])}))));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadSeasonData",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._formulaOneHistoryModel.loadSeasonHistory(e)}},{key:"_reloadSeasonData",value:function(e){this._formulaOneHistoryModel.loadSeasonHistory(e,!0)}},{key:"currentSeasonHistory",get:function(){return this._formulaOneHistoryModel.currentSeasonHistory}},{key:"nextRace",get:function(){var e=this._timeWatcher.currentTime,t=this.currentSeasonHistory.races.filter(function(t){return se(t.raceStartTime,e)});return Object(Yt.a)(t,1)[0]||null}},{key:"isProduction",get:function(){return b.isProductionMode()}},{key:"isUserAlreadyBet",get:function(){var e=this;return!!this._sessionModel.authenticatedUser&&(!!this.nextRace&&this.nextRace.bets.some(function(t){return t.userInfo.id===e._sessionModel.authenticatedUser.id}))}},{key:"isBetsAllowed",get:function(){if(!this.nextRace)return!1;var e=this.nextRace,t=e.raceStartTime,r=e.qualifyingStartTime;return!(!r||!t)&&!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"minute";return e=ce(e),t=ce(t),r=ce(r),e.isBetween(t,r,n)}(this.timeWatcher.currentTime,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minute";return(e=ce(e)).subtract(t,r)}(r,_n),t)}},{key:"isUserAuthenticated",get:function(){return this._sessionModel.isAuthenticated}},{key:"isUserAdmin",get:function(){return this._sessionModel.isCurrentUserAdmin}},{key:"authUserBets",get:function(){if(!this._sessionModel.authenticatedUser)return[];var e=[],t=this._sessionModel.authenticatedUser.id;return this.currentSeasonHistory.races.forEach(function(r){var n=r.bets,a=r.prettyTitle,i=r.roundId;if(n.some(function(e){return e.userInfo.id===t})){var c=n[n.findIndex(function(e){return e.userInfo.id===t})];e.push({raceId:i,title:a,bet:c.betsMap})}}),e}},{key:"session",get:function(){return this._sessionModel}},{key:"usersModel",get:function(){return this._usersModel}},{key:"formulaOneHistory",get:function(){return this._formulaOneHistoryModel}},{key:"timeWatcher",get:function(){return this._timeWatcher}},{key:"operationManager",get:function(){return this._operationManager}}]),e}(),Object(T.a)(pn.prototype,"nextRace",[o.computed],Object.getOwnPropertyDescriptor(pn.prototype,"nextRace"),pn.prototype),Object(T.a)(pn.prototype,"isUserAlreadyBet",[o.computed],Object.getOwnPropertyDescriptor(pn.prototype,"isUserAlreadyBet"),pn.prototype),Object(T.a)(pn.prototype,"isBetsAllowed",[o.computed],Object.getOwnPropertyDescriptor(pn.prototype,"isBetsAllowed"),pn.prototype),Object(T.a)(pn.prototype,"authUserBets",[o.computed],Object.getOwnPropertyDescriptor(pn.prototype,"authUserBets"),pn.prototype),pn),kn=function(){function e(t){var r=t.configProvider;Object(y.a)(this,e);var n=function(e){var t=e.getUserStoreApiUrl(),r=e.getRaceStoreApiUrl(),n=e.getLocalStorageUserKey(),a=new tn,i=new Dr({userStoreApiUrl:t}),c=new Wr({raceInfoStoreApiUrl:r});return{userService:i,authenticationService:new qr({localStorageUserKey:n,userService:i,cryptoService:Fr}),racesInfoService:c,formulaOneOfficialDataService:new Qr({formulaOneOfficialDataRepository:a})}}(r),a=new wn(n);this._stores=Br(a)}return Object(O.a)(e,[{key:"getStores",value:function(){return this._stores}}]),e}(),Sn=Object(w.a)(fn=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(a.a.Component))||fn;Object(o.configure)({enforceActions:"always"});var Tn=new kn({configProvider:b}).getStores();c.a.render(a.a.createElement(u.Provider,Tn,a.a.createElement(s.a,null,a.a.createElement(Sn,null,a.a.createElement(Tt,null)))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");l?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):p(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):p(e)})}}()},74:function(e,t,r){"use strict";var n=r(1),a=r(5),i=function(){function e(t,r,a,i){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";Object(n.a)(this,e),this.firstName=t,this.lastName=r,this.number=a,this.abbreviation=i,this.points=c,this.nationality=s,this.dateOfBirth=o}return Object(a.a)(e,[{key:"name",get:function(){return"".concat(this.firstName," ").concat(this.lastName)}},{key:"shortName",get:function(){return"".concat(this.firstName[0],". ").concat(this.lastName)}},{key:"code",get:function(){return this.abbreviation}}],[{key:"create",value:function(t){var r=t.firstName,n=t.lastName,a=t.number,i=t.abbreviation,c=t.points;return new e(r,n,a,i,void 0===c?0:c,t.nationality,t.dateOfBirth)}}]),e}();t.a=i}},[[399,2,3]]]);