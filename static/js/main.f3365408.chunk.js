(this["webpackJsonpf1-bets-app"]=this["webpackJsonpf1-bets-app"]||[]).push([[0],{1:function(e,t,r){"use strict";r(289),r(290);var a=r(20),n=r.n(a),s=r(95),c=r.n(s),i=r(130),o=r.n(i),u=r(131),l=r.n(u),p=r(132),d=r.n(p),h=r(133),m=r.n(h),f=r(134),b=r.n(f),g=r(135),_=r.n(g),v=r(136),w=r.n(v),y=r(137),O=r.n(y),T=r(138),S=r.n(T),E=r(148),j=r.n(E),x=r(149),Z=r.n(x),M=r(157),R=r.n(M),N=r(156),k=r.n(N),U=r(150),A=r.n(U),I=r(155),P=r.n(I),B=r(145),C=r.n(B),D=r(146),q=r.n(D),W=r(129),F=r.n(W),L=r(158),H=r.n(L),z=r(160),V=r.n(z),J=r(147),G=r.n(J),Y=r(161),Q=r.n(Y),$=r(162),K=r.n($),X=r(163),ee=r.n(X),te=r(164),re=r.n(te),ae=r(165),ne=r.n(ae),se=r(166),ce=r.n(se),ie=r(2),oe=r.n(ie),ue=r(5),le=r(76),pe=r.n(le);const de={get:e=>Object(ue.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.a.get(e,{headers:{"secret-key":"$2b$10$nd.f9pwc.J84FZnU63N9au/jjAqVcF8VgyVWqJgJ.PIbUrwRnYVFG",versioning:!1}});case 3:return t.abrupt("return",t.sent.data);case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))(),put:(e,t)=>Object(ue.a)(oe.a.mark((function r(){return oe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.abrupt("return",pe.a.put(e,t,{headers:{"secret-key":"$2b$10$nd.f9pwc.J84FZnU63N9au/jjAqVcF8VgyVWqJgJ.PIbUrwRnYVFG",versioning:!1}}));case 4:r.prev=4,r.t0=r.catch(0),console.error(r.t0.message);case 7:case"end":return r.stop()}}),r,null,[[0,4]])})))()};r.d(t,"a",(function(){return F.a})),r.d(t,"b",(function(){return c.a})),r.d(t,"e",(function(){return o.a})),r.d(t,"x",(function(){return l.a})),r.d(t,"c",(function(){return d.a})),r.d(t,"i",(function(){return m.a})),r.d(t,"k",(function(){return b.a})),r.d(t,"m",(function(){return _.a})),r.d(t,"n",(function(){return w.a})),r.d(t,"A",(function(){return O.a})),r.d(t,"d",(function(){return S.a})),r.d(t,"s",(function(){return C.a})),r.d(t,"t",(function(){return q.a})),r.d(t,"u",(function(){return G.a})),r.d(t,"v",(function(){return j.a})),r.d(t,"w",(function(){return Z.a})),r.d(t,"g",(function(){return A.a})),r.d(t,"f",(function(){return P.a})),r.d(t,"h",(function(){return k.a})),r.d(t,"B",(function(){return R.a})),r.d(t,"y",(function(){return H.a})),r.d(t,"z",(function(){return V.a})),r.d(t,"l",(function(){return Q.a})),r.d(t,"j",(function(){return K.a})),r.d(t,"o",(function(){return ee.a})),r.d(t,"r",(function(){return re.a})),r.d(t,"p",(function(){return ne.a})),r.d(t,"q",(function(){return ce.a})),r.d(t,"C",(function(){return de})),n.a.locale("ru")},124:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));class a{constructor({raceName:e,raceTime:t,qualTime:r,practice1Time:a,practice2Time:n,practice3Time:s,id:c}){this.raceName=e,this.raceTime=t,this.qualTime=r,this.practice1Time=a,this.practice2Time=n,this.practice3Time=s,this.raceId=c}}},125:function(e,t,r){"use strict";t.a=class{constructor({racerId:e,racerFullName:t,racerPoints:r,racerUrl:a,racerNumber:n,racerNationality:s,constructorName:c,constructorUrl:i}){this.racerId=e,this.racerFullName=t,this.racerUrl=a,this.racerPoints=r,this.racerNumber=n,this.racerNationality=s,this.constructorUrl=i,this.constructorName=c}}},126:function(e,t,r){"use strict";t.a=class{constructor({pos:e,name:t,id:r,points:a,url:n,nationality:s}){this.pos=e,this.name=t,this.id=r,this.points=a,this.url=n,this.nationality=s}}},127:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(2),n=r.n(a),s=r(5),c=r(49),i=r.n(c),o=r(64),u=r.n(o),l=r(50),p=r.n(l),d=r(42);const h={LOGIN:"login",NAME:"name"};class m extends i.a{constructor({user:e,onUserUpdate:t}){super({fields:m._getFields(e)},{options:{showErrorsOnChange:!0,validateOnChange:!0},hooks:{onSuccess:function(){var e=Object(s.a)(n.a.mark((function e(r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.values(),e.next=3,t(a);case 3:r.init(m._getFields(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:e=>{e.invalidate("This is a generic error message!")}}})}plugins(){return{dvr:u()(p.a)}}static _getFields({name:e,login:t}){return[{name:h.NAME,label:"\u0418\u043c\u044f",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, John Doe",rules:d.b,value:e},{name:h.LOGIN,label:"\u041b\u043e\u0433\u0438\u043d",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, superman",rules:d.a,value:t}]}}t.b=m},13:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={HOME:"/",CALENDAR:"/calendar",BETS:"/bet",ADMIN:"/admin",RESULTS:"/results",RACERS:"/racers",TEAMS:"/teams",LOGIN:"/login",LOGOUT:"/logout",BETS_HISTORY:"/bets-history",PROFILE:"/profile"}},180:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(2),n=r.n(a),s=r(19),c=r(5),i=r(49),o=r.n(i),u=r(64),l=r.n(u),p=r(50),d=r.n(p),h=r(42),m=r(27);const f={LOGIN:"login",NAME:"name",PASSWORD:"password",IS_ADMIN:"isAdmin",IS_TESTING:"isTesting"};class b extends o.a{constructor({user:e,onUserUpdate:t,onSuccess:r,onCancel:a}){super({fields:b._getFields(e)},{options:{showErrorsOnChange:!0,validateOnChange:!0},hooks:{onSuccess:function(){var a=Object(c.a)(n.a.mark((function a(c){var i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=new m.a(Object(s.a)({},e,{},(n=c.values(),Object.fromEntries(Object.entries(n).map(([e,t])=>{return[e,(r=t,"string"===typeof r?r.trim():r)];var r}))))),a.next=3,t(i);case 3:c.init(b._getFields(e)),r();case 5:case"end":return a.stop()}var n}),a)})));return function(e){return a.apply(this,arguments)}}(),onError:e=>{e.invalidate("This is a generic error message!")}}}),this.onCancel=()=>{this._onCancel()},this._onCancel=a}plugins(){return{dvr:l()(d.a)}}static _getFields({name:e,login:t,isAdmin:r,isTesting:a}){return[{name:f.NAME,label:"\u0418\u043c\u044f",rules:h.b,value:e},{name:f.LOGIN,label:"\u041b\u043e\u0433\u0438\u043d",rules:h.a,value:t},{name:f.IS_ADMIN,label:"Admin",type:"checkbox",value:r},{name:f.IS_TESTING,label:"Testing",type:"checkbox",value:a}]}}t.b=b},231:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(49),n=r.n(a),s=r(64),c=r.n(s),i=r(50),o=r.n(i),u=r(42);const l={PASSWORD:"password"};class p extends n.a{constructor({user:e,onSuccess:t,onCancel:r}){super({fields:p._getFields()},{options:{showErrorsOnChange:!0,validateOnChange:!0},hooks:{onSuccess:e=>{const r=e.values()[l.PASSWORD].trim();e.init(p._getFields(r)),t(r)},onError:e=>{e.invalidate("This is a generic error message!")}}}),this.onCancel=()=>{this._onCancel()},this._onCancel=r,this.user=e}plugins(){return{dvr:c()(o.a)}}static _getFields(e=""){return[{name:l.PASSWORD,label:"\u041f\u0430\u0440\u043e\u043b\u044c",rules:u.c,value:e}]}}t.b=p},232:function(e,t,r){"use strict";var a=r(19),n=r(61),s=r.n(n),c=r(88);t.a=class{constructor({race:e,finishedRacers:t=[],getUserName:r=(()=>""),qualifyingResultsStandings:a=[]}){if(this._officialResults=null,this._officialResultsBetMap=null,this._qualifyingResults=null,this.raceId=e.roundId,this.raceTitle=e.prettyTitle+" "+e.season,t.length>0&&(this._officialResultsBetMap=this._convertToBetMap(t),this._officialResults=c.c.createOfficialResults(this._officialResultsBetMap)),a.length>0){const e=this._convertToBetMap(a);this._qualifyingResults=c.c.createQualifyingResults(e)}this._userVotes=e.bets.map(e=>{const t=e.userInfo.id,a=r(t);return new c.c({userId:t,userName:a,userBetsMap:e.betsMap},this._officialResultsBetMap)})}get hasOfficialResults(){return null!==this._officialResults}get hasQualifyingResults(){return null!==this._qualifyingResults}get userBetsResults(){const e=[];return this.hasOfficialResults&&e.push(this._officialResults),this.hasQualifyingResults&&e.push(this._qualifyingResults),[...e,...this.userVotes]}get userVotes(){return this.hasOfficialResults?s()(this._userVotes,e=>-e.userScore.value):this._userVotes}_convertToBetMap(e){return e.reduce((e,t,r)=>Object(a.a)({},e,{[r+1]:t.code}),{})}}},233:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));class a{constructor({userId:e,userName:t,totalPoints:r=0}){this.userId=e,this.userName=t,this.totalPoints=r}}},26:function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"g",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return p}));var a=r(20),n=r.n(a);function s(e){return n()(e).format("D MMMM YYYY, HH:mm")}function c(e){return n()(e).format("D MMMM YYYY, HH:mm:ss")}function i(e){return n()(e).utc().format()}function o(e){return n()(e).format("DD MMMM")}function u(e){return n()(e).format("ddd")}function l(e){return n()(e).format("HH:mm")}function p(e){return n()(e).format("D MMM YYYY")}},27:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(55),n=r(33);class s extends a.a{constructor({login:e,name:t,password:r,id:a,isAdmin:s=!1,isTesting:c=!1}){super({name:t,id:a||Object(n.a)()}),this.login=e,this.password=r,this.isAdmin=s,this.isTesting=c}toUserInfo(){return new a.a(this)}static fromJs({login:e,name:t,password:r,id:a,isAdmin:n=!1,isTesting:c=!1}){return new s({login:e,name:t,password:r,id:a,isAdmin:n,isTesting:c})}}},272:function(e,t,r){"use strict";var a,n,s,c=r(2),i=r.n(c),o=r(5),u=r(0),l=r.n(u),p=r(6),d=r(1),h=r(26),m=r(87),f=r(7),b=r(4),g=(r(30),r(3)),_=(r(85),r(86)),v=r(52);r(47),r(27);const w=e=>e.name,y=e=>{const t=e.value;return l.a.createElement(v.a.Option,Object.assign({},e,{className:"users-select__option"}),w(t))},O=e=>{const t=e.data;return l.a.createElement(v.a.SingleValue,e,w(t))};function T({user:e,users:t,onSelect:r}){const a=t.map(e=>({label:w(e),value:e}));return l.a.createElement(v.b,{isClearable:!0,className:"users-select",value:e,options:a,searchable:!1,onChange:e=>{r(e?e.value:null)},components:{Option:y,SingleValue:O}})}var S,E,j,x,Z,M=Object(p.inject)(({adminPageStore:e})=>({racers:e.racesSectionStore.racers,users:e.racesSectionStore.users}))(a=Object(p.observer)((n=class extends l.a.Component{constructor(...e){super(...e),Object(f.a)(this,"_selectedUser",s,this),this._handleSelectUser=Object(g.action)(e=>{this._selectedUser=e}),this._handleSubmit=e=>{this.props.onSubmit(this._selectedUser,e)}}get _canSubmit(){return null!==this._selectedUser}render(){const e=this.props,t=e.race,r=e.users,a=e.racers,n=e.onCancel;return l.a.createElement(d.o,{isOpen:!0},l.a.createElement(d.r,null,"\u0413\u043e\u043b\u043e\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f (",t.prettyTitle,")"),l.a.createElement(d.p,null,l.a.createElement(d.i,null,l.a.createElement(d.k,null,l.a.createElement(d.n,{htmlFor:"users_select"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),l.a.createElement(T,{user:this._selectedUser,users:r,onSelect:this._handleSelectUser})),this._canSubmit&&l.a.createElement(d.k,null,l.a.createElement(m.a,{racers:a,onSave:this._handleSubmit})))),l.a.createElement(d.q,null,l.a.createElement(d.b,{color:"secondary",type:"button",onClick:n},"\u041e\u0442\u043c\u0435\u043d\u0430")))}},s=Object(b.a)(n.prototype,"_selectedUser",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(b.a)(n.prototype,"_canSubmit",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"_canSubmit"),n.prototype),a=n))||a)||a;var R,N,k=Object(p.inject)(({adminPageStore:e})=>({onBetsSubmit:e.racesSectionStore.addNewBet}))(S=Object(p.observer)((E=class extends l.a.Component{constructor(...e){var t;super(...e),t=this,Object(f.a)(this,"_isDialogOpen",j,this),this.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(r,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return alert("\u0412\u044b\u0431\u0435\u0440\u0438 \u042e\u0437\u0435\u0440\u0430!!!"),e.abrupt("return");case 3:return n=new _.a({userInfo:r.toUserInfo(),betsMap:a}),e.next=6,t.props.onBetsSubmit(n,t.props.race);case 6:t.handleToggleDialog();case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Object(f.a)(this,"handleToggleDialog",x,this),Object(f.a)(this,"handleUserSelect",Z,this)}render(){const e=this.props.race;return this._isDialogOpen?l.a.createElement(M,{race:e,onSubmit:this.handleSubmit,onCancel:this.handleToggleDialog}):l.a.createElement(d.b,{size:"sm",color:"info",onClick:this.handleToggleDialog},"Add bet for user")}},j=Object(b.a)(E.prototype,"_isDialogOpen",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(b.a)(E.prototype,"handleToggleDialog",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this._isDialogOpen=!this._isDialogOpen}}}),Z=Object(b.a)(E.prototype,"handleUserSelect",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this._selectedUser=e}}}),S=E))||S)||S;var U,A=(R=class{constructor(e,t,r){Object(f.a)(this,"selectedRace",N,this),this.addNewBet=(e,t)=>this._appModel.addNewBet(e,t),this._appModel=e,this._storeApiUrl=t,this._racesInfoService=r}get users(){return this._appModel.usersModel.users}get races(){return this._appModel.currentSeasonHistory.races}get racers(){return this._appModel.currentSeasonHistory.racers}get storeApiUrl(){return this._storeApiUrl}showRaceResultsPanel(e){this.selectedRace=e,this.isRaceResultsPanelVisible=!0}addOrUpdateRaceResults(e){var t=this;return Object(o.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.selectedRace){r.next=3;break}return window.alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u043d\u043a\u0443!"),r.abrupt("return");case 3:if(!(Object.values(e).filter(e=>Boolean(e)).length<20)){r.next=6;break}return window.alert("\u0412\u044b\u0431\u0440\u0430\u043d\u044b \u043d\u0435 \u0432\u0441\u0435 \u0433\u043e\u043d\u0448\u0438\u043a\u0438 !"),r.abrupt("return");case 6:return r.next=8,t._appModel.operationManager.runWithProgressAsync(Object(o.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._racesInfoService.updateRaceResult(t.selectedRace.roundId,e);case 2:Object(g.runInAction)(()=>{t.selectedRace=null});case 3:case"end":return r.stop()}}),r)}))));case 8:case"end":return r.stop()}}),r)})))()}},N=Object(b.a)(R.prototype,"selectedRace",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(b.a)(R.prototype,"users",[g.computed],Object.getOwnPropertyDescriptor(R.prototype,"users"),R.prototype),Object(b.a)(R.prototype,"races",[g.computed],Object.getOwnPropertyDescriptor(R.prototype,"races"),R.prototype),Object(b.a)(R.prototype,"racers",[g.computed],Object.getOwnPropertyDescriptor(R.prototype,"racers"),R.prototype),Object(b.a)(R.prototype,"showRaceResultsPanel",[g.action],Object.getOwnPropertyDescriptor(R.prototype,"showRaceResultsPanel"),R.prototype),R);r.d(t,"a",(function(){return A}));let I=Object(p.inject)(e=>({racesSectionStore:e.adminPageStore.racesSectionStore}))(U=Object(p.observer)(U=class extends u.Component{constructor(...e){var t;super(...e),t=this,this._handleAddRaceResults=e=>{this.props.racesSectionStore.showRaceResultsPanel(e)},this._handleGridSelectorSave=function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.racesSectionStore.addOrUpdateRaceResults(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}render(){const e=this.props.racesSectionStore,t=e.storeApiUrl,r=e.selectedRace,a=e.races,n=e.racers;return l.a.createElement("section",{className:"mt-2"},r?l.a.createElement(d.x,{key:2},l.a.createElement(d.c,null,l.a.createElement("strong",null,r.prettyTitle),l.a.createElement(m.a,{gridPositionsCount:20,racers:n,onSave:this._handleGridSelectorSave}))):l.a.createElement(d.x,null,l.a.createElement(d.c,null,l.a.createElement(d.A,{bordered:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u2116"),l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Bets"),l.a.createElement("th",null,"Commands"))),l.a.createElement("tbody",null,a.map((e,t)=>{const r=e.prettyTitle,a=e.raceStartTime,n=e.qualifyingStartTime,s=e.bets;return l.a.createElement("tr",{key:r},l.a.createElement("td",null,t+1),l.a.createElement("td",null,r),l.a.createElement("td",null,l.a.createElement("div",null,"Qual: ",Object(h.d)(n)),l.a.createElement("div",null,"Race: ",Object(h.d)(a))),l.a.createElement("td",null,"We have ",s.length," bets"),l.a.createElement("td",null,l.a.createElement(k,{race:e}),l.a.createElement(d.b,{size:"sm",onClick:()=>this._handleAddRaceResults(e)},"Add Race Results")))}))))),l.a.createElement(d.x,null,l.a.createElement(d.c,null,"Details:"," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},t))))}})||U)||U;t.b=I},284:function(e,t,r){e.exports=r(467)},33:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(93),n=r.n(a);function s(){return n()()+n()("-26bf-11e8-")}},336:function(e,t,r){},337:function(e,t,r){},338:function(e,t,r){},341:function(e,t,r){},342:function(e,t,r){},343:function(e,t,r){},344:function(e,t,r){},346:function(e,t,r){},347:function(e,t,r){},348:function(e,t,r){},349:function(e,t,r){},350:function(e,t,r){},354:function(e,t,r){},355:function(e,t,r){},356:function(e,t,r){},357:function(e,t,r){},358:function(e,t,r){},359:function(e,t,r){},385:function(e,t,r){var a={"./ar":184,"./ar.js":184,"./az":185,"./az.js":185,"./be":186,"./be.js":186,"./bg":187,"./bg.js":187,"./bs":188,"./bs.js":188,"./ca":189,"./ca.js":189,"./cs":190,"./cs.js":190,"./cy":191,"./cy.js":191,"./da":192,"./da.js":192,"./de":193,"./de.js":193,"./el":194,"./el.js":194,"./en":99,"./en.js":99,"./es":195,"./es.js":195,"./et":196,"./et.js":196,"./eu":197,"./eu.js":197,"./fa":198,"./fa.js":198,"./fi":199,"./fi.js":199,"./fr":200,"./fr.js":200,"./hr":201,"./hr.js":201,"./hu":202,"./hu.js":202,"./id":203,"./id.js":203,"./it":204,"./it.js":204,"./ja":205,"./ja.js":205,"./ka":206,"./ka.js":206,"./ko":207,"./ko.js":207,"./lt":208,"./lt.js":208,"./lv":209,"./lv.js":209,"./mk":210,"./mk.js":210,"./mn":211,"./mn.js":211,"./ms":212,"./ms.js":212,"./nb_NO":213,"./nb_NO.js":213,"./nl":214,"./nl.js":214,"./pl":215,"./pl.js":215,"./pt":216,"./pt.js":216,"./pt_BR":217,"./pt_BR.js":217,"./ro":218,"./ro.js":218,"./ru":219,"./ru.js":219,"./se":220,"./se.js":220,"./sl":221,"./sl.js":221,"./sq":222,"./sq.js":222,"./sr":223,"./sr.js":223,"./sv":224,"./sv.js":224,"./tr":225,"./tr.js":225,"./ua":226,"./ua.js":226,"./uk":227,"./uk.js":227,"./vi":228,"./vi.js":228,"./zh":229,"./zh.js":229,"./zh_TW":230,"./zh_TW.js":230};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id=385},392:function(e,t){},394:function(e,t){},42:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return s}));const a="required|string|between:3,25",n="required|string|alpha_num|between:2,15",s="required|string|alpha_num|between:5,15"},424:function(e,t){},425:function(e,t){},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return o}));var a=r(19),n=r(42);const s={LOGIN:"login",PASSWORD:"password"},c=Object(a.a)({},s,{NAME:"name"}),i={[s.LOGIN]:{name:s.LOGIN,label:"\u041b\u043e\u0433\u0438\u043d",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, superman",rules:n.a},[s.PASSWORD]:{name:s.PASSWORD,label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, ******",type:"password",rules:n.c}},o=Object(a.a)({},i,{[c.NAME]:{name:c.NAME,label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, John Doe",rules:n.b}})},467:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(31),c=r.n(s),i=r(473),o=r(3),u=r(6);const l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var d={isProductionMode:()=>!0,getUserStoreApiUrl:()=>"https://api.jsonbin.io/b/5f0a35c35d4af74b012a9d6c",getRaceStoreApiUrl:()=>"https://api.jsonbin.io/b/5f0a38505d4af74b012a9ebf",getLocalStorageUserKey:()=>"f1betsappuserid",getTickInterval:()=>"1",getCurrentSeason:()=>"2020",getVoteClosingTime:()=>parseInt("10#minutes",10)},h=r(1),m=r(474),f=(r(336),r(337),r(7)),b=r(4),g=(r(30),r(338),r(13)),_=r(27),v=r(470);var w=({path:e="/",className:t="",disabled:r=!1,onClick:a,children:s})=>r?s:n.a.createElement(v.a,{to:e,className:t,onClick:a},s);var y=({user:e,onClose:t})=>{const r=e.name;return n.a.createElement(h.B,{nav:!0,inNavbar:!0},n.a.createElement(h.h,{nav:!0,caret:!0},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),n.a.createElement(h.g,{className:"nav-bar-drop-down-menu",right:!0},n.a.createElement(h.f,{header:!0},r),n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.PROFILE,className:"nav-bar-drop-down-menu__link",onClick:t},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c")),n.a.createElement(h.f,{divider:!0}),n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.LOGOUT,className:"nav-bar-drop-down-menu__link",onClick:t},"\u0412\u044b\u0445\u043e\u0434"))))};const O="\u0421\u0435\u0439\u0447\u0430\u0441 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 \u044d\u0442\u043e\u0442 \u044d\u0442\u0430\u043f \u0443\u0436\u0435 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f. \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0412\u0430\u0448\u0435 \u0443\u0447\u0430\u0441\u0442\u0438\u0435.";var T,S,E,j;var x=Object(u.inject)(({appStore:e})=>({isAuthenticated:e.isUserAuthenticated,authenticatedUser:e.authenticatedUser,isBetsAllowed:e.isBetsAllowed,isUserAlreadyBet:e.isUserAlreadyBet}))(T=Object(u.observer)((S=class extends n.a.Component{constructor(...e){super(...e),Object(f.a)(this,"isOpen",E,this),Object(f.a)(this,"handleToggle",j,this),this.closeMenu=Object(o.action)(()=>{this.isOpen=!1})}render(){const e=this.props,t=e.isAuthenticated,r=e.authenticatedUser,a=e.isBetsAllowed,s=e.isUserAlreadyBet;return n.a.createElement(h.v,{className:"navigation-bar",color:"dark",dark:!0,expand:"md",fixed:"top"},n.a.createElement(h.e,null,n.a.createElement(w,{path:g.a.HOME,className:"navbar-brand",onClick:this.closeMenu},"Formula 1 Bets App"),n.a.createElement(h.w,{onClick:this.handleToggle}),n.a.createElement(h.d,{isOpen:this.isOpen,navbar:!0},n.a.createElement(h.s,{className:"ml-auto",navbar:!0},n.a.createElement(h.B,{nav:!0,inNavbar:!0},n.a.createElement(h.h,{nav:!0,caret:!0},"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0435"),n.a.createElement(h.g,{className:"nav-bar-drop-down-menu",right:!0},t&&n.a.createElement(h.f,{disabled:!a},n.a.createElement(w,{path:g.a.BETS,className:"nav-bar-drop-down-menu__link",disabled:!a,onClick:this.closeMenu},s?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437")),n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.RESULTS,className:"nav-bar-drop-down-menu__link",onClick:this.closeMenu},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f")),t&&n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.BETS_HISTORY,className:"nav-bar-drop-down-menu__link",onClick:this.closeMenu},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0412\u0430\u0448\u0438\u0445 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0439")))),n.a.createElement(h.B,{nav:!0,inNavbar:!0},n.a.createElement(h.h,{nav:!0,caret:!0},"\u0427\u0435\u043c\u043f\u0438\u043e\u043d\u0430\u0442"),n.a.createElement(h.g,{className:"nav-bar-drop-down-menu",right:!0},n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.CALENDAR,className:"nav-bar-drop-down-menu__link",onClick:this.closeMenu},"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c")),n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.RACERS,className:"nav-bar-drop-down-menu__link",onClick:this.closeMenu},"\u0413\u043e\u043d\u0449\u0438\u043a\u0438")),n.a.createElement(h.f,null,n.a.createElement(w,{path:g.a.TEAMS,className:"nav-bar-drop-down-menu__link",onClick:this.closeMenu},"\u041a\u043e\u043c\u0430\u043d\u0434\u044b")))),t?r&&n.a.createElement(n.a.Fragment,null,r.isAdmin&&n.a.createElement(h.t,null,n.a.createElement(w,{path:g.a.ADMIN,className:"nav-link",onClick:this.closeMenu},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430")),n.a.createElement(y,{user:r,isBetsAllowed:a,onClose:this.closeMenu})):n.a.createElement(h.t,null,n.a.createElement(w,{path:g.a.LOGIN,className:"nav-link",onClick:this.closeMenu},"\u0412\u0445\u043e\u0434"))))))}},E=Object(b.a)(S.prototype,"isOpen",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=Object(b.a)(S.prototype,"handleToggle",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.isOpen=!this.isOpen}}}),T=S))||T)||T,Z=r(20),M=r.n(Z);var R=({value:e,label:t})=>n.a.createElement("div",{className:"awesome-countdown-timer__section awesome-countdown-timer-section"},n.a.createElement("div",{className:"awesome-countdown-timer-section__time"},e),n.a.createElement("div",{className:"awesome-countdown-timer-section__label"},t));var N=({splitter:e=":"})=>n.a.createElement("div",{className:"awesome-countdown-timer__splitter"},e);const k=({className:e,withSplitter:t,duration:r})=>{const a=function(e){const t={months:"",days:"",hours:"",minutes:"",seconds:""};return e?(Math.floor(e.asMonths())>0&&(Math.floor(e.months())<10?t.months="0"+Math.floor(e.months()):t.months=Math.floor(e.months())),Math.floor(e.asDays())>0&&(Math.floor(e.days())<10?t.days="0"+Math.floor(e.days()):t.days=Math.floor(e.days())),Math.floor(e.asHours())>0&&(Math.floor(e.hours())<10?t.hours="0"+Math.floor(e.hours()):t.hours=Math.floor(e.hours())),Math.floor(e.asMinutes())>0&&(Math.floor(e.minutes())<10?t.minutes="0"+Math.floor(e.minutes()):t.minutes=Math.floor(e.minutes())),Math.floor(e.asSeconds())>0&&(Math.floor(e.seconds())<10?t.seconds="0"+Math.floor(e.seconds()):t.seconds=Math.floor(e.seconds())),t):t}(r),s=a.months,c=a.days,i=a.hours,o=a.minutes,u=a.seconds;return n.a.createElement("div",{className:"awesome-countdown-timer ".concat(e)},s&&n.a.createElement(R,{value:s,label:"Months"}),t&&s&&n.a.createElement(N,null),c&&n.a.createElement(R,{value:c,label:"Days"}),t&&c&&n.a.createElement(N,null),i&&n.a.createElement(R,{value:i,label:"Hours"}),t&&i&&n.a.createElement(N,null),o&&n.a.createElement(R,{value:o,label:"Minutes"}),t&&o&&n.a.createElement(N,null),u&&n.a.createElement(R,{value:u,label:"Seconds"}))};k.defaultProps={className:"",withSplitter:!1};var U=k;r(341);class A extends a.Component{render(){const e=this.props,t=e.className,r=e.withSplitter,a=function(e,t){const r=e?M()(e):M()(),a=M()(t),n=M.a.duration(a.diff(r));return n.asSeconds()>=0?n:null}(e.startDate,e.endDate);return n.a.createElement(U,{className:t,duration:a,withSplitter:r})}}A.defaultProps={className:"",withSplitter:!1};var I=A;r(342);var P=({startTime:e,endTime:t,className:r=""})=>n.a.createElement(I,{className:"countdown-timer "+r,startDate:e,endDate:t,withSplitter:!0});r(343);class B extends n.a.Component{render(){const e=this.props,t=e.nextRaceStartTime,r=e.nextRaceTitle,a=e.currentTimeUtcString;return n.a.createElement(h.e,{className:"next-race-notifier alert-info"},n.a.createElement(h.x,null,n.a.createElement(h.c,{xs:12,sm:8,md:8,className:"next-race-notifier__race-info"},"\u0414\u043e \u0441\u0442\u0430\u0440\u0442\u0430 \u0433\u043e\u043d\u043a\u0438",n.a.createElement("strong",{className:"next-race-notifier__race-title"},r)),n.a.createElement(h.c,{xs:12,sm:4,md:4},n.a.createElement(P,{className:"next-race-notifier__countdown-timer",startTime:a,endTime:t}))))}}var C,D,q,W=B;class F{constructor(e){this._appModel=e}get nextRace(){return this._appModel.nextRace}get currentTimeUtcString(){return this._appModel.timeWatcher.currentTimeUtcString}}var L=Object(u.inject)("headerStore")(C=Object(u.observer)((q=D=class extends n.a.Component{render(){const e=this.props,t=e.headerStore,r=e.className,a=t.nextRace,s=t.currentTimeUtcString;return n.a.createElement("header",{className:r},n.a.createElement(x,null),n.a.createElement("section",{className:"alert-info"},a&&n.a.createElement(W,{nextRaceTitle:a.prettyTitle,nextRaceStartTime:a.raceStartTime,currentTimeUtcString:s})))}},D.defaultProps={className:""},C=q))||C)||C;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var V=n.a.createElement("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"});const J=e=>{let t=e.svgRef,r=e.title,a=z(e,["svgRef","title"]);return n.a.createElement("svg",H({viewBox:"0 0 496 512",ref:t},a),r?n.a.createElement("title",null,r):null,V)},G=n.a.forwardRef((e,t)=>n.a.createElement(J,H({svgRef:t},e)));r.p,r(344);const Y=(new Date).getFullYear();var Q=({className:e=""})=>n.a.createElement("footer",{className:"".concat(e," footer")},n.a.createElement(h.e,null,n.a.createElement(h.x,{className:"footer__social-media-links"},n.a.createElement(h.c,{className:"footer__copyright"},"\xa9 2018 - ",Y," F1 fun's team"),n.a.createElement(h.c,{xs:"2"},n.a.createElement(h.x,{className:"social-media-links"},n.a.createElement(h.c,{className:"social-media-links__telegram-box"},n.a.createElement("a",{href:"https://t.me/f1funteam",className:"footer__link social-media-links__link"},n.a.createElement(G,{className:"social-media-links__icon"})))))))),$=r(33);class K extends n.a.Component{constructor(...e){super(...e),this._handleLoadSeason=()=>{this.props.onLoadSeason(this.props.season)}}render(){const e=this.props,t=e.isSeasonLoaded,r=e.seasonTitle,a=e.loadSeasonButtonCaption;return n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"section text-center"},t?r:n.a.createElement(h.b,{className:"button",color:"secondary",onClick:this._handleLoadSeason},a)),this.props.children)}}var X=K,ee=r(79),te=r(26);function re(e){return e instanceof M.a?e:M()(e)}function ae(e,t){return re(e).isAfter(re(t))}function ne(e,t,r="minute"){return(e=re(e)).add(t,r)}class se{constructor(e){this._date=e}get title(){return"\u0413\u043e\u043d\u043a\u0430"}get day(){return Object(te.b)(this._date)}get timeInterval(){return this._date?"".concat(Object(te.c)(this._date)):""}}class ce extends se{constructor(e,t){super(t),this._practiceNumber=e}get title(){return"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 ".concat(this._practiceNumber)}get timeInterval(){return this._date?"".concat(Object(te.c)(this._date)," - ").concat(Object(te.c)(ne(this._date,3===this._practiceNumber?1:1.5,"hour"))):""}}class ie extends se{get title(){return"\u041a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}get timeInterval(){return this._date?"".concat(Object(te.c)(this._date)," - ").concat(Object(te.c)(ne(this._date,1,"hour"))):""}}class oe{constructor(e){this._roundInfo=e,this.racerStandings=[]}get roundId(){return this._roundInfo.roundId}get _firstPracticeStartTime(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[0]||""}get _secondPracticeStartTime(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[1]||""}get _thirdPracticeStartTime(){return this._roundInfo.roundSchedule&&this._roundInfo.roundSchedule.practices[2]||""}get _qualificationStartTime(){return this._roundInfo.roundSchedule?this._roundInfo.roundSchedule.qualification:""}get raceStartTime(){return this._roundInfo.roundSchedule?this._roundInfo.roundSchedule.race:""}get countryName(){return this._roundInfo.circuit.countryName}get circuitUrl(){return this._roundInfo.circuit.url}get raceUrl(){return this._roundInfo.raceUrl}get flagUrl(){return Object(ee.findFlagUrlByCountryName)(this.countryName)}get raceTitle(){return"Formula 1 ".concat(this._roundInfo.raceName," ").concat(this._roundInfo.season)}get practices(){return[new ce(1,this._firstPracticeStartTime),new ce(2,this._secondPracticeStartTime),new ce(3,this._thirdPracticeStartTime)]}get qualification(){return new ie(this._qualificationStartTime)}get race(){return new se(this.raceStartTime)}get weekendInterval(){return"".concat(Object(te.f)(this._firstPracticeStartTime)," - ").concat(Object(te.f)(this.raceStartTime))}addRacerStandings(e=[]){return this.racerStandings=e,this}}var ue=r(65),le=r(123),pe=r.n(le);r(346);var de=e=>{let t=e.className,r=e.children,a=Object(ue.a)(e,["className","children"]);return n.a.createElement("a",Object.assign({className:pe()("text-link",t)},a),r)};r(347);var he=({className:e="",countryName:t,flagUrl:r,countryUrl:a})=>n.a.createElement("div",{className:"country-info ".concat(e)},n.a.createElement("div",{className:"country-info__flag"},n.a.createElement("img",{className:"country-info__flag-image",src:r,alt:t})),n.a.createElement(de,{href:a,target:"_blank",className:"country-info__country-name"},t)),me=(r(348),r(47));class fe extends me.a{constructor({firstName:e,lastName:t,number:r,abbreviation:a,points:n,nationality:s}){super(e,t,r,a,n,s)}get flagUrl(){return Object(ee.findFlagUrlByNationality)(this.nationality)}}r(349);var be=({className:e="",flagUrl:t="",name:r="",code:a})=>n.a.createElement("div",{className:"racer-view ".concat(e),title:r},t&&n.a.createElement("img",{className:"racer-view__image",src:t,alt:r}),n.a.createElement("span",null,a));class ge extends n.a.Component{render(){const e=this.props,t=e.racers,r=e.rowSize,a=t.length/r>1?t.length/r:1;return Array(a).fill(0).map((e,a)=>t.slice(a*r,a*r+r)).map((e,t)=>n.a.createElement("div",{key:t,className:"racer-standings-widget__row"},e.map((e,a)=>n.a.createElement("div",{className:"racer-standings-widget__racer",key:e.code},n.a.createElement("div",{className:"racer-standings-widget__racer-pos-number"},a+(t*r+1)),n.a.createElement(be,{className:"racer-standings-widget__racer-name",code:e.code,name:e.name})))))}}ge.defaultProps={rowSize:20};var _e,ve,we,ye=r(63);var Oe=(_e=Object(u.inject)(e=>({isBetsAllowed:e.homePageStore.isBetsAllowed,isUserAlreadyBet:e.homePageStore.isUserAlreadyBet,isAuthenticated:e.homePageStore.isAuthenticated,nextRaceRoundId:e.homePageStore.nextWeekend.roundId})),Object(m.a)(ve=_e(ve=Object(u.observer)((we=class extends n.a.Component{constructor(...e){super(...e),this._handleBetButtonClick=()=>{this.props.history.push(this._canBet?g.a.BETS:g.a.RESULTS)}}get _canBet(){const e=this.props,t=e.isBetsAllowed,r=e.roundId,a=e.nextRaceRoundId;return t&&a===r}render(){const e=this.props,t=e.isBetsAllowed,r=e.isUserAlreadyBet,a=e.isAuthenticated;let s="\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u043e\u0432";return e.roundId===e.nextRaceRoundId&&(s=t?a?r?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437":"\u0412\u043e\u0439\u0442\u0438 \u0434\u043b\u044f \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f":"\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u043e\u0432"),n.a.createElement(ye.a,{onClick:this._handleBetButtonClick},s)}},Object(b.a)(we.prototype,"_canBet",[o.computed],Object.getOwnPropertyDescriptor(we.prototype,"_canBet"),we.prototype),ve=we))||ve)||ve)||ve);r(354);class Te extends n.a.Component{render(){const e=this.props,t=e.raceInfo,r=e.infoText,a=t.roundId,s=t.flagUrl,c=t.countryName,i=t.raceTitle,o=t.weekendInterval,u=t.practices,l=t.qualification,p=t.race,d=t.circuitUrl,m=t.raceUrl,f=t.racerStandings;return n.a.createElement(h.e,{className:"race-info-panel"},n.a.createElement(h.x,null,n.a.createElement(h.c,{xs:12},n.a.createElement(he,{className:"race-info-panel__country-info",countryName:c,flagUrl:s,countryUrl:d}),n.a.createElement(de,{target:"_blank",href:m,className:"race-info-panel__grand-prix-title"},i))),n.a.createElement(h.x,null,n.a.createElement(h.c,{className:"race-info-panel__weekend-interval"},o)),n.a.createElement(h.x,{className:"justify-content-around section race-info-panel__weekend-schedule"},n.a.createElement(h.c,{className:"race-info-panel__practice-list",md:5},u.map(({title:e,day:t,timeInterval:r})=>n.a.createElement(h.x,{className:"race-info-panel__stage-info",key:e.split(" ").join("_")},n.a.createElement(h.c,{xs:5},e),n.a.createElement(h.c,{xs:2},t.toUpperCase()),n.a.createElement(h.c,null,r)))),n.a.createElement(h.c,{className:"race-info-panel__race-description",md:5},n.a.createElement(h.x,{className:"race-info-panel__stage-info"},n.a.createElement(h.c,{xs:5},l.title),n.a.createElement(h.c,{xs:2},l.day.toUpperCase()),n.a.createElement(h.c,null,l.timeInterval)),n.a.createElement(h.x,{className:"race-info-panel__stage-info"},n.a.createElement(h.c,{xs:5},p.title),n.a.createElement(h.c,{xs:2},p.day.toUpperCase()),n.a.createElement(h.c,null,p.timeInterval)))),f.length>0&&n.a.createElement(ge,{racers:f}),n.a.createElement(h.x,null,n.a.createElement(h.c,null,n.a.createElement(Oe,{roundId:a}))),n.a.createElement("hr",{className:"race-info-panel__underscore"}),r&&n.a.createElement(h.x,null,n.a.createElement(h.c,null,n.a.createElement(h.l,{color:"muted"},r))))}}Te.defaultProps={infoText:""};var Se=Te;function Ee({races:e}){return e.map(e=>n.a.createElement("section",{key:e.roundId,className:"section race-info-wrapper"},n.a.createElement(Se,{raceInfo:e,infoText:O})))}var je=class{constructor({season:e="",isLoaded:t=!1,weekends:r=[]}){this.season=e,this.isLoaded=t,this.weekends=r}};var xe=function({season:e,onLoadSeasonData:t}){const r=e.season,a=e.isLoaded,s=e.weekends,c="\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u0435\u0437\u043e\u043d\u0430 ".concat(r);return n.a.createElement(X,{key:r,season:r,isSeasonLoaded:a,seasonTitle:c,loadSeasonButtonCaption:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0441\u0435\u0437\u043e\u043d\u0430 ".concat(r),onLoadSeason:()=>{t(r)}},n.a.createElement(Ee,{races:s}))};function Ze({weekend:e,isBetsAllowed:t}){return n.a.createElement("section",{className:"section colors--very-light-red"},n.a.createElement(Se,{raceInfo:e,commandButton:Oe,infoText:t?"\u0421\u043f\u0435\u0448\u0438\u0442\u0435 \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043a\u0430 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 \u044d\u0442\u043e\u0442 \u044d\u0442\u0430\u043f \u0435\u0449\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f.":O}))}var Me=function({seasonModel:e,nextWeekend:t,isBetsAllowed:r,currentSeasonRacesCount:a}){const s=e.season,c=e.weekends;return n.a.createElement(n.a.Fragment,null,t&&n.a.createElement(Ze,{weekend:t,isBetsAllowed:r}),c.length>0&&c.length!==a&&n.a.createElement("section",{className:"section text-center"},"\u0420\u0430\u043d\u0435\u0435 \u0432 \u0441\u0435\u0437\u043e\u043d\u0435 ",s),c.length>0&&n.a.createElement(Ee,{races:c}))};class Re extends n.a.Component{render(){const e=this.props,t=e.isBetsAllowed,r=e.nextWeekend,a=e.seasons,s=void 0===a?[]:a,c=e.currentSeason,i=e.currentSeasonRacesCount,o=e.onLoadHistory;return n.a.createElement("div",{className:"home-page"},s.map(e=>c===e.season?n.a.createElement(Me,{key:e.season,isBetsAllowed:t,nextWeekend:r,seasonModel:e,currentSeasonRacesCount:i}):n.a.createElement(xe,{key:e.season,season:e,onLoadSeasonData:o})))}}var Ne=Re,ke=(r(355),Object(u.inject)(({homePageStore:e})=>{const t=e.nextWeekend,r=e.isBetsAllowed,a=e.currentSeason,n=e.currentSeasonRacesCount;return{nextWeekend:t,isBetsAllowed:r,currentSeason:a,seasons:e.seasons,currentSeasonRacesCount:n,onLoadHistory:t=>e.loadSeasonHistory(t)}})(Ne)),Ue=r(472),Ae=r(46);var Ie=Object(u.observer)(({form:e})=>{const t=e.$(Ae.a.LOGIN),r=t.error,a=Boolean(r),s=e.$(Ae.a.PASSWORD),c=s.error,i=Boolean(c);return n.a.createElement(h.i,null,n.a.createElement(h.k,null,n.a.createElement(h.n,{htmlFor:t.id},t.label),n.a.createElement(h.m,Object.assign({},t.bind(),{invalid:a,valid:t.isDirty&&!a})),n.a.createElement(h.j,{valid:!a},t.error)),n.a.createElement(h.k,null,n.a.createElement(h.n,{htmlFor:s.id},s.label),n.a.createElement(h.m,Object.assign({},s.bind({type:"password"}),{invalid:i,valid:s.isDirty&&!i})),n.a.createElement(h.j,{valid:!i},c)),n.a.createElement(h.b,{color:"primary",type:"submit",onClick:e.onSubmit,disabled:e.isEmpty||!e.isValid,style:{width:"100%"}},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))});var Pe,Be=Object(u.observer)(({form:e})=>{const t=e.$(Ae.b.NAME),r=t.error,a=Boolean(r),s=e.$(Ae.b.LOGIN),c=s.error,i=Boolean(c),o=e.$(Ae.b.PASSWORD),u=o.error,l=Boolean(u);return n.a.createElement(h.i,null,n.a.createElement(h.k,null,n.a.createElement(h.n,{htmlFor:t.id},t.label),n.a.createElement(h.m,Object.assign({},t.bind(),{invalid:a,valid:t.isDirty&&!a})),n.a.createElement(h.j,{valid:!a},r)),n.a.createElement(h.k,null,n.a.createElement(h.n,{htmlFor:s.id},s.label),n.a.createElement(h.m,Object.assign({},s.bind(),{invalid:i,valid:s.isDirty&&!i})),n.a.createElement(h.j,{valid:!i},c)),n.a.createElement(h.k,null,n.a.createElement(h.n,{htmlFor:o.id},o.label),n.a.createElement(h.m,Object.assign({},o.bind({type:"password"}),{invalid:l,valid:o.isDirty&&!l})),n.a.createElement(h.j,{valid:!l},u),n.a.createElement(h.l,{color:"muted"},"\u0412\u0410\u0416\u041d\u041e! \u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0412\u0430\u0448\u0438 \u043f\u0430\u0440\u043e\u043b\u0438 \u043e\u0442 \u0431\u0430\u043d\u043a\u043e\u0432\u043a\u0438\u0445 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u0430\u043a\u0430\u0443\u043d\u0442\u043e\u0432. ",n.a.createElement("br",null),"\u042d\u0442\u043e\u0442 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043a\u0430\u043a-\u0442\u043e \u043e\u0441\u043e\u0431\u043e \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u0435\u0433\u043e \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043b\u043e\u0443\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u0438\u043a\u0438. ",n.a.createElement("br",null),"\u041d\u0443, \u044f \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0434\u0438\u043b \u0435\u0441\u043b\u0438 \u0447\u0442\u043e :)")),n.a.createElement(ye.a,{type:"submit",disabled:e.isEmpty||!e.isValid,onClick:e.onSubmit,style:{width:"100%"}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))});r(356);var Ce,De=Object(u.inject)("loginPageStore")(Pe=Object(m.a)(Pe=Object(u.observer)(Pe=class extends n.a.Component{constructor(...e){super(...e),this.handleRegisterNew=()=>{this.props.loginPageStore.toggleRegisterNewForm()}}get _redirectPath(){return(this.props.location.state||{from:{pathname:"/"}}).from}render(){const e=this.props.loginPageStore,t=e.isRegisterNew,r=e.isUserAuthenticated,a=e.form;return r?n.a.createElement(Ue.a,{to:this._redirectPath}):n.a.createElement(h.e,{tag:"section",className:"page"},n.a.createElement(h.x,null,n.a.createElement(h.c,{lg:{size:6,offset:3},md:{size:8,offset:2}},n.a.createElement(h.x,null,n.a.createElement(h.c,null,n.a.createElement("h1",{className:"page-title"},t?"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442":"\u0412\u0445\u043e\u0434 \u0432 F1 Bets App"),n.a.createElement("div",{className:"text-muted"},"\u0438\u043b\u0438",n.a.createElement(h.b,{color:"link",onClick:this.handleRegisterNew},t?" \u0432\u043e\u0439\u0442\u0438 \u0432 \u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442":" \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))),n.a.createElement(h.x,{className:"login-form-container"},n.a.createElement(h.c,null,t?n.a.createElement(Be,{form:a}):n.a.createElement(Ie,{form:a}))))))}})||Pe)||Pe)||Pe;var qe=Object(u.inject)("logoutPageStore")(Ce=Object(u.observer)(Ce=class extends n.a.Component{componentDidMount(){this.props.logoutPageStore.logout()}render(){const e=this.props.logoutPageStore.isUserAuthenticated;return n.a.createElement(h.e,{className:"page"},n.a.createElement(h.x,null,e?n.a.createElement(h.c,null,"\u0418\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430..."):n.a.createElement(h.c,{lg:{size:6,offset:3},md:{size:8,offset:2}},n.a.createElement("div",null,"\u041c\u044b \u0431\u0443\u0434\u0435\u043c \u0441\u043a\u0443\u0447\u0430\u0442\u044c \u043f\u043e \u0442\u0435\u0431\u0435 :)"),n.a.createElement("div",null,n.a.createElement(v.a,{to:g.a.HOME},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")))))}})||Ce)||Ce,We=r(471);var Fe=e=>{let t=e.component,r=e.isAuthenticated,a=void 0!==r&&r,s=e.isCurrentUserAdmin,c=void 0!==s&&s,i=e.isPrivate,o=void 0!==i&&i,u=e.onlyForAdmins,l=void 0!==u&&u,p=Object(ue.a)(e,["component","isAuthenticated","isCurrentUserAdmin","isPrivate","onlyForAdmins"]);return n.a.createElement(We.a,Object.assign({},p,{render:e=>l&&!c?n.a.createElement(Ue.a,{to:{pathname:g.a.HOME}}):o&&!a?n.a.createElement(Ue.a,{to:{pathname:g.a.LOGIN,state:{from:e.location}}}):n.a.createElement(t,p)}))};const Le=n.a.lazy(()=>r.e(9).then(r.bind(null,493))),He=n.a.lazy(()=>r.e(3).then(r.bind(null,491))),ze=n.a.lazy(()=>r.e(5).then(r.bind(null,494))),Ve=n.a.lazy(()=>Promise.all([r.e(11),r.e(7)]).then(r.bind(null,490))),Je=n.a.lazy(()=>r.e(6).then(r.bind(null,495))),Ge=n.a.lazy(()=>r.e(4).then(r.bind(null,492))),Ye=n.a.lazy(()=>r.e(8).then(r.bind(null,489))),Qe=n.a.lazy(()=>r.e(10).then(r.bind(null,496)));var $e=[{exact:!0,path:g.a.HOME,component:ke,id:Object($.a)()},{path:g.a.LOGIN,component:De,id:Object($.a)()},{path:g.a.LOGOUT,component:qe,id:Object($.a)()},{isPrivate:!0,path:g.a.BETS,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Le,null)),id:Object($.a)()},{isPrivate:!0,path:g.a.BETS_HISTORY,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Ye,null)),id:Object($.a)()},{path:g.a.RESULTS,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(He,null)),id:Object($.a)()},{path:g.a.RACERS,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Je,null)),id:Object($.a)()},{path:g.a.TEAMS,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(ze,null)),id:Object($.a)()},{path:g.a.CALENDAR,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Ge,null)),id:Object($.a)()},{isPrivate:!0,onlyForAdmins:!0,path:g.a.ADMIN,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Ve,null)),id:Object($.a)()},{isPrivate:!0,path:g.a.PROFILE,component:()=>n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",null)},n.a.createElement(Qe,null)),id:Object($.a)()}];r(357);var Ke=()=>n.a.createElement("div",{className:"loader__overlay"},n.a.createElement("div",{className:"loader"},n.a.createElement("div",{className:"loader__plate loader__plate--first"}),n.a.createElement("div",{className:"loader__plate loader__plate--second"}),n.a.createElement("div",{className:"loader__plate loader__plate--third"}))),Xe=r(276),et=r.n(Xe);var tt,rt,at,nt,st=Object(u.inject)(e=>({pendingTasksCount:e.appStore._appModel._operationManager.pendingTasksCount,qualificationStartTime:e.appStore.nextRace&&e.appStore.nextRace.qualifyingStartTime,isBetsAllowed:e.appStore.isBetsAllowed,currentTime:e.appStore.currentTime}))(({pendingTasksCount:e,qualificationStartTime:t,isBetsAllowed:r,currentTime:a})=>n.a.createElement(h.e,{className:"text-center bg-secondary"},n.a.createElement(h.x,null,n.a.createElement(h.c,null,"DEVELOPMENT MODE ON!!!"),n.a.createElement(h.c,{className:r?"bg-success":"bg-warning"},"Is Bets Allowed: ",r.toString()),n.a.createElement(h.c,null,e),n.a.createElement(h.c,null,"Qualification start Time: ",Object(te.d)(t)),n.a.createElement(h.c,null,"Current Time: ",Object(te.e)(a)))));r(358);let ct=Object(u.observer)((rt=class extends a.Component{constructor(...e){super(...e),Object(f.a)(this,"isVisible",at,this),this.toggle=Object(o.action)(()=>{this.isVisible=!this.isVisible})}render(){return n.a.createElement(n.a.Fragment,null,this.isVisible?n.a.createElement("div",{className:"dev-tools"},n.a.createElement("div",{className:"dev-tools__tools"},n.a.createElement(st,null),n.a.createElement(h.e,null,n.a.createElement(h.x,null,n.a.createElement(h.c,null,n.a.createElement(it,null))))),n.a.createElement(h.b,{color:"danger",size:"sm",className:"dev-tools__close-button",onClick:this.toggle},"x")):n.a.createElement("div",{title:"Open dev tools",className:"dev-tools--collapsed-mode",onClick:this.toggle},"open"),n.a.createElement(et.a,null))}},at=Object(b.a)(rt.prototype,"isVisible",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=rt))||tt,it=Object(u.inject)("devToolsStore")(nt=Object(u.observer)(nt=class extends a.Component{constructor(...e){super(...e),this.handleMakeAdmin=()=>{this.props.devToolsStore.makeUserAdmin()}}render(){const e=this.props.devToolsStore.currentUser;return e?n.a.createElement("div",null,e.name,": ",e.isAdmin?"Admin":n.a.createElement("button",{onClick:this.handleMakeAdmin},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u043e\u043c")):null}})||nt)||nt;var ot,ut=ct;var lt=Object(u.inject)("appStore")(ot=Object(m.a)(ot=Object(u.observer)(ot=class extends a.Component{componentDidMount(){this.props.appStore.startTimeWatcher()}componentWillUnmount(){this.props.appStore.stopTimeWatcher()}render(){const e=this.props.appStore,t=e.hasPendingTasks,r=e.isUserAuthenticated,a=e.isUserAdmin,s=e.isProduction;return n.a.createElement(n.a.Fragment,null,t&&n.a.createElement(Ke,null),n.a.createElement("div",{className:"layout"},!s&&n.a.createElement(ut,null),n.a.createElement(L,{className:"layout__header"}),n.a.createElement("main",{className:"layout__main colors--very-light-grey"},$e.map(e=>n.a.createElement(Fe,Object.assign({key:e.id,isAuthenticated:r,isCurrentUserAdmin:a},e)))),n.a.createElement(Q,{className:"layout__footer"})))}})||ot)||ot)||ot,pt=r(19);var dt=class{constructor(e){this._appModel=e}get isProduction(){return this._appModel.isProduction}get currentTime(){return this._appModel.timeWatcher.currentTime}get isBetsAllowed(){return this._appModel.isBetsAllowed}get hasPendingTasks(){return this._appModel.operationManager.hasPendingTasks}get authenticatedUser(){return this._appModel.session.authenticatedUser}get isUserAuthenticated(){return this._appModel.isUserAuthenticated}get isUserAlreadyBet(){return this._appModel.isUserAlreadyBet}get isUserAdmin(){return this._appModel.isUserAdmin}startTimeWatcher(){this._appModel.timeWatcher.start()}stopTimeWatcher(){this._appModel.timeWatcher.stop()}};var ht,mt=class{constructor(e){this._appModel=e}get currentUser(){return this._appModel.session.authenticatedUser}makeUserAdmin(){const e=new _.a(Object(pt.a)({},this.currentUser,{isAdmin:!0}));return this._appModel.usersModel.addOrUpdate(e)}};let ft=(ht=class{constructor(e){this._appModel=e}get isAuthenticated(){return this._appModel.isUserAuthenticated}get isUserAlreadyBet(){return this._appModel.isUserAlreadyBet}get isBetsAllowed(){return this._appModel.isBetsAllowed}get currentSeason(){return this._appModel.currentSeason}get currentSeasonRacesCount(){return this._appModel.currentSeasonHistory.races.length}get nextWeekend(){const e=this._appModel.nextRace;return e?new oe(e):null}get seasons(){return this._appModel.formulaOneHistory.historiesBySeason.map(({season:e,isLoaded:t,races:r})=>{const a=this._mapRacesToWeekendsModel(e===this.currentSeason?r.filter(e=>this.nextWeekend&&this.nextWeekend.raceStartTime!==e.raceStartTime&&!ae(e.raceStartTime,this.nextWeekend.raceStartTime)):r,e).reverse();return new je({season:e,isLoaded:t,weekends:a})})}loadSeasonHistory(e){this._appModel.loadSeasonData(e)}_mapRacesToWeekendsModel(e,t){if(e.length>0){const r=this._appModel.formulaOneHistory.getRacesResults(t);return e.map((e,t)=>{const a=new oe(e);if(r.length>0&&t<r.length){const e=r[t].racersStandings.map(e=>new fe(e));return a.addRacerStandings(e)}return a})}return[]}},Object(b.a)(ht.prototype,"currentSeasonRacesCount",[o.computed],Object.getOwnPropertyDescriptor(ht.prototype,"currentSeasonRacesCount"),ht.prototype),Object(b.a)(ht.prototype,"nextWeekend",[o.computed],Object.getOwnPropertyDescriptor(ht.prototype,"nextWeekend"),ht.prototype),Object(b.a)(ht.prototype,"seasons",[o.computed],Object.getOwnPropertyDescriptor(ht.prototype,"seasons"),ht.prototype),ht);var bt,gt,_t,vt,wt,yt=r(272),Ot=r(2),Tt=r.n(Ot),St=r(5),Et=r(180),jt=r(231);let xt=(bt=class{constructor(e,t){var r=this;Object(f.a)(this,"userEditForm",gt,this),Object(f.a)(this,"passwordResetForm",_t,this),Object(f.a)(this,"editUser",vt,this),this.deleteUser=function(){var e=Object(St.a)(Tt.a.mark((function e(t){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?")){e.next=4;break}return e.next=3,r._appModel.usersModel.deleteUser(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.resetPassword=e=>{const t=this._findUserById(e);t&&window.confirm("\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e?")&&window.confirm("\u0422\u044b \u0443\u0432\u0435\u0440\u0435\u043d, \u0447\u0442\u043e \u0445\u043e\u0447\u0435\u0448\u044c \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e ".concat(t.login))&&this._showPasswordResetDialog(e)},Object(f.a)(this,"_showPasswordResetDialog",wt,this),this._appModel=e,this._storeApiUrl=t}get users(){return this._appModel.usersModel.users}get storeApiUrl(){return this._storeApiUrl}_closeUserEditDialog(){this.userEditForm=null}_closePasswordResetDialog(){this.passwordResetForm=null}_findUserById(e){return this.users.find(t=>t.id===e)}},gt=Object(b.a)(bt.prototype,"userEditForm",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=Object(b.a)(bt.prototype,"passwordResetForm",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(b.a)(bt.prototype,"users",[o.computed],Object.getOwnPropertyDescriptor(bt.prototype,"users"),bt.prototype),vt=Object(b.a)(bt.prototype,"editUser",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const t=this._findUserById(e);t&&(this.userEditForm=new Et.b({user:t,onUserUpdate:e=>this._appModel.usersModel.addOrUpdate(e),onSuccess:()=>{this._closeUserEditDialog()},onCancel:()=>{this._closeUserEditDialog()}}))}}}),wt=Object(b.a)(bt.prototype,"_showPasswordResetDialog",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return t=>{const r=this._findUserById(t);r&&(this.passwordResetForm=new jt.b({user:r,onSuccess:function(){var r=Object(St.a)(Tt.a.mark((function r(a){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e._appModel.usersModel.resetPassword(t,a);case 2:e._closePasswordResetDialog();case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),onCancel:()=>{this._closePasswordResetDialog()}}))}}}),Object(b.a)(bt.prototype,"_closeUserEditDialog",[o.action],Object.getOwnPropertyDescriptor(bt.prototype,"_closeUserEditDialog"),bt.prototype),Object(b.a)(bt.prototype,"_closePasswordResetDialog",[o.action],Object.getOwnPropertyDescriptor(bt.prototype,"_closePasswordResetDialog"),bt.prototype),bt);var Zt,Mt=class{constructor(e,t){const r=d.getRaceStoreApiUrl(),a=d.getUserStoreApiUrl();this._racesSectionStore=new yt.a(e,r,t),this._usersSectionStore=new xt(e,a)}get racesSectionStore(){return this._racesSectionStore}get usersSectionStore(){return this._usersSectionStore}};let Rt=(Zt=class{constructor(e){this._appModel=e}get racers(){return this._appModel.currentSeasonHistory.racers}get currentUser(){return this._appModel.session.authenticatedUser}get nextRaceTitle(){return this._appModel.nextRace?this._appModel.nextRace.prettyTitle:""}get usersBet(){if(!this._appModel.isUserAlreadyBet)return{};const e=this._appModel.nextRace.bets.find(({userInfo:e})=>e.id===this.currentUser.id);return e?e.betsMap:{}}get isBetsAllowed(){return this._appModel.isBetsAllowed}submitBet(e){return this._appModel.addNewBet(e)}},Object(b.a)(Zt.prototype,"currentUser",[o.computed],Object.getOwnPropertyDescriptor(Zt.prototype,"currentUser"),Zt.prototype),Object(b.a)(Zt.prototype,"nextRaceTitle",[o.computed],Object.getOwnPropertyDescriptor(Zt.prototype,"nextRaceTitle"),Zt.prototype),Object(b.a)(Zt.prototype,"usersBet",[o.computed],Object.getOwnPropertyDescriptor(Zt.prototype,"usersBet"),Zt.prototype),Zt);class Nt{constructor(e){this._appModel=e}get userBets(){return this._appModel.authUserBets}}var kt,Ut=r(124);var At=(kt=class{constructor(e){this._appModel=e}get races(){return this._appModel.currentSeasonHistory.rounds.map(e=>{const t=e.raceName,r=e.roundSchedule,a=e.roundId;return new Ut.a({raceName:t,raceTime:r.race,qualTime:r.qualification,practice1Time:r.practices[0],practice2Time:r.practices[1],practice3Time:r.practices[2],id:a})})}get nextRace(){if(!this._appModel.nextRace)return null;const e=this._appModel.nextRace;return this.races.find(t=>t.raceId===e.roundId)}get isRaceWeekend(){return!this._appModel.isBetsAllowed}get currentSeason(){return this._appModel.currentSeason}},Object(b.a)(kt.prototype,"races",[o.computed],Object.getOwnPropertyDescriptor(kt.prototype,"races"),kt.prototype),Object(b.a)(kt.prototype,"nextRace",[o.computed],Object.getOwnPropertyDescriptor(kt.prototype,"nextRace"),kt.prototype),Object(b.a)(kt.prototype,"isRaceWeekend",[o.computed],Object.getOwnPropertyDescriptor(kt.prototype,"isRaceWeekend"),kt.prototype),kt),It=r(49),Pt=r.n(It),Bt=r(50),Ct=r.n(Bt);const Dt=e=>{e.invalidate("This is a generic error message!")};class qt extends Pt.a{constructor(e,t,r=Dt){super({fields:e},{options:{showErrorsOnChange:!0,validateOnChange:!0},plugins:{dvr:Ct.a},hooks:{onSuccess:t,onError:r}})}}var Wt,Ft,Lt=qt;let Ht=(Wt=class{constructor(e){var t=this;Object(f.a)(this,"isRegisterNew",Ft,this),this._appModel=e,this._loginForm=new Lt(Ae.c,function(){var e=Object(St.a)(Tt.a.mark((function e(r){var a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._appModel.session.login(r.values());case 2:if(!0===(a=e.sent)){e.next=6;break}return alert(a),e.abrupt("return");case 6:r.clear();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this._registerNewAccountForm=new Lt(Ae.d,function(){var e=Object(St.a)(Tt.a.mark((function e(r){var a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._appModel.session.signIn(r.values());case 2:if(!0===(a=e.sent)){e.next=6;break}return alert(a),e.abrupt("return");case 6:r.clear();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}get isUserAuthenticated(){return this._appModel.session.isAuthenticated}get form(){return this.isRegisterNew?this._registerNewAccountForm:this._loginForm}toggleRegisterNewForm(){this.isRegisterNew=!this.isRegisterNew}login({login:e,password:t}){return this._appModel.session.login({login:e,password:t})}signIn({name:e,login:t,password:r}){return this._appModel.session.signIn({name:e,login:t,password:r})}},Ft=Object(b.a)(Wt.prototype,"isRegisterNew",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(b.a)(Wt.prototype,"form",[o.computed],Object.getOwnPropertyDescriptor(Wt.prototype,"form"),Wt.prototype),Object(b.a)(Wt.prototype,"toggleRegisterNewForm",[o.action],Object.getOwnPropertyDescriptor(Wt.prototype,"toggleRegisterNewForm"),Wt.prototype),Wt);class zt{constructor(e){this._appModel=e}get isUserAuthenticated(){return this._appModel.session.isAuthenticated}logout(){return this._appModel.session.logout()}}var Vt=r(38),Jt=r(76),Gt=r.n(Jt);function Yt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(St.a)(Tt.a.mark((function e(t){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.a.get(t);case 3:return e.abrupt("return",e.sent.data.MRData);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function $t(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(St.a)(Tt.a.mark((function e(t){var r;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt("".concat(t,"?limit=0"));case 3:return r=e.sent.total,e.abrupt("return",Yt("".concat(t,"?limit=").concat(r)));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}class Xt{constructor(e){const t=e.locality,r=e.country,a=e.lat,n=e.long,s=e.alt;this.locality=t,this.country=r,this.lat=a,this.long=n,this.alt=s}}class er{constructor(e){const t=e.circuitId,r=e.url,a=e.circuitName;this.circuitId=t,this.url=r,this.circuitName=a,this.location=new Xt(e.Location)}}class tr{constructor({season:e}){this.season=e}}class rr{constructor({driverId:e,url:t,permanentNumber:r,givenName:a,familyName:n,dateOfBirth:s,code:c,nationality:i}){this.driverId=e,this.url=t,this.permanentNumber=r,this.givenName=a,this.familyName=n,this.dateOfBirth=s,this.code=c,this.nationality=i}}class ar{constructor({constructorId:e,url:t,name:r,nationality:a}){this.constructorId=e,this.url=t,this.name=r,this.nationality=a}}class nr{constructor(e){const t=e.number,r=e.position;this.number=t,this.position=r,this.driver=new rr(e.Driver),this.constructor=new ar(e.Constructor)}}class sr extends tr{constructor(e){super(e),this.round=e.round,this.url=e.url,this.raceName=e.raceName,this.date=e.date,this.time=e.time,this.circuit=new er(e.Circuit),this.qualifyingResults=(e.QualifyingResults||[]).map(e=>new nr(e))}}class cr extends tr{constructor(e){super(e),this.races=e.Races.map(e=>new sr(e))}}class ir{constructor(e){this.rank=e.rank,this.lap=e.lap,this.time=e.Time,this.averageSpeed=e.AverageSpeed}}class or{constructor(e){const t=e.number,r=e.position,a=e.points,n=e.grid,s=e.laps,c=e.status,i=e.Time;this.number=t,this.position=r,this.points=a,this.driver=new rr(e.Driver),this.constructor=new ar(e.Constructor),this.grid=n,this.laps=s,this.status=c,this.time=Object(pt.a)({},i),this.fastestLap=e.FastestLap?new ir(e.FastestLap):void 0}}class ur extends sr{constructor(e){super(e),this.results=e.Results.map(e=>new or(e))}}class lr extends cr{constructor(e){super(e),this.races=e.Races.map(e=>new ur(e))}}class pr extends tr{constructor(e){super(e),this.standingsLists=e.StandingsLists.map(e=>e)}}class dr extends tr{constructor({season:e,round:t}){super({season:e}),this.round=t}}class hr{constructor({position:e,positionText:t,points:r,wins:a}){this.position=e,this.positionText=t,this.points=r,this.wins=a}}var mr=class extends hr{constructor(e){super(e),this.driver=new rr(e.Driver),this.constructors=e.Constructors.map(e=>new ar(e))}};class fr extends dr{constructor(e){super(e),this.driverStandings=e.DriverStandings.map(e=>new mr(e))}}class br extends pr{constructor(e){super(e),this.standingsLists=e.StandingsLists.map(e=>new fr(e))}}class gr extends hr{constructor(e){super(e),this.constructor=new ar(e.Constructor)}}class _r extends dr{constructor(e){super(e),this.constructorStandings=e.ConstructorStandings.map(e=>new gr(e))}}class vr extends pr{constructor({season:e,StandingsLists:t}){super({season:e,StandingsLists:t}),this.standingsLists=t.map(e=>new _r(e))}}class wr extends tr{constructor(e){super(e),this.drivers=e.Drivers.map(e=>new rr(e))}}class yr{static _createJsonUrl(...e){return"".concat("https://ergast.com/api/f1","/").concat(e.filter(e=>Boolean(e)).join("/"),".json")}static getDriverStandings(e){return Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt(yr._createJsonUrl(e,"driverStandings"));case 2:return r=t.sent,t.abrupt("return",new br(r.StandingsTable));case 4:case"end":return t.stop()}}),t)})))()}static getConstructorStandings(e){return Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt(yr._createJsonUrl(e,"constructorStandings"));case 2:return r=t.sent,t.abrupt("return",new vr(r.StandingsTable));case 4:case"end":return t.stop()}}),t)})))()}static getRaceSchedule(e="2018",t="all"){return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Yt(yr._createJsonUrl(e,"all"!==t?t:void 0));case 2:return a=r.sent,r.abrupt("return",new cr(a.RaceTable));case 4:case"end":return r.stop()}}),r)})))()}static getRaceResults(e,t="2018"){return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Yt(yr._createJsonUrl(t,e,"results"));case 2:return a=r.sent,r.abrupt("return",new lr(a.RaceTable));case 4:case"end":return r.stop()}}),r)})))()}static getAllRacesResults(e="2018"){return Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$t(yr._createJsonUrl(e,"results"));case 2:return r=t.sent,t.abrupt("return",new lr(r.RaceTable));case 4:case"end":return t.stop()}}),t)})))()}static getDrivers(e="2018"){return Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt(yr._createJsonUrl(e,"drivers"));case 2:return r=t.sent,t.abrupt("return",new wr(r.DriverTable));case 4:case"end":return t.stop()}}),t)})))()}static getQualifyingResults(e="2018"){return Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$t(yr._createJsonUrl(e,"qualifying"));case 2:return r=t.sent,t.abrupt("return",new cr(r.RaceTable));case 4:case"end":return t.stop()}}),t)})))()}}var Or,Tr,Sr=yr,Er=r(125);var jr,xr=(Or=class{constructor(e){var t=this;Object(f.a)(this,"racerStandingList",Tr,this),this.loadRacerStandings=()=>this._appModel.operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function e(){var r,a,n,s;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr.getDriverStandings(t.currentSeason);case 2:r=e.sent,a=Object(Vt.a)(r.standingsLists,1),(n=a[0])&&(s=n.driverStandings.map(e=>{const t=e.driver,r=Object(Vt.a)(e.constructors,1)[0];return new Er.a({pos:e.position,racerFullName:"".concat(t.givenName," ").concat(t.familyName),racerPoints:e.points,racerId:t.code,racerNumber:t.permanentNumber,racerUrl:t.url,constructorName:r?r.name:"",constructorUrl:r?r.url:"",racerNationality:t.nationality})}),Object(o.runInAction)(()=>{t.racerStandingList=s}));case 5:case"end":return e.stop()}}),e)})))),this._appModel=e}get currentSeason(){return this._appModel.currentSeason}},Tr=Object(b.a)(Or.prototype,"racerStandingList",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Or),Zr=r(61),Mr=r.n(Zr),Rr=r(232),Nr=r(233);var kr,Ur,Ar=(jr=class{constructor(e){this._appModel=e}get authenticatedUser(){return this._appModel.session.authenticatedUser}get raceResultsWithBets(){const e=this._appModel.currentSeasonHistory,t=e.races,r=e.racesResults,a=e.qualifyingsResults;return t.map((e,t)=>new Rr.a({race:e,finishedRacers:t<r.length?r[t].racersStandings:void 0,getUserName:e=>this._appModel.usersModel.getUserNameById(e),qualifyingResultsStandings:a[t]?a[t].racersStandings:void 0}))}get userStandingsByRound(){return this.raceResultsWithBets.filter(e=>e.hasOfficialResults).map(e=>e.userVotes).map((e,t)=>({title:"gp"+(t+1),userStandings:e.map(e=>new Nr.a({userId:e.id,userName:e.name,totalPoints:e.userScore.value}))}))}get userStandings(){const e=Array.from(this.userStandingsByRound.reduce((e,{userStandings:t})=>(t.forEach(t=>{e.set(t.userId,[...e.get(t.userId)||[],t])}),e),new Map([])).values()).map(e=>{const t=Mr()(e,e=>e.totalPoints);return t.slice(Math.max(t.length-7,0))}),t=new Map([]);return e.forEach(e=>{e.forEach(e=>{if(t.has(e.userId)){const r=e;r.totalPoints+=t.get(e.userId).totalPoints,t.set(e.userId,r)}else t.set(e.userId,e)})}),Array.from(t.values())}},Object(b.a)(jr.prototype,"raceResultsWithBets",[o.computed],Object.getOwnPropertyDescriptor(jr.prototype,"raceResultsWithBets"),jr.prototype),Object(b.a)(jr.prototype,"userStandingsByRound",[o.computed],Object.getOwnPropertyDescriptor(jr.prototype,"userStandingsByRound"),jr.prototype),Object(b.a)(jr.prototype,"userStandings",[o.computed],Object.getOwnPropertyDescriptor(jr.prototype,"userStandings"),jr.prototype),jr),Ir=r(126);var Pr,Br,Cr=(kr=class{constructor(e){var t=this;Object(f.a)(this,"teamsStandingList",Ur,this),this.fetchStandings=()=>this._appModel.operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function e(){var r,a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr.getConstructorStandings(t.currentSeason);case 2:r=e.sent,(a=r.standingsLists[0])&&Object(o.runInAction)(()=>{t.teamsStandingList=a.constructorStandings.map(e=>{const t=e.constructor;return new Ir.a({pos:e.position,name:t.name,id:t.constructorId,points:e.points,url:t.url,nationality:t.nationality})})});case 5:case"end":return e.stop()}}),e)})))),this._appModel=e}get currentSeason(){return this._appModel.currentSeason}},Ur=Object(b.a)(kr.prototype,"teamsStandingList",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kr),Dr=r(127);var qr=(Pr=class{constructor(e){var t=this;Object(f.a)(this,"_userNameForm",Br,this),this.initForm=Object(o.action)(()=>{this._userNameForm=new Dr.b({user:this.currentUser,onUserUpdate:function(){var e=Object(St.a)(Tt.a.mark((function e(r){var a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new _.a(Object(pt.a)({},t.currentUser,{},r)),e.next=3,t._appModel.usersModel.addOrUpdate(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),this._appModel=e}get currentUser(){return this._appModel.session.authenticatedUser}get profileEditForm(){return this._userNameForm}},Br=Object(b.a)(Pr.prototype,"_userNameForm",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(b.a)(Pr.prototype,"profileEditForm",[o.computed],Object.getOwnPropertyDescriptor(Pr.prototype,"profileEditForm"),Pr.prototype),Pr);function Wr(e){const t=new dt(e),r=new F(e),a=new mt(e),n=function(e){return{homePageStore:new ft(e),resultsPageStore:new Ar(e),racerStandingsPageStore:new xr(e),teamsStandingsPageStore:new Cr(e),adminPageStore:new Mt(e,e.services.racesInfoService),loginPageStore:new Ht(e),logoutPageStore:new zt(e),calendarPageStore:new At(e),userBetsHistoryPageStore:new Nt(e),betPageStore:new Rt(e),profilePageStore:new qr(e)}}(e);return Object(pt.a)({},n,{appStore:t,headerStore:r,devToolsStore:a})}class Fr{constructor({userStoreApiUrl:e}){this._apiUrl=e}fetchAll(){var e=this;return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.C.get(e._apiUrl);case 2:return t.t0=_.a.fromJs,t.abrupt("return",t.sent.map(t.t0));case 4:case"end":return t.stop()}}),t)})))()}getById(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.fetchAll();case 2:if(r.t0=t=>t.id===e,a=r.sent.find(r.t0)){r.next=6;break}throw new Error("User can't be found!");case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()}findById(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t.findBy(t=>t.id===e));case 1:case"end":return r.stop()}}),r)})))()}findBy(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.fetchAll();case 2:if(r.t0=e,a=r.sent.find(r.t0)){r.next=6;break}return r.abrupt("return",null);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()}addOrUpdate(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a,n;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e instanceof _.a){r.next=2;break}throw new Error("variable user must be instanceof class User");case 2:return r.next=4,t.fetchAll();case 4:return a=r.sent,(n=a.findIndex(({id:t})=>t===e.id))>-1?a[n]=e:a.push(e),r.next=9,h.C.put(t._apiUrl,a);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),r)})))()}delete(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,t.fetchAll();case 4:return a=r.sent,r.abrupt("return",h.C.put(t._apiUrl,a.filter(t=>t.id!==e)));case 6:case"end":return r.stop()}}),r)})))()}}var Lr=r(91);class Hr extends Lr.a{constructor({season:e,raceName:t,bets:r=[],raceResults:a={}}){super({season:e,raceName:t}),this.bets=r,this.raceResults=a}}class zr{constructor({raceInfoStoreApiUrl:e}){this._apiUrl=e}fetchAll(){var e=this;return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.C.get(e._apiUrl);case 2:return t.t0=e=>new Hr(e),t.abrupt("return",t.sent.map(t.t0));case 4:case"end":return t.stop()}}),t)})))()}saveAll(e){return h.C.put(this._apiUrl,e)}addOrUpdateBet(e,t){var r=this;return Object(St.a)(Tt.a.mark((function a(){var n,s;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.fetchAll();case 2:return n=a.sent,s=[],s=n.some(e=>e.roundId===t.roundId)?n.map(r=>{if(r.roundId===t.roundId){const t=r.bets.findIndex(t=>t.userInfo.id===e.userInfo.id);return t>-1?zr._updateBet(r,e,t):zr._addBet(r,e)}return r}):[...n,new Hr(Object(pt.a)({},t,{bets:[e]}))],a.abrupt("return",r.saveAll(s));case 6:case"end":return a.stop()}}),a)})))()}updateRaceResult(e,t){var r=this;return Object(St.a)(Tt.a.mark((function a(){var n,s;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.fetchAll();case 2:return n=a.sent,(s=n.findIndex(t=>t.roundId===e))>-1&&(n[s].raceResults=Object(pt.a)({},n[s].raceResults,{},t)),a.abrupt("return",r.saveAll(n));case 6:case"end":return a.stop()}}),a)})))()}static _addBet(e,t){return e.bets.push(t),e}static _updateBet(e,t,r){return e.bets[r]=t,e}}class Vr{constructor({localStorageUserKey:e,userService:t,cryptoService:r}){this._localStorageUserKey=e,this._userService=t,this._cryptoService=r}authenticate(e=null){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a,n;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null,e){r.next=7;break}if(a=window.localStorage.getItem(t._localStorageUserKey)){r.next=5;break}return r.abrupt("return",null);case 5:r.next=8;break;case 7:a=e.id;case 8:return r.next=10,t._userService.findById(a);case 10:if(!(n=r.sent)){r.next=14;break}return t._authenticate(n),r.abrupt("return",n);case 14:return r.abrupt("return",null);case 15:case"end":return r.stop()}}),r)})))()}login({login:e,password:t}){var r=this;return Object(St.a)(Tt.a.mark((function a(){var n;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._userService.findBy(t=>t.login===e);case 2:if(n=a.sent){a.next=5;break}return a.abrupt("return","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0435\u043c \u043d\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.");case 5:if(!r._cryptoService.isPasswordValid(t,n.password)){a.next=9;break}if(!r._authenticate(n)){a.next=8;break}return a.abrupt("return",n);case 8:return a.abrupt("return",!1);case 9:return a.abrupt("return","\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c.");case 10:case"end":return a.stop()}}),a)})))()}logout(){window.localStorage.removeItem(this._localStorageUserKey)}signIn({login:e,name:t,password:r}){var a=this;return Object(St.a)(Tt.a.mark((function n(){var s;return Tt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=new _.a({login:e,name:t,password:a._cryptoService.encodePassword(r)}),n.next=3,a._userService.findBy(e=>e.login===s.login);case 3:if(!n.sent){n.next=6;break}return n.abrupt("return","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d.");case 6:return n.prev=6,n.next=9,a._userService.addOrUpdate(s);case 9:n.next=14;break;case 11:return n.prev=11,n.t0=n.catch(6),n.abrupt("return","Server Error. Cannot add or update user");case 14:if(!a._authenticate(s)){n.next=16;break}return n.abrupt("return",s);case 16:return n.abrupt("return",!1);case 17:case"end":return n.stop()}}),n,null,[[6,11]])})))()}_authenticate({id:e}){return!!e&&(window.localStorage.setItem(this._localStorageUserKey,e),!0)}}var Jr=r(90);function Gr(e,t){const r={season:e.season,raceName:e.raceName,raceUrl:e.url,circuit:{url:e.circuit.url,countryName:e.circuit.location.country,circuitName:e.circuit.circuitName,circuitId:e.circuit.circuitId}},a=t.find(({round:t})=>t===Number(e.round));return a&&(r.roundSchedule={practices:[a.practice_1,a.practice_2,a.practice_3],qualification:a.qualification,race:a.race}),new Jr.a(r)}function Yr(e,t){return new me.a(e.givenName,e.familyName,e.permanentNumber,e.code,t,e.nationality,e.dateOfBirth)}class Qr{constructor({season:e,round:t,racersStandings:r}){this.season=e,this.round=Number(t),this.racersStandings=r}}function $r(e){const t=e.season,r=e.round,a=e.results;return new Qr({season:t,round:r,racersStandings:a.map(e=>Yr(e.driver,e.points))})}function Kr(e){const t=e.season,r=e.round,a=e.qualifyingResults;return new Qr({season:t,round:r,racersStandings:a.map(e=>Yr(e.driver,"0"))})}class Xr{constructor({formulaOneOfficialDataRepository:e}){this._repository=e}fetchSeasonRounds(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a,n;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._repository.getF1Calendar(e);case 2:return a=r.sent,r.next=5,t._repository.getRaceSchedule(e);case 5:return n=r.sent,r.abrupt("return",n.races.map(e=>Gr(e,a)));case 7:case"end":return r.stop()}}),r)})))()}fetchRacesResults(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._repository.getRacesResults(e);case 2:return a=r.sent,r.abrupt("return",a.races.map(e=>$r(e)));case 4:case"end":return r.stop()}}),r)})))()}fetchQualifyingResults(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._repository.getQualifyingResults(e);case 2:return a=r.sent,r.abrupt("return",a.races.map(e=>Kr(e)));case 4:case"end":return r.stop()}}),r)})))()}fetchRacers(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){var a,n,s;return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._repository.getDrivers(e);case 2:return a=r.sent,n=Object(Vt.a)(a,1),s=n[0],r.abrupt("return",s.driverStandings.map(({driver:e})=>me.a.create(Object(pt.a)({},e,{firstName:e.givenName,lastName:e.familyName,abbreviation:e.code,number:e.permanentNumber}))));case 6:case"end":return r.stop()}}),r)})))()}}class ea{constructor({round:e,practice_1:t,practice_2:r,practice_3:a,qualification:n,race:s}){this.round=e,this.practice_1=t,this.practice_2=r,this.practice_3=a,this.qualification=n,this.race=s}}var ta=new Map([["2018",[new ea({round:1,practice_1:"20180323T010000Z",practice_2:"20180323T050000Z",practice_3:"20180324T030000Z",qualification:"20180324T060000Z",race:"20180325T051000Z"}),new ea({round:2,practice_1:"20180406T110000Z",practice_2:"20180406T150000Z",practice_3:"20180407T120000Z",qualification:"20180407T150000Z",race:"20180408T151000Z"}),new ea({round:3,practice_1:"20180413T020000Z",practice_2:"20180413T060000Z",practice_3:"20180414T030000Z",qualification:"20180414T060000Z",race:"20180415T061000Z"}),new ea({round:4,practice_1:"20180427T090000Z",practice_2:"20180427T130000Z",practice_3:"20180428T100000Z",qualification:"20180428T130000Z",race:"20180429T121000Z"}),new ea({round:5,practice_1:"20180511T090000Z",practice_2:"20180511T130000Z",practice_3:"20180512T100000Z",qualification:"20180512T130000Z",race:"20180513T131000Z"}),new ea({round:6,practice_1:"20180524T090000Z",practice_2:"20180524T130000Z",practice_3:"20180526T100000Z",qualification:"20180526T130000Z",race:"20180527T131000Z"}),new ea({round:7,practice_1:"20180608T140000Z",practice_2:"20180608T180000Z",practice_3:"20180609T150000Z",qualification:"20180609T180000Z",race:"20180610T181000Z"}),new ea({round:8,practice_1:"20180622T100000Z",practice_2:"20180622T140000Z",practice_3:"20180623T110000Z",qualification:"20180623T140000Z",race:"20180624T141000Z"}),new ea({round:9,practice_1:"20180629T090000Z",practice_2:"20180629T130000Z",practice_3:"20180630T100000Z",qualification:"20180630T130000Z",race:"20180701T131000Z"}),new ea({round:10,practice_1:"20180706T090000Z",practice_2:"20180706T130000Z",practice_3:"20180707T100000Z",qualification:"20180707T130000Z",race:"20180708T131000Z"}),new ea({round:11,practice_1:"20180720T090000Z",practice_2:"20180720T130000Z",practice_3:"20180721T100000Z",qualification:"20180721T130000Z",race:"20180722T131000Z"}),new ea({round:12,practice_1:"20180727T090000Z",practice_2:"20180727T130000Z",practice_3:"20180728T100000Z",qualification:"20180728T130000Z",race:"20180729T131000Z"}),new ea({round:13,practice_1:"20180824T090000Z",practice_2:"20180824T130000Z",practice_3:"20180825T100000Z",qualification:"20180825T130000Z",race:"20180826T131000Z"}),new ea({round:14,practice_1:"20180831T090000Z",practice_2:"20180831T130000Z",practice_3:"20180901T100000Z",qualification:"20180901T130000Z",race:"20180902T131000Z"}),new ea({round:15,practice_1:"20180914T083000Z",practice_2:"20180914T123000Z",practice_3:"20180915T100000Z",qualification:"20180915T130000Z",race:"20180916T121000Z"}),new ea({round:16,practice_1:"20180928T080000Z",practice_2:"20180928T120000Z",practice_3:"20180929T090000Z",qualification:"20180929T120000Z",race:"20180930T111000Z"}),new ea({round:17,practice_1:"20181005T010000Z",practice_2:"20181005T050000Z",practice_3:"20181006T030000Z",qualification:"20181006T060000Z",race:"20181007T051000Z"}),new ea({round:18,practice_1:"20181019T150000Z",practice_2:"20181019T190000Z",practice_3:"20181020T180000Z",qualification:"20181020T210000Z",race:"20181021T181000Z"}),new ea({round:19,practice_1:"20181026T150000Z",practice_2:"20181026T190000Z",practice_3:"20181027T150000Z",qualification:"20181027T180000Z",race:"20181028T191000Z"}),new ea({round:20,practice_1:"20181109T140000Z",practice_2:"20181109T180000Z",practice_3:"20181110T150000Z",qualification:"20181110T180000Z",race:"20181111T181000Z"}),new ea({round:21,practice_1:"20181123T090000Z",practice_2:"20181123T130000Z",practice_3:"20181124T100000Z",qualification:"20181124T130000Z",race:"20181125T131000Z"})]],["2019",[new ea({round:1,practice_1:"20190315T010000Z",practice_2:"20190315T050000Z",practice_3:"20190316T030000Z",qualification:"20190316T060000Z",race:"20190317T051000Z"}),new ea({round:2,practice_1:"20190329T110000Z",practice_2:"20190329T150000Z",practice_3:"20190330T120000Z",qualification:"20190330T150000Z",race:"20190331T151000Z"}),new ea({round:3,practice_1:"20190412T020000Z",practice_2:"20190412T060000Z",practice_3:"20190413T030000Z",qualification:"20190413T060000Z",race:"20190414T061000Z"}),new ea({round:4,practice_1:"20190426T090000Z",practice_2:"20190426T130000Z",practice_3:"20190427T100000Z",qualification:"20190427T130000Z",race:"20190428T121000Z"}),new ea({round:5,practice_1:"20190510T090000Z",practice_2:"20190510T130000Z",practice_3:"20190511T100000Z",qualification:"20190511T130000Z",race:"20190512T131000Z"}),new ea({round:6,practice_1:"20190523T090000Z",practice_2:"20190523T130000Z",practice_3:"20190525T100000Z",qualification:"20190525T130000Z",race:"20190526T131000Z"}),new ea({round:7,practice_1:"20190607T150000Z",practice_2:"20190607T190000Z",practice_3:"20190608T160000Z",qualification:"20190608T180000Z",race:"20190609T181000Z"}),new ea({round:8,practice_1:"20190621T090000Z",practice_2:"20190621T130000Z",practice_3:"20190622T100000Z",qualification:"20190622T130000Z",race:"20190623T131000Z"}),new ea({round:9,practice_1:"20190628T090000Z",practice_2:"20190628T130000Z",practice_3:"20190629T100000Z",qualification:"20190629T130000Z",race:"20190630T131000Z"}),new ea({round:10,practice_1:"20190712T090000Z",practice_2:"20190712T130000Z",practice_3:"20190713T100000Z",qualification:"20190713T130000Z",race:"20190714T131000Z"}),new ea({round:11,practice_1:"20190726T090000Z",practice_2:"20190726T130000Z",practice_3:"20190727T100000Z",qualification:"20190727T130000Z",race:"20190728T131000Z"}),new ea({round:12,practice_1:"20190802T090000Z",practice_2:"20190802T130000Z",practice_3:"20190803T100000Z",qualification:"20190803T130000Z",race:"20190804T131000Z"}),new ea({round:13,practice_1:"20190830T090000Z",practice_2:"20190830T130000Z",practice_3:"20190831T100000Z",qualification:"20190831T130000Z",race:"20190901T131000Z"}),new ea({round:14,practice_1:"20190906T090000Z",practice_2:"20190906T130000Z",practice_3:"20190907T100000Z",qualification:"20190907T130000Z",race:"20190908T131000Z"}),new ea({round:15,practice_1:"20190920T083000Z",practice_2:"20190920T123000Z",practice_3:"20190921T100000Z",qualification:"20190921T130000Z",race:"20190922T121000Z"}),new ea({round:16,practice_1:"20190927T080000Z",practice_2:"20190927T120000Z",practice_3:"20190928T090000Z",qualification:"20190928T120000Z",race:"20190929T111000Z"}),new ea({round:17,practice_1:"20191011T010000Z",practice_2:"20191011T050000Z",practice_3:"20191012T030000Z",qualification:"20191012T060000Z",race:"20191013T051000Z"}),new ea({round:18,practice_1:"20191025T150000Z",practice_2:"20191025T190000Z",practice_3:"20191026T150000Z",qualification:"20191026T180000Z",race:"20191027T191000Z"}),new ea({round:19,practice_1:"20191101T160000Z",practice_2:"20191101T200000Z",practice_3:"20191102T180000Z",qualification:"20191102T210000Z",race:"20191103T191000Z"}),new ea({round:20,practice_1:"20191115T140000Z",practice_2:"20191115T180000Z",practice_3:"20191116T150000Z",qualification:"20191116T180000Z",race:"20191117T181000Z"}),new ea({round:21,practice_1:"20191129T090000Z",practice_2:"20191129T130000Z",practice_3:"20191130T100000Z",qualification:"20191130T130000Z",race:"20191201T131000Z"})]],["2020",[new ea({round:1,practice_1:"20200703T090000Z",practice_2:"20200703T130000Z",practice_3:"20200704T100000Z",qualification:"20200704T130000Z",race:"20200705T131000Z"}),new ea({round:2,practice_1:"20200710T090000Z",practice_2:"20200710T130000Z",practice_3:"20200711T100000Z",qualification:"20200711T130000Z",race:"20200712T131000Z"}),new ea({round:3,practice_1:"20200717T090000Z",practice_2:"20200717T130000Z",practice_3:"20200718T100000Z",qualification:"20200718T130000Z",race:"20200719T131000Z"}),new ea({round:4,practice_1:"20200731T100000Z",practice_2:"20200731T140000Z",practice_3:"20200801T100000Z",qualification:"20200801T130000Z",race:"20200802T131000Z"}),new ea({round:5,practice_1:"20200807T100000Z",practice_2:"20200807T140000Z",practice_3:"20200808T110000Z",qualification:"20200808T130000Z",race:"20200809T131000Z"}),new ea({round:6,practice_1:"20200814T090000Z",practice_2:"20200814T130000Z",practice_3:"20200815T100000Z",qualification:"20200815T130000Z",race:"20200816T131000Z"}),new ea({round:7,practice_1:"20200828T090000Z",practice_2:"20200828T130000Z",practice_3:"20200829T100000Z",qualification:"20200829T130000Z",race:"20200830T131000Z"}),new ea({round:8,practice_1:"20200904T130000Z",practice_2:"20200905T100000Z",practice_3:"20200905T100000Z",qualification:"20200905T130000Z",race:"20200906T131000Z"}),new ea({round:9,practice_1:"20200911T090000Z",practice_2:"20200911T130000Z",practice_3:"20200912T100000Z",qualification:"20200912T130000Z",race:"20200913T131000Z"}),new ea({round:10,practice_1:"20200925T080000Z",practice_2:"20200925T120000Z",practice_3:"20200926T090000Z",qualification:"20200926T120000Z",race:"20200927T111000Z"}),new ea({round:11,practice_1:"20201009T090000Z",practice_2:"20201009T130000Z",practice_3:"20201010T100000Z",qualification:"20201010T130000Z",race:"20201011T131000Z"}),new ea({round:12,practice_1:"20201023T090000Z",practice_2:"20201023T130000Z",practice_3:"20201024T100000Z",qualification:"20201024T130000Z",race:"20201025T131000Z"}),new ea({round:13,practice_1:"20201031T090000Z",practice_2:"20201031T120000Z",practice_3:"20201031T150000Z",qualification:"20201031T130000Z",race:"20201101T131000Z"}),new ea({round:14,practice_1:"20201113T110000Z",practice_2:"20201113T150000Z",practice_3:"20201114T120000Z",qualification:"20201114T130000Z",race:"20201115T131000Z"}),new ea({round:15,practice_1:"20201127T110000Z",practice_2:"20201127T150000Z",practice_3:"20201128T120000Z",qualification:"20201128T150000Z",race:"20201129T151000Z"}),new ea({round:16,practice_1:"20201204T110000Z",practice_2:"20201204T150000Z",practice_3:"20201205T120000Z",qualification:"20201205T150000Z",race:"20201206T151000Z"}),new ea({round:17,practice_1:"20201211T100000Z",practice_2:"20201211T140000Z",practice_3:"20201212T100000Z",qualification:"20201212T130000Z",race:"20201213T131000Z"})]]]);class ra{getF1Calendar(e){const t=ta.get(e);return Promise.resolve(t)}getRaceSchedule(e){return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sr.getRaceSchedule(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}getRacesResults(e){return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sr.getAllRacesResults(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}getQualifyingResults(e){return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sr.getQualifyingResults(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}getDrivers(e){return Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sr.getDriverStandings(e);case 2:return t.abrupt("return",t.sent.standingsLists);case 3:case"end":return t.stop()}}),t)})))()}}var aa=r(122),na=r.n(aa);const sa={encodePassword:function(e){return na.a.hashSync(e,8)},isPasswordValid:function(e,t){return na.a.compareSync(e,t)}};var ca,ia,oa;let ua=(ca=class{constructor(e){Object(f.a)(this,"_currentTime",ia,this),Object(f.a)(this,"_tick",oa,this),this._tickInterval=e}start(){this._interval=setInterval(this._tick,1e3*this._tickInterval),this._tick()}stop(){this._interval&&clearInterval(this._interval)}get currentTime(){return this._currentTime}get currentTimeUtcString(){return Object(te.g)(this._currentTime)}get currentYear(){return(new Date).getUTCFullYear()}},ia=Object(b.a)(ca.prototype,"_currentTime",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M()()}}),oa=Object(b.a)(ca.prototype,"_tick",[o.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this._currentTime=M()()}}}),Object(b.a)(ca.prototype,"currentTime",[o.computed],Object.getOwnPropertyDescriptor(ca.prototype,"currentTime"),ca.prototype),Object(b.a)(ca.prototype,"currentTimeUtcString",[o.computed],Object.getOwnPropertyDescriptor(ca.prototype,"currentTimeUtcString"),ca.prototype),ca);var la,pa;let da=(la=class{constructor(){Object(f.a)(this,"pendingTasksCount",pa,this)}get hasPendingTasks(){return this.pendingTasksCount>0}runWithProgress(e){this.pendingTasksCount++,e(),this.pendingTasksCount--}runWithProgressAsync(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.pendingTasksCount++,r.prev=1,r.next=4,e();case 4:return r.abrupt("return",r.sent);case 5:return r.prev=5,Object(o.runInAction)(()=>{t.pendingTasksCount--}),r.finish(5);case 8:case"end":return r.stop()}}),r,null,[[1,,5,8]])})))()}},pa=Object(b.a)(la.prototype,"pendingTasksCount",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(la.prototype,"hasPendingTasks",[o.computed],Object.getOwnPropertyDescriptor(la.prototype,"hasPendingTasks"),la.prototype),Object(b.a)(la.prototype,"runWithProgress",[o.action],Object.getOwnPropertyDescriptor(la.prototype,"runWithProgress"),la.prototype),Object(b.a)(la.prototype,"runWithProgressAsync",[o.action],Object.getOwnPropertyDescriptor(la.prototype,"runWithProgressAsync"),la.prototype),la);var ha,ma;let fa=(ha=class{constructor({authenticationService:e,operationManager:t,usersModel:r}){var a=this;Object(f.a)(this,"authenticatedUserId",ma,this),this._authService=e,this._operationManager=t,this._usersModel=r,this._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticate();case 2:return(r=t.sent)instanceof _.a&&Object(o.runInAction)(()=>{a.authenticatedUserId=r.id}),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))))}get authenticatedUser(){return this.authenticatedUserId&&this._usersModel.users.find(e=>e.id===this.authenticatedUserId)||null}get isAuthenticated(){return null!==this.authenticatedUser}get isCurrentUserAdmin(){return this.isAuthenticated&&this.authenticatedUser.isAdmin}login({login:e,password:t}){var r=this;return Object(St.a)(Tt.a.mark((function a(){return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",r._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function a(){var n;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._authService.login({login:e,password:t});case 2:if(!((n=a.sent)instanceof _.a)){a.next=6;break}return Object(o.runInAction)(()=>{r.authenticatedUserId=n.id}),a.abrupt("return",!0);case 6:return a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})))));case 1:case"end":return a.stop()}}),a)})))()}logout(){this.isAuthenticated&&(this._authService.logout(),this.authenticatedUserId=null)}signIn({login:e,name:t,password:r}){var a=this;return Object(St.a)(Tt.a.mark((function n(){return Tt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",a._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function n(){var s;return Tt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a._authService.signIn({login:e,name:t,password:r});case 2:if(!((s=n.sent)instanceof _.a)){n.next=6;break}return Object(o.runInAction)(()=>{a.authenticatedUserId=s.id}),n.abrupt("return",!0);case 6:return n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))));case 1:case"end":return n.stop()}}),n)})))()}},ma=Object(b.a)(ha.prototype,"authenticatedUserId",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(b.a)(ha.prototype,"authenticatedUser",[o.computed],Object.getOwnPropertyDescriptor(ha.prototype,"authenticatedUser"),ha.prototype),Object(b.a)(ha.prototype,"isAuthenticated",[o.computed],Object.getOwnPropertyDescriptor(ha.prototype,"isAuthenticated"),ha.prototype),Object(b.a)(ha.prototype,"isCurrentUserAdmin",[o.computed],Object.getOwnPropertyDescriptor(ha.prototype,"isCurrentUserAdmin"),ha.prototype),Object(b.a)(ha.prototype,"login",[o.action],Object.getOwnPropertyDescriptor(ha.prototype,"login"),ha.prototype),Object(b.a)(ha.prototype,"logout",[o.action],Object.getOwnPropertyDescriptor(ha.prototype,"logout"),ha.prototype),Object(b.a)(ha.prototype,"signIn",[o.action],Object.getOwnPropertyDescriptor(ha.prototype,"signIn"),ha.prototype),ha);var ba,ga;let _a=(ba=class{constructor({userService:e,operationManager:t,cryptoService:r}){Object(f.a)(this,"users",ga,this),this._userService=e,this._operationManager=t,this._cryptoService=r,this._operationManager.runWithProgressAsync(()=>this.fetchUsers())}fetchUsers(){var e=this;try{return this._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function t(){var r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._userService.fetchAll();case 2:r=t.sent,Object(o.runInAction)(Object(St.a)(Tt.a.mark((function t(){return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.users=r;case 1:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)}))))}catch(t){console.log("Can't load 'users' in UserModel!!\n",t)}}deleteUser(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._userService.delete(e);case 2:return r.next=4,t.fetchUsers();case 4:case"end":return r.stop()}}),r)})))()}addOrUpdate(e){var t=this;return Object(St.a)(Tt.a.mark((function r(){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.abrupt("return",t._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function r(){return Tt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._userService.addOrUpdate(e);case 2:return r.next=4,t.fetchUsers();case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))));case 3:case"end":return r.stop()}}),r)})))()}resetPassword(e,t){var r=this;return Object(St.a)(Tt.a.mark((function a(){var n;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.fetchUsers();case 2:if(n=r._findUserById(e)){a.next=5;break}return a.abrupt("return");case 5:return n.password=r._cryptoService.encodePassword(t),a.next=8,r.addOrUpdate(n);case 8:case"end":return a.stop()}}),a)})))()}getUserNameById(e){const t=this._findUserById(e);return t?t.name:"<DELETED USER>"}_findUserById(e){return this.users.find(t=>t.id===e)||null}},ga=Object(b.a)(ba.prototype,"users",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ba);class va{constructor({operationManager:e,formulaOneOfficialDataService:t}){this._service=t,this._operationManager=e}fetchRounds(e){return this._operationManager.runWithProgressAsync(()=>this._service.fetchSeasonRounds(e))}fetchRacesResults(e){return this._operationManager.runWithProgressAsync(()=>this._service.fetchRacesResults(e))}fetchQualifyingResults(e){return this._operationManager.runWithProgressAsync(()=>this._service.fetchQualifyingResults(e))}fetchRacers(e){return this._operationManager.runWithProgressAsync(()=>this._service.fetchRacers(e))}}var wa,ya,Oa=class{constructor({operationManager:e,racesInfoService:t}){this._racesInfoService=t,this._operationManager=e}fetchSeasonRaces(e){var t=this;return Object(St.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._operationManager.runWithProgressAsync(()=>t._racesInfoService.fetchAll()));case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))()}},Ta=r(85);class Sa{constructor({season:e="",isLoaded:t=!1,rounds:r=[],racesResults:a=[],racers:n=[],races:s=[],qualifyingsResults:c=[]}={}){this.season=e,this.isLoaded=t,this.rounds=r,this.racesResults=a,this.racers=n,this.races=s,this.qualifyingsResults=c}}let Ea=(wa=class{constructor(e,{racesInfoService:t,formulaOneOfficialDataService:r},a){Object(f.a)(this,"seasonsHistory",ya,this),this._currentSeason=e,this._racesModel=new Oa({operationManager:a,racesInfoService:t}),this._formulaOneOfficialModel=new va({operationManager:a,formulaOneOfficialDataService:r}),this.availableSeasons=["2020","2019","2018"],this._initSeasonsHistory()}_initSeasonsHistory(){this.seasonsHistory=new Map(this.availableSeasons.map(e=>[e,new Sa({season:e})]))}get currentSeasonHistory(){return this.seasonsHistory.has(this._currentSeason)?this.seasonsHistory.get(this._currentSeason):new Sa}getRounds(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).rounds)}getRacesResults(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).racesResults)}getRacers(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).racers)}getRaces(e){return this._withSeasonExistCheck(e,this.seasonsHistory.get(e).races)}loadSeasonHistory(e,t=!1){var r=this;return Object(St.a)(Tt.a.mark((function a(){var n,s,c,i,u,l,p;return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.seasonsHistory.has(e)||!r.seasonsHistory.get(e).isLoaded||t){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,Promise.all([r._formulaOneOfficialModel.fetchRounds(e),r._formulaOneOfficialModel.fetchRacesResults(e),r._formulaOneOfficialModel.fetchRacers(e),r._racesModel.fetchSeasonRaces(e),r._formulaOneOfficialModel.fetchQualifyingResults(e)]);case 4:n=a.sent,s=Object(Vt.a)(n,5),c=s[0],i=s[1],u=s[2],l=s[3],p=s[4],Object(o.runInAction)(()=>{r.seasonsHistory.set(e,new Sa({season:e,isLoaded:!0,rounds:c,racesResults:i,racers:u,races:c.map(e=>{const t=l.find(t=>t.roundId===e.roundId);return new Ta.a(Object(pt.a)({},e,{bets:t?t.bets:[],raceResults:t?t.raceResults:{}}))}),qualifyingsResults:p}))});case 12:case"end":return a.stop()}}),a)})))()}get historiesBySeason(){const e=Array.from(this.seasonsHistory.entries()).map(([e,t])=>t);return Mr()(e,["season"]).reverse()}_withSeasonExistCheck(e,t){return this.seasonsHistory.has(e)?t:[]}},ya=Object(b.a)(wa.prototype,"seasonsHistory",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(b.a)(wa.prototype,"_initSeasonsHistory",[o.action],Object.getOwnPropertyDescriptor(wa.prototype,"_initSeasonsHistory"),wa.prototype),Object(b.a)(wa.prototype,"historiesBySeason",[o.computed],Object.getOwnPropertyDescriptor(wa.prototype,"historiesBySeason"),wa.prototype),wa);var ja;const xa=d.getVoteClosingTime();let Za=(ja=class{constructor(e){const t=new da,r=d.getTickInterval(),a=e.userService,n=e.authenticationService,s=e.cryptoService;this.services=e,this._timeWatcher=new ua(r),this.currentSeason=this._timeWatcher.currentYear.toString(),this._operationManager=t,this._usersModel=new _a({operationManager:t,userService:a,cryptoService:s}),this._sessionModel=new fa({authenticationService:n,operationManager:t,usersModel:this._usersModel}),this._formulaOneHistoryModel=new Ea(this.currentSeason,e,t),this.loadSeasonData(this.currentSeason),Object(o.when)(()=>this.nextRace&&ae(this._timeWatcher.currentTime,this.nextRace.raceStartTime),()=>{this._reloadSeasonData(this.currentSeason)})}get currentSeasonHistory(){return this._formulaOneHistoryModel.currentSeasonHistory}get nextRace(){const e=this._timeWatcher.currentTime,t=this.currentSeasonHistory.races.filter(t=>ae(t.raceStartTime,e));return Object(Vt.a)(t,1)[0]||null}get isProduction(){return d.isProductionMode()}get isUserAlreadyBet(){return!!this._sessionModel.authenticatedUser&&(!!this.nextRace&&this.nextRace.bets.some(e=>e.userInfo.id===this._sessionModel.authenticatedUser.id))}get isBetsAllowed(){if(!this.nextRace)return!1;const e=this.nextRace,t=e.raceStartTime,r=e.qualifyingStartTime;return!(!r||!t)&&!function(e,t,r,a="minute"){return e=re(e),t=re(t),r=re(r),e.isBetween(t,r,a)}(this.timeWatcher.currentTime,function(e,t,r="minute"){return(e=re(e)).subtract(t,r)}(r,xa),t)}get isUserAuthenticated(){return this._sessionModel.isAuthenticated}get isUserAdmin(){return this._sessionModel.isCurrentUserAdmin}get authUserBets(){if(!this._sessionModel.authenticatedUser)return[];const e=[],t=this._sessionModel.authenticatedUser.id;return this.currentSeasonHistory.races.forEach(({bets:r,prettyTitle:a,roundId:n})=>{if(r.some(e=>e.userInfo.id===t)){const s=r[r.findIndex(e=>e.userInfo.id===t)];e.push({raceId:n,title:a,bet:s.betsMap})}}),e}get session(){return this._sessionModel}get usersModel(){return this._usersModel}get formulaOneHistory(){return this._formulaOneHistoryModel}get timeWatcher(){return this._timeWatcher}get operationManager(){return this._operationManager}addNewBet(e,t=null){var r=this;return Object(St.a)(Tt.a.mark((function a(){return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=null!==t?t:r.nextRace,a.abrupt("return",r._operationManager.runWithProgressAsync(Object(St.a)(Tt.a.mark((function a(){return Tt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.services.racesInfoService.addOrUpdateBet(e,t);case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),console.error("Can't update Bet",a.t0);case 8:return a.next=10,r._reloadSeasonData(r.currentSeason);case 10:case"end":return a.stop()}}),a,null,[[0,5]])})))));case 2:case"end":return a.stop()}}),a)})))()}loadSeasonData(e,t=!1){return this._formulaOneHistoryModel.loadSeasonHistory(e)}_reloadSeasonData(e){this._formulaOneHistoryModel.loadSeasonHistory(e,!0)}},Object(b.a)(ja.prototype,"nextRace",[o.computed],Object.getOwnPropertyDescriptor(ja.prototype,"nextRace"),ja.prototype),Object(b.a)(ja.prototype,"isUserAlreadyBet",[o.computed],Object.getOwnPropertyDescriptor(ja.prototype,"isUserAlreadyBet"),ja.prototype),Object(b.a)(ja.prototype,"isBetsAllowed",[o.computed],Object.getOwnPropertyDescriptor(ja.prototype,"isBetsAllowed"),ja.prototype),Object(b.a)(ja.prototype,"authUserBets",[o.computed],Object.getOwnPropertyDescriptor(ja.prototype,"authUserBets"),ja.prototype),ja);var Ma;var Ra=Object(m.a)(Ma=class extends n.a.Component{componentDidUpdate(e){this.props.location!==e.location&&window.scrollTo(0,0)}render(){return this.props.children}})||Ma;Object(o.configure)({enforceActions:"always"});const Na=new class{constructor({configProvider:e}){const t=function(e){const t=e.getUserStoreApiUrl(),r=e.getRaceStoreApiUrl(),a=e.getLocalStorageUserKey(),n=new ra,s=new Fr({userStoreApiUrl:t}),c=new zr({raceInfoStoreApiUrl:r});return{userService:s,authenticationService:new Vr({localStorageUserKey:a,userService:s,cryptoService:sa}),racesInfoService:c,formulaOneOfficialDataService:new Xr({formulaOneOfficialDataRepository:n}),cryptoService:sa}}(e),r=new Za(t);this._stores=Wr(r)}getStores(){return this._stores}}({configProvider:d}).getStores();c.a.render(n.a.createElement(u.Provider,Na,n.a.createElement(i.a,null,n.a.createElement(Ra,null,n.a.createElement(lt,null)))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");l?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):p(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):p(e)})}}()},47:function(e,t,r){"use strict";class a{constructor(e,t,r,a,n=0,s="",c=""){this.firstName=e,this.lastName=t,this.number=r,this.abbreviation=a,this.points=n,this.nationality=s,this.dateOfBirth=c}static create({firstName:e,lastName:t,number:r,abbreviation:n,points:s=0,nationality:c,dateOfBirth:i}){return new a(e,t,r,n,s,c,i)}get name(){return"".concat(this.firstName," ").concat(this.lastName)}get shortName(){return"".concat(this.firstName[0],". ").concat(this.lastName)}get code(){return this.abbreviation}}t.a=a},55:function(e,t,r){"use strict";t.a=class{constructor({name:e,id:t}){this.name=e,this.id=t}}},63:function(e,t,r){"use strict";var a=r(65),n=r(0),s=r.n(n),c=r(1);r(350);t.a=e=>{let t=e.className,r=e.onClick,n=e.disabled,i=e.children,o=e.size,u=Object(a.a)(e,["className","onClick","disabled","children","size"]);return s.a.createElement(c.b,Object.assign({className:"button button--primary ".concat(t),onClick:r,disabled:n,color:"primary",size:o},u),i)}},85:function(e,t,r){"use strict";var a=r(86),n=r(55),s=r(280),c=r.n(s),i=r(281),o=r.n(i),u=r(90);class l extends u.a{constructor({season:e,raceName:t,raceUrl:r,circuit:s,roundSchedule:c,bets:i=[],raceResults:o={}}){super({season:e,raceName:t,raceUrl:r,circuit:s,roundSchedule:c}),this.bets=i.map(e=>{const t=e.userInfo,r=t.name,s=t.id,c=e.betsMap;return new a.a({userInfo:new n.a({name:r,id:s}),betsMap:c})}),this.raceResults=o}get raceStartTime(){return this.roundSchedule.race}get qualifyingStartTime(){return this.roundSchedule.qualification}get prettyTitle(){return c()(this.raceName).map(o.a).join(" ")}}t.a=l},86:function(e,t,r){"use strict";var a=r(38);t.a=class{constructor({userInfo:e,betsMap:t}){this.userInfo=e,this.betsMap=function(e){if(e instanceof Map){const o={};var t=!0,r=!1,n=void 0;try{for(var s,c=e[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){let e=Object(a.a)(s.value,2),t=e[0],r=e[1];r&&(o[t]=r)}}catch(i){r=!0,n=i}finally{try{t||null==c.return||c.return()}finally{if(r)throw n}}return o}return e}(t)}}},87:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(6),c=r(1),i=(r(47),r(52));r(359);function o({firstName:e,lastName:t}){return"".concat(e," ").concat(t.toUpperCase())}class u extends n.a.Component{constructor(...e){super(...e),this.handleSelect=e=>{const t=this.props,r=t.pos;(0,t.onSelect)(e?e.value:null,r)},this._renderOption=e=>{const t=e.value;return n.a.createElement(i.a.Option,Object.assign({},e,{className:"racers-select__option"}),o(t))},this._renderSingleValue=e=>{const t=e.data;return n.a.createElement(i.a.SingleValue,e,o(t))}}render(){const e=this.props,t=e.value,r=e.racerList,a=e.placeholder,s=function(e){return e.map(e=>({label:o(e),value:e}))}(r);return n.a.createElement(i.b,{className:"racers-select",value:t,options:s,placeholder:a,isClearable:!0,onChange:this.handleSelect,components:{Option:this._renderOption,SingleValue:this._renderSingleValue}})}}u.defaultProps={value:null,placeholder:""};var l,p,d,h=u,m=r(38),f=r(7),b=r(4),g=(r(30),r(3));let _=(l=class{constructor({racers:e,onSave:t,initData:r={},gridPositionsCount:a=10}){Object(f.a)(this,"_map",p,this),Object(f.a)(this,"handleSelect",d,this),this.handleSubmit=()=>this._onSave(this.gridMapAsJS),this._initMap(e,r,a),this._racers=e,this._onSave=t}get gridMapAsJS(){const e={};var t=!0,r=!1,a=void 0;try{for(var n,s=this._map[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){let t=Object(m.a)(n.value,2),r=t[0],a=t[1];a&&(e[r]=a.code)}}catch(c){r=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}return e}get tableData(){return Array.from(this._map).map(([e,t])=>({pos:e,racer:t}))}get availableRacers(){return this._racers.filter(({name:e})=>!this.tableData.filter(({racer:e})=>Boolean(e)).some(({racer:t})=>t.name===e))}_initMap(e,t,r){Array(r).fill(null).forEach((r,a)=>{const n=e.find(e=>e.code===t[a+1]);this.handleSelect(n||null,a+1)})}},p=Object(b.a)(l.prototype,"_map",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(b.a)(l.prototype,"gridMapAsJS",[g.computed],Object.getOwnPropertyDescriptor(l.prototype,"gridMapAsJS"),l.prototype),Object(b.a)(l.prototype,"tableData",[g.computed],Object.getOwnPropertyDescriptor(l.prototype,"tableData"),l.prototype),Object(b.a)(l.prototype,"availableRacers",[g.computed],Object.getOwnPropertyDescriptor(l.prototype,"availableRacers"),l.prototype),d=Object(b.a)(l.prototype,"handleSelect",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this._map.set(t,e)}}}),Object(b.a)(l.prototype,"_initMap",[g.action],Object.getOwnPropertyDescriptor(l.prototype,"_initMap"),l.prototype),l);var v,w,y,O=r(63);let T=Object(s.observer)((y=w=class extends n.a.Component{constructor(e){super(e),this._grid=new _(e)}render(){const e=this.props,t=e.placeholder,r=e.submitButtonText;return n.a.createElement(c.i,{tag:"div"},n.a.createElement(c.A,{striped:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"text-center"},"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"),n.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u0442"))),n.a.createElement("tbody",null,this._grid.tableData.map(({pos:e,racer:r})=>n.a.createElement("tr",{key:e},n.a.createElement("td",{className:"text-center"},e),n.a.createElement("td",{style:{width:"85%"}},n.a.createElement(h,{value:r,racerList:this._grid.availableRacers,onSelect:this._grid.handleSelect,pos:Number(e),placeholder:t})))))),n.a.createElement(c.k,null,n.a.createElement(O.a,{onClick:this._grid.handleSubmit},r)))}},w.defaultProps={placeholder:"",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",gridPositionsCount:10,initData:{}},v=y))||v;t.a=T},88:function(e,t,r){"use strict";var a=class{constructor(){this._score=[]}add(e=0){this._score.push(e)}get value(){return this._score.reduce((e,t)=>e+t,0)}get tooltip(){return this._score.join("-")}getPointsAt(e){return this._score[e]}};function n(e,t=null){const r=new a;return t?function(e,t){const r=new a,n=t.slice(0,10);return e.forEach((e,a)=>{if(!e)return void r.add(0);const s=t.findIndex(t=>t===e),c=Math.abs(s-a),i=n.some(t=>t===e),o=c<5?10-2*c:i?2:0;r.add(o)}),r}(function(e,t=10){return Array(t).fill(null).map((t,r)=>e[r+1]?e[r+1]:"")}(e),Object.values(t)):r}var s=r(55);r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return i}));const c="official-results",i="qualification-results";class o extends s.a{constructor({userName:e,userId:t,userBetsMap:r},a=null){super({name:e,id:t}),this.userPoll=r,this.userScore=n(r,a)}static createOfficialResults(e){return new o({userName:"Formula 1 (Race results)",userId:c,userBetsMap:e})}static createQualifyingResults(e){return new o({userName:"Formula 1 (Qualification)",userId:i,userBetsMap:e})}}t.c=o},90:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(91);class n extends a.a{constructor({season:e,raceName:t,raceUrl:r,circuit:a,roundSchedule:n}){super({season:e,raceName:t}),this.raceUrl=r,this.circuit=a,this.roundSchedule=n}}},91:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(282),n=r.n(a);class s{constructor({season:e,raceName:t}){this.season=e,this.raceName=t,this.roundId=n()("".concat(this.raceName," ").concat(this.season))}}}},[[284,1,2]]]);