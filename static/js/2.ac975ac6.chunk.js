(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{740:function(e,t,a){"use strict";var r=a(1),n=a(5),c=a(9),o=a(8),i=a(10),l=a(0),u=a.n(l),s=a(18),p=a(3),b=a(741);a(742),a(76);function h(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a.toUpperCase())}var m=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).handleSelect=function(e){var t=a.props,r=t.pos;(0,t.onSelect)(e?e.value:null,r)},a._renderOption=function(e){var t=e.value;return u.a.createElement(b.a.Option,Object.assign({},e,{className:"racers-select__option"}),h(t))},a._renderSingleValue=function(e){var t=e.data;return u.a.createElement(b.a.SingleValue,e,h(t))},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.racerList,r=e.placeholder,n=function(e){return e.map(function(e){return{label:h(e),value:e}})}(a);return u.a.createElement(b.b,{className:"racers-select",value:t,options:n,placeholder:r,searchable:!1,onChange:this.handleSelect,components:{Option:this._renderOption,SingleValue:this._renderSingleValue}})}}]),t}(u.a.Component);m.defaultProps={value:null,placeholder:""};var d,f,v,O,y,g,j=m,S=a(39),E=a(19),w=a(7),_=(a(42),a(4)),k=(d=function(){function e(t){var a=this,n=t.racers,c=t.onSave,o=t.initData,i=void 0===o?{}:o,l=t.gridPositionsCount,u=void 0===l?10:l;Object(r.a)(this,e),Object(E.a)(this,"_map",f,this),Object(E.a)(this,"handleSelect",v,this),this.handleSubmit=function(){return a._onSave(a.gridMapAsJS)},this._initMap(n,i,u),this._racers=n,this._onSave=c}return Object(n.a)(e,[{key:"_initMap",value:function(e,t,a){var r=this;Array(a).fill(null).forEach(function(a,n){var c=e.find(function(e){return e.code===t[n+1]});r.handleSelect(c||null,n+1)})}},{key:"gridMapAsJS",get:function(){var e={},t=!0,a=!1,r=void 0;try{for(var n,c=this._map[Symbol.iterator]();!(t=(n=c.next()).done);t=!0){var o=n.value,i=Object(S.a)(o,2),l=i[0],u=i[1];u&&(e[l]=u.code)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}return e}},{key:"tableData",get:function(){return Array.from(this._map).map(function(e){var t=Object(S.a)(e,2);return{pos:t[0],racer:t[1]}})}},{key:"availableRacers",get:function(){var e=this;return this._racers.filter(function(t){var a=t.name;return!e.tableData.filter(function(e){var t=e.racer;return Boolean(t)}).some(function(e){return e.racer.name===a})})}}]),e}(),f=Object(w.a)(d.prototype,"_map",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(w.a)(d.prototype,"gridMapAsJS",[_.computed],Object.getOwnPropertyDescriptor(d.prototype,"gridMapAsJS"),d.prototype),Object(w.a)(d.prototype,"tableData",[_.computed],Object.getOwnPropertyDescriptor(d.prototype,"tableData"),d.prototype),Object(w.a)(d.prototype,"availableRacers",[_.computed],Object.getOwnPropertyDescriptor(d.prototype,"availableRacers"),d.prototype),v=Object(w.a)(d.prototype,"handleSelect",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e._map.set(a,t)}}}),Object(w.a)(d.prototype,"_initMap",[_.action],Object.getOwnPropertyDescriptor(d.prototype,"_initMap"),d.prototype),d),P=a(77),D=Object(s.c)((g=y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e)))._grid=new k(e),a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,r=t.submitButtonText;return u.a.createElement(p.i,{tag:"div"},u.a.createElement(p.z,{striped:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"),u.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u0442"))),u.a.createElement("tbody",null,this._grid.tableData.map(function(t){var r=t.pos,n=t.racer;return u.a.createElement("tr",{key:r},u.a.createElement("td",{className:"text-center"},r),u.a.createElement("td",{style:{width:"85%"}},u.a.createElement(j,{value:n,racerList:e._grid.availableRacers,onSelect:e._grid.handleSelect,pos:Number(r),placeholder:a})))}))),u.a.createElement(p.k,null,u.a.createElement(P.a,{onClick:this._grid.handleSubmit},r)))}}]),t}(u.a.Component),y.defaultProps={placeholder:"",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",gridPositionsCount:10,initData:{}},O=g))||O;t.a=D},742:function(e,t,a){},796:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),o=a(3),i=a(2),l=a.n(i),u=a(6),s=a(1),p=a(5),b=a(9),h=a(8),m=a(10),d=a(798),f=a(31),v=(a(76),a(206)),O=(a(48),a(740)),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).handleSave=function(){var e=Object(u.a)(l.a.mark(function e(t){var r,n,c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.user,c=r.onBetsSubmit,o=new v.a({userInfo:n.toUserInfo(),betsMap:t}),e.next=4,c(o);case 4:a.goToResultsPage();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(O.a,{racers:this.props.racers,initData:this.props.userBet,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0440\u043e\u0433\u043d\u043e\u0437",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437",gridPositionsCount:10,onSave:this.handleSave})}},{key:"goToResultsPage",value:function(){this.props.history.push(f.c.RESULTS)}}]),t}(r.Component),g=Object(d.a)(y);t.default=Object(c.b)("betPageStore")(Object(c.c)(function(e){var t=e.betPageStore,a=t.racers,r=t.currentUser,c=t.userBet,i=t.onBetsSubmit,l=t.isBetsAllowed,u=t.nextRaceTitle;return n.a.createElement(o.e,null,n.a.createElement(o.w,null,n.a.createElement(o.c,null,n.a.createElement("h1",{className:"page-title"},l?"\u0414\u0435\u043b\u0430\u0439\u0442\u0435 \u0412\u0430\u0448\u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b!":"\u041f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f."))),n.a.createElement(o.w,null,n.a.createElement(o.c,null,l?n.a.createElement(g,{racers:a,user:r,userBet:c,onBetsSubmit:i}):n.a.createElement("div",{className:"alert alert-warning",role:"alert"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 ",u," \u0443\u0436\u0435 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f.",n.a.createElement("br",null),"\u041d\u043e\u0432\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 \u0431\u0443\u0434\u0443\u0449\u0443\u044e \u0433\u043e\u043d\u043a\u0443 \u0443 \u0412\u0430\u0441 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0447\u0430\u043b\u0430 \u044d\u0442\u043e\u0439."))))}))}}]);