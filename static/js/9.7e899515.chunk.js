(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{727:function(e,t,a){"use strict";var r=a(1),n=a(5),c=a(8),i=a(7),o=a(9),l=a(0),s=a.n(l),u=a(17),p=a(2),b=(a(74),a(728));a(729);function h(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a.toUpperCase())}var m=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).handleSelect=function(e){var t=a.props,r=t.pos;(0,t.onSelect)(e?e.value:null,r)},a._renderOption=function(e){var t=e.value;return s.a.createElement(b.a.Option,Object.assign({},e,{className:"racers-select__option"}),h(t))},a._renderSingleValue=function(e){var t=e.data;return s.a.createElement(b.a.SingleValue,e,h(t))},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.racerList,r=e.placeholder,n=function(e){return e.map(function(e){return{label:h(e),value:e}})}(a);return s.a.createElement(b.b,{className:"racers-select",value:t,options:n,placeholder:r,searchable:!1,onChange:this.handleSelect,components:{Option:this._renderOption,SingleValue:this._renderSingleValue}})}}]),t}(s.a.Component);m.defaultProps={value:null,placeholder:""};var d,f,v,O,y,g,j=m,S=a(45),E=a(22),_=a(6),w=(a(40),a(4)),B=(d=function(){function e(t){var a=this,n=t.racers,c=t.onSave,i=t.initData,o=void 0===i?{}:i,l=t.gridPositionsCount,s=void 0===l?10:l;Object(r.a)(this,e),Object(E.a)(this,"_map",f,this),Object(E.a)(this,"handleSelect",v,this),this.handleSubmit=function(){return a._onSave(a.gridMapAsJS)},this._initMap(n,o,s),this._racers=n,this._onSave=c}return Object(n.a)(e,[{key:"_initMap",value:function(e,t,a){var r=this;Array(a).fill(null).forEach(function(a,n){var c=e.find(function(e){return e.code===t[n+1]});r.handleSelect(c||null,n+1)})}},{key:"gridMapAsJS",get:function(){var e={},t=!0,a=!1,r=void 0;try{for(var n,c=this._map[Symbol.iterator]();!(t=(n=c.next()).done);t=!0){var i=n.value,o=Object(S.a)(i,2),l=o[0],s=o[1];s&&(e[l]=s.code)}}catch(u){a=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}return e}},{key:"tableData",get:function(){return Array.from(this._map).map(function(e){var t=Object(S.a)(e,2);return{pos:t[0],racer:t[1]}})}},{key:"availableRacers",get:function(){var e=this;return this._racers.filter(function(t){var a=t.name;return!e.tableData.filter(function(e){var t=e.racer;return Boolean(t)}).some(function(e){return e.racer.name===a})})}}]),e}(),f=Object(_.a)(d.prototype,"_map",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(_.a)(d.prototype,"gridMapAsJS",[w.computed],Object.getOwnPropertyDescriptor(d.prototype,"gridMapAsJS"),d.prototype),Object(_.a)(d.prototype,"tableData",[w.computed],Object.getOwnPropertyDescriptor(d.prototype,"tableData"),d.prototype),Object(_.a)(d.prototype,"availableRacers",[w.computed],Object.getOwnPropertyDescriptor(d.prototype,"availableRacers"),d.prototype),v=Object(_.a)(d.prototype,"handleSelect",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e._map.set(a,t)}}}),Object(_.a)(d.prototype,"_initMap",[w.action],Object.getOwnPropertyDescriptor(d.prototype,"_initMap"),d.prototype),d),k=a(110),D=Object(u.observer)((g=y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e)))._grid=new B(e),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,r=t.submitButtonText;return s.a.createElement(p.i,{tag:"div"},s.a.createElement(p.z,{striped:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"},"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"),s.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u0442"))),s.a.createElement("tbody",null,this._grid.tableData.map(function(t){var r=t.pos,n=t.racer;return s.a.createElement("tr",{key:r},s.a.createElement("td",{className:"text-center"},r),s.a.createElement("td",{style:{width:"85%"}},s.a.createElement(j,{value:n,racerList:e._grid.availableRacers,onSelect:e._grid.handleSelect,pos:Number(r),placeholder:a})))}))),s.a.createElement(p.k,null,s.a.createElement(k.a,{onClick:this._grid.handleSubmit},r)))}}]),t}(s.a.Component),y.defaultProps={placeholder:"",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",gridPositionsCount:10,initData:{}},O=g))||O;t.a=D},729:function(e,t,a){},769:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),i=a(2),o=a(3),l=a.n(o),s=a(10),u=a(1),p=a(5),b=a(8),h=a(7),m=a(9),d=a(725),f=a(15),v=(a(74),a(202)),O=(a(47),a(727)),y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n))))._handleSave=function(){var e=Object(s.a)(l.a.mark(function e(t){var r,n,c,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.user,c=r.onBetsSubmit,i=new v.a({userInfo:n.toUserInfo(),betsMap:t}),e.next=4,c(i);case 4:a._goToResultsPage();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"_goToResultsPage",value:function(){this.props.history.push(f.a.RESULTS)}},{key:"render",value:function(){var e=this.props,t=e.racers,a=e.usersBet;return n.a.createElement(O.a,{racers:t,initData:a,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0440\u043e\u0433\u043d\u043e\u0437",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437",gridPositionsCount:10,onSave:this._handleSave})}}]),t}(r.Component),g=Object(d.a)(y);t.default=Object(c.inject)(function(e){var t=e.betPageStore;return{racers:t.racers,currentUser:t.currentUser,usersBet:t.usersBet,isBetsAllowed:t.isBetsAllowed,nextRaceTitle:t.nextRaceTitle,onBetsSubmit:function(e){return t.submitBet(e)}}})(function(e){var t=e.racers,a=e.currentUser,r=e.usersBet,c=e.isBetsAllowed,o=e.nextRaceTitle,l=e.onBetsSubmit,s=c?"\u0414\u0435\u043b\u0430\u0439\u0442\u0435 \u0412\u0430\u0448\u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b!":"\u041f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f.";return n.a.createElement(i.e,{className:"page"},n.a.createElement(i.w,null,n.a.createElement(i.c,null,n.a.createElement("h1",{className:"page-title"},s))),n.a.createElement(i.w,null,n.a.createElement(i.c,null,c?n.a.createElement(g,{racers:t,user:a,usersBet:r,onBetsSubmit:l}):n.a.createElement("div",{className:"alert alert-warning",role:"alert"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u044b \u043d\u0430 ",o," \u0443\u0436\u0435 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f.",n.a.createElement("br",null),"\u041d\u043e\u0432\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 \u0431\u0443\u0434\u0443\u0449\u0443\u044e \u0433\u043e\u043d\u043a\u0443 \u0443 \u0412\u0430\u0441 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0447\u0430\u043b\u0430 \u044d\u0442\u043e\u0439."))))})}}]);