(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{774:function(e,t,a){},783:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(5),l=a(9),c=a(7),s=a(8),i=a(0),o=a.n(i),u=a(12),m=a(2),b=(a(774),a(16)),d=a(49),p=a(6),h=(a(40),a(4)),f=a(3),E=a.n(f),O=a(10),v=a(32),g=a(209),j=a(147),S=(a(95),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).handleSelect=function(e){a.props.onSelect(e)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.raceList;return o.a.createElement(j.b,{value:t,labelKey:"title",options:a,searchable:!1,onChange:this.handleSelect})}}]),t}(o.a.Component));S.defaultProps={value:null};var w,y,k,_,C,U,R,N,A,I,T,x,z,P,D=S,F=a(68),L=(a(56),a(39)),B=a(146),K=Object(u.b)(function(e){return{onBetsSubmit:e.adminPageStore.racesSectionStore.addNewBet,racers:e.adminPageStore.racesSectionStore.racers,users:e.adminPageStore.racesSectionStore.users}})(w=Object(u.c)((y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s))),Object(b.a)(a,"_isDialogOpen",k,Object(d.a)(Object(d.a)(a))),Object(b.a)(a,"_selectedUser",_,Object(d.a)(Object(d.a)(a))),Object(b.a)(a,"handleSubmit",C,Object(d.a)(Object(d.a)(a))),Object(b.a)(a,"handleToggleDialog",U,Object(d.a)(Object(d.a)(a))),Object(b.a)(a,"handleUserSelect",R,Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.race,a=e.users,n=e.racers;return o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{onClick:this.handleToggleDialog},"Add bet"),this._isDialogOpen&&o.a.createElement(m.o,{isOpen:!0},o.a.createElement(m.q,null,"\u0413\u043e\u043b\u043e\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f (",t.title,")"),o.a.createElement(m.p,null,o.a.createElement(m.i,null,o.a.createElement(m.k,null,o.a.createElement(m.n,{htmlFor:"users_select"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),o.a.createElement(j.b,{name:"users_select",value:this._selectedUser,labelKey:"name",options:a.slice(),searchable:!1,onChange:this.handleUserSelect})),o.a.createElement(m.k,null,o.a.createElement(g.a,{racers:n,onSave:this.handleSubmit}))))))}}]),t}(o.a.Component),k=Object(p.a)(y.prototype,"_isDialogOpen",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Object(p.a)(y.prototype,"_selectedUser",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Object(p.a)(y.prototype,"handleSubmit",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(E.a.mark(function t(a){var n;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._selectedUser){t.next=3;break}return alert("\u0412\u044b\u0431\u0435\u0440\u0438 \u042e\u0437\u0435\u0440\u0430!!!"),t.abrupt("return");case 3:return n=new B.a({userInfo:e._selectedUser.toUserInfo(),betsMap:a}),t.next=6,e.props.onBetsSubmit(n);case 6:e.handleToggleDialog();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}),U=Object(p.a)(y.prototype,"handleToggleDialog",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._isDialogOpen=!e._isDialogOpen}}}),R=Object(p.a)(y.prototype,"handleUserSelect",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._selectedUser=t}}}),w=y))||w)||w,q=Object(u.b)(function(e){return{racesSectionStore:e.adminPageStore.racesSectionStore}})(N=Object(u.c)(N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).handleAddNewRace=function(){},a.handleAddRaceResults=function(){a.props.racesSectionStore.showRaceResultsPanel()},a.handleInitRacesCollection=function(){a.props.racesSectionStore.initRacesCollection()},a.handleGridSelectorSave=function(){var e=Object(O.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.racesSectionStore.addOrUpdateRaceResults(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleRaceSelect=function(e){a.props.racesSectionStore.selectedRace=e},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.racesSectionStore,t=e.storeApiUrl,a=e.isRaceResultsPanelVisible,n=e.selectedRace,r=e.races,l=e.racers;return o.a.createElement("section",{style:{marginTop:"10px"}},o.a.createElement(m.w,null,o.a.createElement(m.c,{className:"command-buttons-container"},o.a.createElement(m.b,{size:"sm",color:"info",className:"command-button",disabled:!0,onClick:this.handleInitRacesCollection},"Init Races"),o.a.createElement(m.b,{size:"sm",color:"info",className:"command-button",onClick:this.handleAddNewRace},"Add New Race"),o.a.createElement(m.b,{size:"sm",color:"info",className:"command-button",onClick:this.handleAddRaceResults},"Add Race Results"))),a&&[o.a.createElement(m.w,{key:1},o.a.createElement(m.c,{md:2},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u043d\u043a\u0443:"),o.a.createElement(m.c,null,o.a.createElement(D,{value:n,onSelect:this.handleRaceSelect,raceList:r.slice()}))),o.a.createElement(m.w,{key:2},o.a.createElement(m.c,null,o.a.createElement(g.a,{racers:l.slice(),onSave:this.handleGridSelectorSave})))],o.a.createElement(m.w,null,o.a.createElement(m.c,null,o.a.createElement(m.z,{bordered:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u2116"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Date"),o.a.createElement("th",null,"Bets"),o.a.createElement("th",null,"Commands"))),o.a.createElement("tbody",null,r.map(function(e,t){var a=e.title,n=e.raceStartTime,r=e.qualifyingStartTime,l=e.bets;return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t+1),o.a.createElement("td",null,a),o.a.createElement("td",null,o.a.createElement("div",null,"Qual: ",Object(v.d)(r)),o.a.createElement("div",null,"Race: ",Object(v.d)(n))),o.a.createElement("td",null,"We have ",l.length," bets"),o.a.createElement("td",null,o.a.createElement(K,{race:e})))}))))),o.a.createElement(m.w,null,o.a.createElement(m.c,null,"Details:"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},t))))}}]),t}(i.Component))||N)||N,G=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).handleOkClick=function(){var e=a.props.user,t=new L.a({id:e&&e.id||void 0,login:a._userLoginInput.value,name:a._userNameInput.value,password:a._userPasswordInput.value,isAdmin:a._userIsAdminInput.checked});a.props.onSubmit(t)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.user;if(t){var a=t.login,n=t.name,r=t.password,l=t.isAdmin;this._userLoginInput.value=a,this._userNameInput.value=n,this._userPasswordInput.value=r,this._userIsAdminInput.checked=l}}},{key:"render",value:function(){var e=this;return o.a.createElement(m.w,null,o.a.createElement(m.c,null,o.a.createElement(m.i,{tag:"div",className:"user-form"},o.a.createElement(m.k,null,o.a.createElement(m.n,{for:"login",className:"user-form__label"},"Login"),o.a.createElement(m.m,{className:"user-form__input",type:"text",name:"login",id:"login",placeholder:"Login",innerRef:function(t){e._userLoginInput=t}})),o.a.createElement(m.k,null,o.a.createElement(m.n,{for:"name",className:"user-form__label"},"\u0418\u043c\u044f \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"),o.a.createElement(m.m,{className:"user-form__input",type:"text",name:"name",id:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0438\u043c\u044f",innerRef:function(t){e._userNameInput=t}})),o.a.createElement(m.k,{className:"user-form"},o.a.createElement(m.n,{for:"password",className:"user-form__label"},"\u041f\u0430\u0440\u043e\u043b\u044c"),o.a.createElement(m.m,{className:"user-form__input user-form__input--password",type:"password",name:"password",id:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",innerRef:function(t){e._userPasswordInput=t}})),o.a.createElement(m.k,{check:!0},o.a.createElement(m.n,{check:!0},o.a.createElement(m.m,{type:"checkbox",innerRef:function(t){e._userIsAdminInput=t}})," ","Check me out")),o.a.createElement(m.k,null,o.a.createElement("button",{className:"btn btn-default user-form__button",onClick:this.handleOkClick},"OK")))))}}]),t}(o.a.Component),J=Object(u.b)(function(e){return{usersSectionStore:e.adminPageStore.usersSectionStore}})(A=Object(u.c)(A=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).handleInitUsersCollection=Object(O.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.usersSectionStore.fetchUsers();case 1:case"end":return e.stop()}},e,this)})),a.handleAddNewUser=function(){a._toggleForm(!0)},a.handleEditUser=function(e){var t=a.props.usersSectionStore,n=t.users;(0,t.setUserForEdit)(n.find(function(t){return t.id===e})||null)},a.handleUserFormSubmit=function(){var e=Object(O.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.usersSectionStore.addOrUpdate(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"_toggleForm",value:function(e){this.props.usersSectionStore.toggleUserForm(e)}},{key:"render",value:function(){var e=this,t=this.props.usersSectionStore,a=t.isUserFormVisible,n=t.storeApiUrl,r=t.userForEdit,l=t.users,c=t.deleteUser;return o.a.createElement("section",{style:{marginTop:"10px"}},a&&o.a.createElement(G,{onSubmit:this.handleUserFormSubmit,user:r}),o.a.createElement(m.w,null,o.a.createElement(m.c,{className:"command-buttons-container"},o.a.createElement(m.b,{size:"sm",color:"info",className:"command-button",disabled:!0,onClick:this.handleInitUsersCollection},"Init User's Col"),o.a.createElement(m.b,{size:"sm",color:"info",className:"command-button",onClick:this.handleAddNewUser},"Add New User"))),o.a.createElement(m.w,null,o.a.createElement(m.c,null,o.a.createElement(m.z,{bordered:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"User Name"),o.a.createElement("th",null,"Login"),o.a.createElement("th",null,"isAdmin"),o.a.createElement("th",null,"isTesting"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,l.map(function(t){var a=t.id,n=t.name,r=t.login,l=t.isAdmin,s=t.isTesting;return o.a.createElement("tr",{key:a},o.a.createElement("td",{title:a},n),o.a.createElement("td",null,r),o.a.createElement("td",null,o.a.createElement("div",null,o.a.createElement("input",{type:"checkbox",checked:l,readOnly:!0}))),o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",checked:s,readOnly:!0})),o.a.createElement("td",null,o.a.createElement(m.b,{onClick:function(){return e.handleEditUser(a)}},"edit"),o.a.createElement(m.b,{onClick:function(){c(a)}},"delete")))}))))),o.a.createElement(m.w,null,o.a.createElement(m.c,null,"Details:"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},n))))}}]),t}(i.Component))||A)||A,V=Object(u.b)(function(e){return{usersCount:e.adminPageStore.usersSectionStore.users.length}})(I=Object(u.c)((T=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s))),Object(b.a)(a,"activeTab",x,Object(d.a)(Object(d.a)(a))),Object(b.a)(a,"toggle",z,Object(d.a)(Object(d.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.usersCount;return o.a.createElement("div",null,o.a.createElement(m.r,{tabs:!0},o.a.createElement(m.s,null,o.a.createElement(m.t,{className:"".concat("1"===this.activeTab?"active":""),onClick:function(){e.toggle("1")}},"Races")),o.a.createElement(m.s,null,o.a.createElement(m.t,{className:"".concat("2"===this.activeTab?"active":""),onClick:function(){e.toggle("2")}},"Users"," ",o.a.createElement(m.a,{color:"secondary",pill:!0},t)))),o.a.createElement(m.x,{activeTab:this.activeTab},o.a.createElement(m.y,{tabId:"1"},o.a.createElement(m.w,{style:{marginTop:"1rem"}},o.a.createElement(m.c,{sm:"12"},o.a.createElement("h4",null,"Races details"),o.a.createElement(q,null)))),o.a.createElement(m.y,{tabId:"2"},o.a.createElement(m.w,{style:{marginTop:"1rem"}},o.a.createElement(m.c,{sm:"12"},o.a.createElement("h4",null,"Users Details"),o.a.createElement(J,null))))))}}]),t}(i.Component),x=Object(p.a)(T.prototype,"activeTab",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1"}}),z=Object(p.a)(T.prototype,"toggle",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab!==t&&(e.activeTab=t)}}}),I=T))||I)||I,W=Object(u.c)(P=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(m.e,{tag:"section"},o.a.createElement(m.w,null,o.a.createElement(m.c,null,o.a.createElement("h1",{className:"page-title"},"Admin Page"))),o.a.createElement(V,null))}}]),t}(o.a.Component))||P;t.default=W}}]);